[project]
name = "phileas"
description = "A Python package for the reproducibility of hardware security experiments."
version = "0.5"
authors = [ { name="Louis Dubois", email="ldbo@protonmail.com" } ]
readme = "Readme.md"
requires-python = ">=3.10,<3.14"
classifiers = [
    "Development Status :: 4 - Beta",
    "Intended Audience :: Science/Research",
    "Intended Audience :: Developers",
    "Intended Audience :: Information Technology",
    "License :: OSI Approved :: MIT License",
    "Natural Language :: English",
    "Programming Language :: Rust",
    "Programming Language :: Python :: 3",
    "Programming Language :: Python :: 3.10",
    "Programming Language :: Python :: 3.11",
    "Programming Language :: Python :: 3.12",
    "Programming Language :: Python :: 3.13",
    "Programming Language :: Python :: Implementation :: CPython",
    "Programming Language :: Python :: Implementation :: PyPy",
    "Topic :: Security",
]
license = "MIT"
license-files = [ "license" ]
dependencies = [
    "graphviz (>=0.21,<0.22)",
    "rich (>=14.1.0,<15.0.0)",
    "ruamel-yaml (>=0.18.14,<0.19.0)",
    "jinja2 (>=3.1.6,<4.0.0)",
    "numpy (>=2.0)",
    "xarray (>=2024.7)",
    "pandas (>=2.3.1,<3.0.0)",
    "matplotlib (>=3.10.5,<4.0.0)",
    "jupyterlab (>=4.4.5,<5.0.0)",
    "dacite (>=1.9.2,<2.0.0)",
    "sympy (>=1.14.0,<2.0.0)",
    "typing-extensions (>=4.14.1,<5.0.0)",
    "black (>=25.1.0,<26.0.0)",
]

[project.optional-dependencies]
xarray = ["xarray"]
pandas = ["pandas"]
notebooks = ["matplotlib", "xarray", "pandas", "jupyterlab"]
sympy = ["sympy"]

[project.urls]
repository = "https://github.com/ldbo/phileas"
issues = "https://github.com/ldbo/phileas/issues"
documentation = "https://phileas.readthedocs.io/en/latest/"

[build-system]
requires = ["poetry-core>=2.0", "maturin>=1.9,<2.0"]
build-backend = "maturin"

[tool.maturin]
module-name = "phileas._rust"
features = ["pyo3/extension-module"]
profile = "release"

[tool.poetry.group.dev]
optional = true

[tool.poetry.group.dev.dependencies]
ipython = "^8.18"
ipdb = "^0.13.13"
pre-commit = "^4.2.0"
hypothesis = "^6.131.17"
coverage = "^7.8.0"
mypy = "^1.15.0"
pandas-stubs = "^2.2"
maturin = "^1.9"
maturin-import-hook = "^0.3.0"
sphinx = "^7"
sphinx-autobuild = "^2024.10.3"
pydata-sphinx-theme = "^0.16.1"
myst-nb = "^1.2.0"
sphinx-copybutton = "^0.5.2"
sphinx-math-dollar = "^1.2.1"
sphinx-design = "^0.6.1"
jupytext = "^1.17.1"

[project.scripts]
phileas = 'phileas.__main__:main'

[tool.isort]
profile = "black"

[tool.black]
version = '25.1'
target-version = ['py313']

[tool.coverage.run]
branch = true
omit = [
    "./test/",
    "./tox",
]

[tool.coverage.report]
exclude_also = [
    "pragma: no cover",
    "raise NotImplementedError()",
]
include = [
    "./phileas/**"
]

[tool.mypy]
check_untyped_defs = true
follow_untyped_imports = true
