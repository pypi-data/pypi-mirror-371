version: 2

build:
  os: ubuntu-24.04
  tools:
    python: "3.13"
    rust: "1.86"
  jobs:
    post_create_environment:
    - asdf plugin add uv
    - asdf install uv latest
    - asdf global uv latest
    - uv tool install --python-preference only-managed --python 3.13 poetry
    post_install:
    - VIRTUAL_ENV=$READTHEDOCS_VIRTUALENV_PATH uvx poetry install --with=dev
    - VIRTUAL_ENV=$READTHEDOCS_VIRTUALENV_PATH uvx poetry run maturin develop

sphinx:
   configuration: doc/source/conf.py

formats: all
