"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[6362],{58573:function(e,n,t){var a=t(26068),o=t.n(a),r=t(78093),l=t(87497),u=t(50959),i=t(11527),s=function(e){var n=e.message,t=e.type,a=e.rows,u=void 0===a?1:a,s=e.ellipsis,c=e.style;return(0,i.jsx)(i.Fragment,{children:n?(0,i.jsxs)(l.Z.Paragraph,{type:t,ellipsis:void 0!==s?s:{rows:u,tooltip:n},style:o()({textAlign:"center",padding:"2px 5px",borderRadius:"var(--border-radius-base)",margin:0,backgroundColor:"var(--ant-color-error-bg)"},c),children:[(0,i.jsx)(r.Z,{className:"m-r-8"}),n]}):null})};n.Z=u.memo(s)},59995:function(e,n,t){t.d(n,{Uq:function(){return l},ZP:function(){return r}});var a=t(1669),o=t(50959);function r(){return a.Z.CancelToken.source}function l(){var e=a.Z.CancelToken.source,n=(0,o.useRef)(null),t=function(){n.current&&n.current.cancel()};return(0,o.useEffect)((function(){return function(){n.current&&n.current.cancel()}}),[]),{updateCancelToken:function(){t(),n.current=e()},cancelRequest:t,getCanceltToken:function(){return n.current.token},source:e}}},63057:function(e,n,t){t.d(n,{Z:function(){return C}});var a=t(26068),o=t.n(a),r=t(15558),l=t.n(r),u=t(48305),i=t.n(u),s=t(43943),c=t(38551),d=t(8267),m=t(23333),f=t(85885),h=t(82187),p=t.n(h),v=t(50959),g=t(11527),x=function(e){var n=e.value,t=e.onChange,a=e.onSelect,r=e.style,l=e.label,u=e.placeholder,h=e.height,x=void 0===h?46:h,_=(0,c.useIntl)(),C=v.useRef(null),y=(0,v.useState)({minRows:1,maxRows:1,focus:!1}),b=i()(y,2),k=b[0],w=b[1],j=function(){w({minRows:3,maxRows:3,focus:!0}),setTimeout((function(){var e,n;null===(e=C.current)||void 0===e||null===(n=e.focus)||void 0===n||n.call(e,{cursor:"end"})}),50)};return(0,g.jsxs)("div",{className:p()("row-textarea",{focus:k.focus}),style:o()({},r),children:[(0,g.jsxs)("div",{style:{display:k.focus?"block":"none"},className:"textarea-wrapper",children:[l&&(0,g.jsx)("span",{className:"textarea-label",children:l}),(0,g.jsx)(d.Z.TextArea,{className:"custome-scrollbar",ref:C,placeholder:u,style:{borderRadius:"0",border:"none"},value:n,autoSize:{minRows:k.minRows,maxRows:k.maxRows},onFocus:j,onBlur:function(e){w({minRows:2,maxRows:2,focus:!1})},allowClear:!1,onChange:function(e){null==t||t(e)},onSelect:function(e){e.stopPropagation();var t=e.target.selectionStart,o=e.target.selectionEnd,r=n.substring(0,t),l=n.substring(o,n.length);null==a||a({start:t,end:o,beforeText:r,afterText:l})},onPaste:function(n){var t;null===(t=e.onPaste)||void 0===t||t.call(e,n)}})]}),!k.focus&&(0,g.jsxs)("div",{className:"content-wrap",onClick:j,children:[(0,g.jsxs)("div",{className:"content",style:{height:x},children:[l&&(0,g.jsx)("span",{className:"title",children:l}),n||(0,g.jsx)("span",{style:{color:"var(--ant-color-text-tertiary)"},children:u})]}),n&&(0,g.jsx)(m.Z,{title:_.formatMessage({id:"common.button.clear"}),children:(0,g.jsx)(f.ZP,{className:"clear-btn",type:"text",icon:(0,g.jsx)(s.Z,{}),size:"small",onClick:function(){null==t||t({target:{value:""}})}})})]})]})},_=t(69070),C=(0,v.forwardRef)((function(e,n){var t=e.textList,a=e.showLabel,r=void 0===a||a,u=e.height,i=e.onChange,s=e.extra,d=e.onPaste,h=e.onSelect,p=(0,c.useIntl)(),C=(0,v.useRef)(0),y=(0,v.useRef)(null),b=function(){return C.current=C.current+1,C.current},k=function(){b();var e=l()(t);e.push({text:"",uid:C.current,name:"Text ".concat(e.length+1)}),null==i||i(e)},w=function(e){var n=l()(t),a=n.findIndex((function(n){return n.uid===e.uid}));n.splice(a,1),null==i||i(n)},j=function(e,n){var a=l()(t),o=a.findIndex((function(e){return e.uid===n.uid}));a[o].text=e,null==i||i(a)};return(0,v.useImperativeHandle)(n,(function(){return{handleAdd:k,handleDelete:w,handleTextChange:j,setMessageId:b}})),(0,g.jsx)("div",{className:"input-list",ref:y,children:t.map((function(e,n){return(0,g.jsxs)("div",{className:"input-item","data-uid":e.uid,children:[(0,g.jsx)("div",{className:"input-wrap",children:(0,g.jsx)(x,{height:u,label:r?"".concat(n+1):null,value:e.text,placeholder:p.formatMessage({id:"playground.embedding.inputyourtext"}),onChange:function(n){return j(n.target.value,e)},onPaste:function(e){return null==d?void 0:d(e,n)},onSelect:function(e){return null==h?void 0:h(o()(o()({},e),{},{index:n}))}})}),(0,g.jsx)("span",{className:"btn-group",children:(0,g.jsx)(m.Z,{title:p.formatMessage({id:"common.button.delete"}),children:(0,g.jsx)(f.ZP,{danger:!0,size:"small",type:"text",icon:(0,g.jsx)(_.Z,{}),onClick:function(){return w(e)}})})}),null==s?void 0:s(e)]},e.uid)}))})}))},8450:function(e,n,t){var a,o=t(26068),r=t.n(o),l=t(67825),u=t.n(l),i=t(53649),s=t.n(i),c=t(38551),d=(t(50959),t(97884)),m=t(11527),f=["tokenResult"],h=d.ZP.div(a||(a=s()(["\n  font-size: var(--font-size-small);\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  padding: 2px 5px;\n  .text {\n    color: var(--ant-orange);\n  }\n"])));n.Z=function(e){var n=e.tokenResult,t=u()(e,f),a=(0,c.useIntl)();return n?(0,m.jsx)(h,r()(r()({},t),{},{children:(null==n?void 0:n.total_tokens)&&(0,m.jsxs)("span",{className:"text",children:[a.formatMessage({id:"playground.tokenusage"}),":"," ",null==n?void 0:n.total_tokens]})})):null}},2284:function(e,n,t){t.d(n,{H:function(){return o},N:function(){return a}});var a={"zh-CN":["最近哪家咖啡店评价最好？","附近有没有推荐的咖啡厅？","明天天气预报说会下雨。","北京是中国的首都。","我想找一个适合学习的地方。"],"en-US":["What are the best cafes nearby?","Can you recommend a quiet coffee shop?","I’m planning a trip to Japan next month.","The capital of France is Paris.","I'm looking for a place to study."],"ja-JP":["近くにおすすめのカフェはありますか？","静かな喫茶店を探しています。","明日の天気はどうですか？","富士山は日本で一番高い山です。","勉強に集中できる場所を知っていますか？"],"ru-RU":["Где находится ближайшая аптека?","Можете подсказать, где купить лекарства?","Погода сегодня очень хорошая.","Я ищу кафе рядом с вокзалом.","Как добраться до аэропорта?"]},o={"zh-CN":{query:"如何提高睡眠质量？",documents:["保持规律的作息时间，晚上避免使用电子产品。","参加更多社交活动有助于提高情绪。","多喝咖啡可以让你更有精神。"]},"en-US":{query:"What are the benefits of regular exercise?",documents:["Regular physical activity helps improve cardiovascular health and mental well-being.","Eating too much sugar can lead to health issues.","Exercise is often done in gyms or outdoors."]},"ja-JP":{query:"効果的な英語の勉強法は？",documents:["毎日少しずつでも英語に触れることが大切です。","睡眠時間を削ると集中力が低下します。","文法よりも単語を先に覚えましょう。"]},"ru-RU":{query:"Как улучшить концентрацию во время учёбы?",documents:["Регулярные перерывы помогают поддерживать концентрацию.","Учёба ночью может быть неэффективной.","Прогулка на свежем воздухе улучшает работу мозга."]}}},26174:function(e,n,t){t.d(n,{Bx:function(){return l},Cb:function(){return s},Ho:function(){return u},Um:function(){return o},m3:function(){return i},m4:function(){return a},zv:function(){return r}});var a={seed:"seed",stop:"stop",temperature:"temperature",top_p:"top_p",n_ctx:"n_ctx",n_slot:"n_slot",max_model_len:"max_model_len",frequency_penalty:"frequency_penalty",presence_penalty:"presence_penalty",max_total_tokens:"max_total_tokens"},o=["temperature","top_p","frequency_penalty","presence_penalty"],r=["sample_method","sampling_steps","schedule_method","cfg_scale","guidance","negative_prompt","seed","strength"],l={seed:null,stop:null,temperature:1,top_p:1,max_tokens:null,frequency_penalty:null,presence_penalty:null},u={seed:null,sample_method:"euler_a",cfg_scale:4.5,guidance:3.5,sampling_steps:10,negative_prompt:null,strength:null,schedule_method:"discrete",preview:"preview_faster"},i={style:null},s={n:1,size:"512x512",width:512,height:512}},83458:function(e,n,t){t.d(n,{Z:function(){return l}});var a=t(37963),o=t(69997),r=t(50959);function l(e){var n=(0,o.Z)().size;(0,r.useEffect)((function(){var t;n.width<a.Z.lg&&(null!==(t=e.triggeredRef)&&void 0!==t&&t.collapse||e.handler())}),[n.width])}},24662:function(e,n,t){t.d(n,{M:function(){return x},X:function(){return g}});var a=t(15558),o=t.n(a),r=t(26068),l=t.n(r),u=t(48305),i=t.n(u),s=t(38780),c=t(39121),d=t(38551),m=t(68476),f=t(32699),h=t.n(f),p=t(50959),v=t(26174),g=function(e,n){var t=e.modelList,a=e.model,o=e.isChat,r=n.metaKeys,u=void 0===r?{}:r,c=n.defaultValues,m=void 0===c?{}:c,f=n.defaultParamsConfig,g=void 0===f?[]:f,x=(0,p.useRef)(null),_=(0,d.useSearchParams)(),C=i()(_,1)[0],y=(0,p.useState)({}),b=i()(y,2),k=b[0],w=b[1],j=(0,p.useState)(l()(l()({},m),{},{model:""})),R=i()(j,2),S=R[0],z=R[1],P=(0,p.useState)({model:""}),I=i()(P,2),Z=I[0],M=I[1],N=(0,p.useState)(g),F=i()(N,2),U=F[0],V=F[1],O=(0,p.useRef)(null),T=(0,s.Z)().initialize,q=(0,p.useMemo)((function(){var e;return o?C.get("model")||a||(null==t||null===(e=t[0])||void 0===e?void 0:e.value):a}),[a,t,o]),L=function(e){var n=new Set(v.Um),t=e||{},a=h().pick(t,h().keys(u)),o=Object.entries(u).reduce((function(e,t){var o=i()(t,2),r=o[0],l=o[1],u=a[r];return h().hasIn(a,r)&&(e[l]=n.has(r)?h().round(u,2):u),e}),{}),r=function(e){var n=e||{},t=n.max_model_len,a=n.n_ctx,o=n.n_slot,r=n.max_total_tokens,l=0;return a&&o?l=h().divide(a,o):t?l=t:r&&(l=r),{max_tokens:l||16384,defaultFormValue:l?h().divide(l,2):1024}}(o);return{form:h().merge({},m,l()(l()({},h().omit(o,["n_ctx","n_slot","max_model_len","max_total_tokens"])),{},{seed:-1===o.seed?null:o.seed,max_tokens:r.defaultFormValue})),meta:l()(l()({},o),{},{max_tokens:r.max_tokens})}},E=(0,p.useMemo)((function(){var e=null==U?void 0:U.map((function(e){return e.name}));return null==e?void 0:e.join(",")}),[U]),H=(0,p.useCallback)((function(e){if(e){var n=t.find((function(n){return n.value===e})),a=L(null==n?void 0:n.meta),o=a.form,r=a.meta;w(r),z(l()(l()({},o),{},{model:e})),M(l()(l()({},o),{},{model:e}));var u=g.map((function(e){return l()(l()({},e),{},{attrs:"max_tokens"===e.name?l()(l()({},e.attrs),{},{max:r.max_tokens}):l()({},e.attrs)})}));V(u)}}),[t,g]),D=(0,p.useCallback)((function(e,n){e.model?H(e.model):(M(n),z(n))}),[H]);return(0,p.useEffect)((function(){q&&t.length&&H(q)}),[q,t.length]),(0,p.useEffect)((function(){O.current&&T(O.current)}),[T]),{extractLLMMeta:L,handleOnModelChange:H,handleOnValuesChange:D,setModelMeta:w,setInitialValues:z,setParams:M,setParamsConfig:V,formRef:x,paramsConfig:U,initialValues:S,parameters:Z,modelMeta:k,paramsRef:O,formFields:E}},x=function(e,n){var t,a=e.modelList,r="edit"===n.type?c.GF:c.GF.filter((function(e){return"strength"!==e.name})),u=(0,p.useRef)(null),s=(0,d.useSearchParams)(),f=i()(s,1)[0],g=(0,p.useState)({}),x=i()(g,2),_=x[0],C=x[1],y=(0,p.useState)(!1),b=i()(y,2),k=b[0],w=b[1],j=p.useState([]),R=i()(j,2),S=R[0],z=R[1],P=p.useState([].concat(o()(c.pL),o()(c.yU))),I=i()(P,2),Z=I[0],M=I[1],N=(0,p.useState)(l()(l()(l()({},v.Cb),v.Ho),{},{model:""})),F=i()(N,2),U=F[0],V=F[1],O=(0,p.useState)([].concat(o()(c.pL),o()(c.yU),o()(r))),T=i()(O,2),q=T[0],L=T[1],E=(0,p.useState)(l()(l()(l()({},v.Cb),v.Ho),{},{model:""})),H=i()(E,2),D=H[0],Q=H[1],A=(0,p.useMemo)((function(){var e;return f.get("model")||(null==a||null===(e=a[0])||void 0===e?void 0:e.value)||""}),[a]),B=p.useRef(l()(l()(l()({},v.Cb),v.m3),v.Ho)),G=m.Z.useWatch("random_seed",null===(t=u.current)||void 0===t?void 0:t.form),J=(0,p.useMemo)((function(){return["random_seed"]}),[G]),W=function(e,n){if(n.length){var t=c.yU.map((function(e){return l()(l()({},e),{},{options:n})}));return[].concat(o()(c.pL),o()(t))}var a=e.meta||{},r=a.max_height,u=a.max_width,i=h().cloneDeep(c.Ci).map((function(e){var n="height"===e.name?r:u;return l()(l()({},e),{},{attrs:l()(l()({},e.attrs),{},{max:n||e.attrs.max})})}));return[].concat(o()(c.pL),o()(i))},K=function(e){var n=function(e){var n=e||{},t=n.max_height,a=n.max_width;if(!t||!a)return c.od;var o=c.od.filter((function(e){return e.width<=a&&e.height<=t||"custom"===e.value}));return o.find((function(e){return e.width===a&&e.height===t}))||o.push({width:a,height:t,label:"".concat(a,"x").concat(t),value:"".concat(a,"x").concat(t)}),o}(e);return{form:h().merge({},l()(l()({},v.Cb),v.Ho),l()(l()({},h().pick(e,v.zv)),{},{seed:-1===(null==e?void 0:e.seed)?null:null==e?void 0:e.seed,size:n.length?"".concat((null==e?void 0:e.default_width)||512,"x").concat((null==e?void 0:e.default_height)||512):"custom",width:(null==e?void 0:e.default_width)||512,height:(null==e?void 0:e.default_height)||512})),meta:e,sizeOptions:n}},X=function(e){return"custom"===e.size?[].concat(o()(Z),o()(c.Ci),o()(e.isOpenaiCompatible?c.QU:r)):[].concat(o()(Z),o()(e.isOpenaiCompatible?c.QU:r))},Y=function(e){h().merge(B.current,e)},$=(0,p.useMemo)((function(){var e=null==q?void 0:q.map((function(e){return e.name}));return null==e?void 0:e.join(",")}),[q]),ee=(0,p.useCallback)((function(e){if(e){var n=a.find((function(n){return n.value===e})),t=K(null==n?void 0:n.meta),u=t.form,i=t.sizeOptions,s=W(n,i);L(k?s:[].concat(o()(s),o()(r))),M(s),z(i),C((null==n?void 0:n.meta)||{}),V(l()(l()({},u),{},{model:e})),Q(l()(l()({},u),{},{model:e})),Y(u)}}),[a,k]),ne=(0,p.useCallback)((function(e,n){var t;e.model?ee(e.model):e.size&&"custom"===e.size?(L([].concat(o()(Z),o()(c.Ci),o()(k?c.QU:r))),Q(l()(l()({},n),{},{width:_.default_width||512,height:_.default_height||512})),null===(t=u.current)||void 0===t||null===(t=t.form)||void 0===t||t.setFieldsValue({width:_.default_width||512,height:_.default_height||512}),Y(e)):e.size&&"custom"===D.size?(L([].concat(o()(Z),o()(k?c.QU:r))),Q(n),Y(e)):(Q(n),Y(e))}),[ee,D.size,Z,k]);return(0,p.useEffect)((function(){A&&a.length&&ee(A)}),[A,a.length]),{extractIMGMeta:K,generateImageParamsConfig:W,setImageSizeOptions:z,setBasicParamsConfig:M,updateCacheFormData:Y,handleOnValuesChange:ne,handleToggleParamsStyle:function(){var e,n={};n=k?h().pick(B.current,h().keys(l()(l()({},v.Cb),v.Ho))):h().pick(B.current,h().keys(l()(l()({},v.Cb),v.m3)));var t=X({size:n.size,isOpenaiCompatible:!k});null===(e=u.current)||void 0===e||null===(e=e.form)||void 0===e||e.setFieldsValue(l()(l()({},n),{},{model:D.model})),L(t),Q(l()(l()({},n),{},{model:D.model})),w(!k),Y(l()(l()({},n),{},{model:D}))},setParams:Q,setInitialValues:V,updateParamsConfig:X,setParamsConfig:L,form:u,modelMeta:_,formFields:$,watchFields:J,paramsConfig:q,initialValues:U,parameters:D,isOpenaiCompatible:k,cacheFormData:B,basicParamsConfig:Z,imageSizeOptions:S,openaiCompatibleFieldsDefaultValus:v.m3,advancedFieldsDefaultValus:v.Ho,ImageAdvancedParamsConfig:r,imgInitialValues:v.Cb,ImageCountConfig:c.pL,ImageSizeConfig:c.yU,ImageCustomSizeConfig:c.Ci,ImageconstExtraConfig:c.QU}}},32314:function(){}}]);