"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[8882],{23364:function(e,n,t){var r=t(35453),o=t(80189),a=t(63297),i=t(93556),s=t(50959),l=t(82187),c=t.n(l),u=t(12602),d=t(8544),f=t(69887),m=["className","component","viewBox","spin","rotate","tabIndex","onClick","children"],h=s.forwardRef((function(e,n){var t=e.className,l=e.component,h=e.viewBox,v=e.spin,p=e.rotate,g=e.tabIndex,x=e.onClick,y=e.children,b=(0,i.Z)(e,m),w=s.useRef(),k=(0,u.x1)(w,n);(0,f.Kp)(Boolean(l||y),"Should have `component` prop or `children`."),(0,f.C3)(w);var Z=s.useContext(d.Z),j=Z.prefixCls,C=void 0===j?"anticon":j,E=Z.rootClassName,M=c()(E,C,(0,a.Z)({},"".concat(C,"-spin"),!!v&&!!l),t),S=c()((0,a.Z)({},"".concat(C,"-spin"),!!v)),T=p?{msTransform:"rotate(".concat(p,"deg)"),transform:"rotate(".concat(p,"deg)")}:void 0,R=(0,o.Z)((0,o.Z)({},f.vD),{},{className:S,style:T,viewBox:h});h||delete R.viewBox;var P=g;return void 0===P&&x&&(P=-1),s.createElement("span",(0,r.Z)({role:"img"},b,{ref:k,tabIndex:P,onClick:x,className:M}),l?s.createElement(l,R,y):y?((0,f.Kp)(Boolean(h)||1===s.Children.count(y)&&s.isValidElement(y)&&"use"===s.Children.only(y).type,"Make sure that you provide correct `viewBox` prop (default `0 0 1024 1024`) to the icon."),s.createElement("svg",(0,r.Z)({},R,{viewBox:h}),y)):null)}));h.displayName="AntdIcon",n.Z=h},2917:function(e,n,t){t.d(n,{Z:function(){return d}});var r=t(35453),o=t(93556),a=t(50959),i=t(23364),s=["type","children"],l=new Set;function c(e){return Boolean("string"==typeof e&&e.length&&!l.has(e))}function u(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,t=e[n];if(c(t)){var r=document.createElement("script");r.setAttribute("src",t),r.setAttribute("data-namespace",t),e.length>n+1&&(r.onload=function(){u(e,n+1)},r.onerror=function(){u(e,n+1)}),l.add(t),document.body.appendChild(r)}}function d(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.scriptUrl,t=e.extraCommonProps,l=void 0===t?{}:t;n&&"undefined"!=typeof document&&"undefined"!=typeof window&&"function"==typeof document.createElement&&(Array.isArray(n)?u(n.reverse()):u([n]));var c=a.forwardRef((function(e,n){var t=e.type,c=e.children,u=(0,o.Z)(e,s),d=null;return e.type&&(d=a.createElement("use",{xlinkHref:"#".concat(t)})),c&&(d=c),a.createElement(i.Z,(0,r.Z)({},l,u,{ref:n}),d)}));return c.displayName="Iconfont",c}},48660:function(e,n,t){t.d(n,{Z:function(){return l}});var r=t(35453),o=t(50959),a={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M257.7 752c2 0 4-.2 6-.5L431.9 722c2-.4 3.9-1.3 5.3-2.8l423.9-423.9a9.96 9.96 0 000-14.1L694.9 114.9c-1.9-1.9-4.4-2.9-7.1-2.9s-5.2 1-7.1 2.9L256.8 538.8c-1.5 1.5-2.4 3.3-2.8 5.3l-29.5 168.2a33.5 33.5 0 009.4 29.8c6.6 6.4 14.9 9.9 23.8 9.9zm67.4-174.4L687.8 215l73.3 73.3-362.7 362.6-88.9 15.7 15.6-89zM880 836H144c-17.7 0-32 14.3-32 32v36c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-36c0-17.7-14.3-32-32-32z"}}]},name:"edit",theme:"outlined"},i=t(52273),s=function(e,n){return o.createElement(i.Z,(0,r.Z)({},e,{ref:n,icon:a}))};var l=o.forwardRef(s)},1404:function(e,n,t){t.d(n,{Z:function(){return l}});var r=t(35453),o=t(50959),a={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M456 231a56 56 0 10112 0 56 56 0 10-112 0zm0 280a56 56 0 10112 0 56 56 0 10-112 0zm0 280a56 56 0 10112 0 56 56 0 10-112 0z"}}]},name:"more",theme:"outlined"},i=t(52273),s=function(e,n){return o.createElement(i.Z,(0,r.Z)({},e,{ref:n,icon:a}))};var l=o.forwardRef(s)},22953:function(e,n,t){t.d(n,{Z:function(){return l}});var r=t(35453),o=t(50959),a={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M858.5 763.6a374 374 0 00-80.6-119.5 375.63 375.63 0 00-119.5-80.6c-.4-.2-.8-.3-1.2-.5C719.5 518 760 444.7 760 362c0-137-111-248-248-248S264 225 264 362c0 82.7 40.5 156 102.8 201.1-.4.2-.8.3-1.2.5-44.8 18.9-85 46-119.5 80.6a375.63 375.63 0 00-80.6 119.5A371.7 371.7 0 00136 901.8a8 8 0 008 8.2h60c4.4 0 7.9-3.5 8-7.8 2-77.2 33-149.5 87.8-204.3 56.7-56.7 132-87.9 212.2-87.9s155.5 31.2 212.2 87.9C779 752.7 810 825 812 902.2c.1 4.4 3.6 7.8 8 7.8h60a8 8 0 008-8.2c-1-47.8-10.9-94.3-29.5-138.2zM512 534c-45.9 0-89.1-17.9-121.6-50.4S340 407.9 340 362c0-45.9 17.9-89.1 50.4-121.6S466.1 190 512 190s89.1 17.9 121.6 50.4S684 316.1 684 362c0 45.9-17.9 89.1-50.4 121.6S557.9 534 512 534z"}}]},name:"user",theme:"outlined"},i=t(52273),s=function(e,n){return o.createElement(i.Z,(0,r.Z)({},e,{ref:n,icon:a}))};var l=o.forwardRef(s)},81698:function(e,n,t){t.d(n,{Z:function(){return l}});var r=t(35453),o=t(50959),a={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"defs",attrs:{},children:[{tag:"style",attrs:{}}]},{tag:"path",attrs:{d:"M759 335c0-137-111-248-248-248S263 198 263 335c0 82.8 40.6 156.2 103 201.2-.4.2-.7.3-.9.4-44.7 18.9-84.8 46-119.3 80.6a373.42 373.42 0 00-80.4 119.5A373.6 373.6 0 00136 874.8a8 8 0 008 8.2h59.9c4.3 0 7.9-3.5 8-7.8 2-77.2 32.9-149.5 87.6-204.3C356 614.2 431 583 511 583c137 0 248-111 248-248zM511 507c-95 0-172-77-172-172s77-172 172-172 172 77 172 172-77 172-172 172zm105 221h264c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H703.5l47.2-60.1a8.1 8.1 0 001.7-4.9c0-4.4-3.6-8-8-8h-72.6c-4.9 0-9.5 2.3-12.6 6.1l-68.5 87.1c-4.4 5.6-6.8 12.6-6.8 19.8.1 17.7 14.4 32 32.1 32zm240 64H592c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h176.5l-47.2 60.1a8.1 8.1 0 00-1.7 4.9c0 4.4 3.6 8 8 8h72.6c4.9 0 9.5-2.3 12.6-6.1l68.5-87.1c4.4-5.6 6.8-12.6 6.8-19.8-.1-17.7-14.4-32-32.1-32z"}}]},name:"user-switch",theme:"outlined"},i=t(52273),s=function(e,n){return o.createElement(i.Z,(0,r.Z)({},e,{ref:n,icon:a}))};var l=o.forwardRef(s)},31863:function(e,n,t){var r,o,a,i=t(90228),s=t.n(i),l=t(87999),c=t.n(l),u=t(48305),d=t.n(u),f=t(53649),m=t.n(f),h=t(32246),v=t(72541),p=t(38551),g=t(40174),x=t(1956),y=t(90468),b=t(85885),w=t(83603),k=t(91663),Z=t(50959),j=t(97884),C=t(11527),E=(0,k.kc)((function(e){var n=e.css;return{"delete-modal-content":n(r||(r=m()(["\n    display: flex;\n    font-size: var(--font-size-middle);\n    .anticon {\n      font-size: 20px;\n      margin-right: 10px;\n      color: var(--ant-color-warning);\n    }\n    .title {\n      display: flex;\n      align-items: center;\n      font-weight: var(--font-weight-500);\n    }\n  "]))),content:n(o||(o=m()(["\n    padding-top: 15px;\n    padding-left: 30px;\n    color: var(--ant-color-text-secondary);\n    white-space: pre-line;\n    word-break: break-all;\n    span {\n      color: var(--ant-color-text);\n      display: flex;\n      margin-top: 8px;\n    }\n  "])))}})),M=j.ZP.div(a||(a=m()(["\n  margin-top: 20px;\n  margin-left: 30px;\n  display: flex;\n  justify-content: flex-start;\n  align-items: center;\n  .check-text {\n    font-weight: 700;\n    color: var(--ant-color-warning);\n  }\n"]))),S=(0,Z.forwardRef)((function(e,n){var t,r=(0,p.useIntl)(),o=E().styles,a=(0,h.Z)(),i=a.saveScrollHeight,l=a.restoreScrollHeight,u=(0,Z.useState)(!1),f=d()(u,2),m=f[0],k=f[1],j=(0,Z.useState)({checked:!1}),S=d()(j,2),T=S[0],R=S[1],P=(0,Z.useState)({}),L=d()(P,2),I=L[0],z=L[1],A=function(e){var n;i(),z(e),R({checked:(null===(n=e.checkConfig)||void 0===n?void 0:n.defautlChecked)||!1}),k(!0)},O=function(){k(!1),l()},N=function(){var e;k(!1),null===(e=I.onCancel)||void 0===e||e.call(I),l()},_=function(){var e=c()(s()().mark((function e(){var n,t;return s()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,null===(n=I.onOk)||void 0===n?void 0:n.call(I);case 3:t=e.sent,Array.isArray(t)?t.every((function(e){return"fulfilled"===(null==e?void 0:e.status)}))&&g.ZP.success(r.formatMessage({id:"common.message.success"})):g.ZP.success(r.formatMessage({id:"common.message.success"})),e.next=10;break;case 8:e.prev=8,e.t0=e.catch(0);case 10:return e.prev=10,k(!1),l(),e.finish(10);case 14:case"end":return e.stop()}}),e,null,[[0,8,10,14]])})));return function(){return e.apply(this,arguments)}}();return(0,Z.useImperativeHandle)(n,(function(){return{show:A,hide:O,configuration:T}})),(0,C.jsxs)(x.Z,{style:{top:"20%"},open:m,onOk:_,onCancel:N,destroyOnClose:!1,closeIcon:!1,maskClosable:!1,keyboard:!1,width:460,styles:{footer:{marginTop:"20px"}},footer:(0,C.jsxs)(y.Z,{size:20,children:[(0,C.jsx)(b.ZP,{onClick:N,size:"middle",children:I.cancelText?r.formatMessage({id:I.cancelText}):r.formatMessage({id:"common.button.cancel"})}),(0,C.jsx)(b.ZP,{type:"primary",onClick:_,size:"middle",children:I.okText?r.formatMessage({id:I.okText}):r.formatMessage({id:"common.button.delete"})})]}),children:[(0,C.jsx)("div",{className:o["delete-modal-content"],children:(0,C.jsxs)("span",{className:"title",children:[(0,C.jsx)(v.Z,{}),(0,C.jsx)("span",{children:I.title?r.formatMessage({id:I.title}):r.formatMessage({id:"common.title.delete.confirm"})})]})}),(0,C.jsx)("div",{className:o.content,dangerouslySetInnerHTML:{__html:I.content?r.formatMessage({id:I.operation||""},{type:r.formatMessage({id:I.content}),name:I.name}):""}}),I.checkConfig&&(0,C.jsx)(M,{children:(0,C.jsx)(w.Z,{checked:T.checked,onChange:function(e){return R({checked:e.target.checked})},children:(0,C.jsx)("span",{className:"check-text",children:r.formatMessage({id:null===(t=I.checkConfig)||void 0===t?void 0:t.checkText})})})})]})}));n.Z=S},59597:function(e,n,t){t.d(n,{Z:function(){return x}});var r=t(48305),o=t.n(r),a=t(26068),i=t.n(a),s=t(1404),l=t(38551),c=t(23333),u=t(85885),d=t(94899),f=t(82187),m=t.n(f),h=t(32699),v=t.n(h),p=t(50959),g=t(11527),x=function(e){var n=e.items,t=e.size,r=void 0===t?"middle":t,a=e.trigger,f=void 0===a?["hover"]:a,h=e.showText,x=e.disabled,y=e.variant,b=e.color,w=e.extra,k=e.onSelect,Z=v().head(n),j=(0,l.useIntl)(),C=function(e){var t=v().head(n);k(t.key,t)};return null!=n&&n.length?(0,g.jsx)(g.Fragment,{children:1===(null==n?void 0:n.length)?(0,g.jsx)(c.Z,{title:j.formatMessage({id:null==Z?void 0:Z.label}),children:(0,g.jsx)(u.ZP,i()(i()({className:m()("dropdown-button",r),icon:null==Z?void 0:Z.icon,size:r},null==Z?void 0:Z.props),{},{onClick:C}))}):(0,g.jsx)(d.Z.Button,{disabled:x,trigger:f,type:"primary",dropdownRender:function(e){return(0,g.jsx)("div",{className:"flex flex-column ",style:{backgroundColor:"var(--ant-color-bg-elevated)",padding:5,alignItems:"flex-start",borderRadius:"var(--border-radius-base)",boxShadow:"var(--ant-box-shadow-secondary)"},children:v().map(v().tail(n),(function(e){return(0,p.createElement)(u.ZP,i()(i()({},e.props),{},{type:"text",size:r,icon:e.icon,key:e.key,disabled:e.disabled,onClick:function(){return function(e){var t=v().find(n,{key:e.key});k(e.key,t)}(e)},style:{width:"100%",justifyContent:"flex-start"}}),j.formatMessage({id:e.label}))}))})},buttonsRender:function(e){var n=o()(e,2);n[0],n[1];return[(0,g.jsx)(g.Fragment,{children:h?(0,g.jsxs)(u.ZP,i()(i()({},null==Z?void 0:Z.props),{},{disabled:(null==Z?void 0:Z.disabled)||x,className:m()("dropdown-button",r),onClick:C,size:r,icon:null==Z?void 0:Z.icon,variant:y,color:b,children:[j.formatMessage({id:null==Z?void 0:Z.label}),w]})):(0,g.jsx)(c.Z,{title:j.formatMessage({id:null==Z?void 0:Z.label}),children:(0,g.jsx)(u.ZP,i()(i()({},null==Z?void 0:Z.props),{},{className:m()("dropdown-button",r),onClick:C,size:r,icon:null==Z?void 0:Z.icon,disabled:null==Z?void 0:Z.disabled}))},"leftButton")}),(0,g.jsx)(u.ZP,{icon:(0,g.jsx)(s.Z,{}),size:r,variant:y,color:"default",className:m()("dropdown-button",r)},"menu")]}})}):(0,g.jsx)("span",{})}},67768:function(e,n,t){var r,o=t(26068),a=t.n(o),i=t(53649),s=t.n(i),l=t(38551),c=t(90468),u=t(85885),d=(t(50959),t(97884)),f=t(11527),m=d.ZP.div(r||(r=s()(["\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  gap: 20px;\n"])));n.Z=function(e){var n=e.onOk,t=e.onCancel,r=e.cancelText,o=e.okText,i=e.okBtnProps,s=e.cancelBtnProps,d=e.loading,h=e.htmlType,v=void 0===h?"button":h,p=e.style,g=e.showOkBtn,x=void 0===g||g,y=e.description,b=e.extra,w=e.showCancelBtn,k=void 0===w||w,Z=(e.form,(0,l.useIntl)());return(0,f.jsxs)(m,{children:[(0,f.jsx)("div",{children:y}),(0,f.jsxs)(c.Z,{size:20,style:a()({},p),children:[k&&(0,f.jsx)(u.ZP,a()(a()({onClick:t,style:{width:"88px"}},s),{},{children:r||Z.formatMessage({id:"common.button.cancel"})})),b,x&&(0,f.jsx)(u.ZP,a()(a()({type:"primary",onClick:n,style:{width:"88px"},loading:d,htmlType:v},i),{},{children:o||Z.formatMessage({id:"common.button.save"})}))]})]})}},98817:function(e,n,t){var r=t(26068),o=t.n(r),a=t(32246),i=t(1956),s=t(50959),l=t(11527);n.Z=function(e){var n=(0,a.Z)(),t=n.saveScrollHeight,r=n.restoreScrollHeight;return s.useEffect((function(){e.open?t():r()}),[e.open]),(0,l.jsx)(i.Z,o()({},e))}},32246:function(e,n,t){t.d(n,{Z:function(){return o}});var r=t(50959);function o(){var e=r.useRef(0),n=r.useRef({}),t=r.useRef(null),o=r.useRef(null),a=r.useRef(null),i=function(){var e;t.current=null===(e=window.__GPUSTACK_BODY_SCROLLER__)||void 0===e||null===(e=e.elements())||void 0===e?void 0:e.scrollEventElement,o.current=window.__GPUSTACK_BODY_SCROLLER__},s=r.useCallback((function(){var r,a,s,l;t.current||i(),n.current=null===(r=o.current)||void 0===r?void 0:r.state();var c=null===(a=n.current)||void 0===a||null===(a=a.overflowAmount)||void 0===a?void 0:a.y;e.current=c,null===(s=o.current)||void 0===s||null===(l=s.options)||void 0===l||l.call(s,{overflow:{x:"hidden",y:"visible"}})}),[]),l=r.useCallback((function(){a.current&&clearTimeout(a.current),a.current=setTimeout((function(){var e,n;null===(e=o.current)||void 0===e||null===(n=e.options)||void 0===n||n.call(e,{overflow:{x:"hidden",y:"scroll"}})}),500)}),[]);return r.useEffect((function(){return i(),function(){t.current=null,o.current=null}}),[]),{saveScrollHeight:s,restoreScrollHeight:l}}},41650:function(e,n,t){t.d(n,{Nq:function(){return m},YX:function(){return c},h8:function(){return v},r4:function(){return d}});var r=t(90228),o=t.n(r),a=t(87999),i=t.n(a),s=t(38551),l="/users";function c(e){return u.apply(this,arguments)}function u(){return(u=i()(o()().mark((function e(n){return o()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,s.request)("".concat(l),{methos:"GET",params:n}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function d(e){return f.apply(this,arguments)}function f(){return(f=i()(o()().mark((function e(n){return o()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,s.request)("".concat(l),{method:"POST",data:n.data}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function m(e){return h.apply(this,arguments)}function h(){return(h=i()(o()().mark((function e(n){return o()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,s.request)("".concat(l,"/").concat(n.data.id),{method:"PUT",data:n.data}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function v(e){return p.apply(this,arguments)}function p(){return(p=i()(o()().mark((function e(n){return o()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,s.request)("".concat(l,"/").concat(n),{method:"DELETE"}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},47993:function(e,n,t){t.r(n),t.d(n,{default:function(){return Q}});var r=t(90228),o=t.n(r),a=t(26068),i=t.n(a),s=t(87999),l=t.n(s),c=t(48305),u=t.n(c),d=t(8445),f=t(31863),m=t(59597),h=t(49280),v=t(62722),p=t(20369),g=t(82344),x=t(44336),y=t(48660),b=t(69070),w=t(56838),k=t(19019),Z=t(67581),j=t(38551),C=t(29687),E=t(40174),M=t(23010),S=t(90468),T=t(8267),R=t(85885),P=t(82930),L=t(7672),I=t.n(L),z=t(50959),A=t(94299),O=t(41650),N=t(67768),_=t(98817),K=t(39139),B=t(55825),D=t(81698),H=t(22953),q=t(68476),F=t(84682),W="admin",Y="user",U=[{label:"users.form.admin",value:W},{label:"users.form.user",value:Y}],G=t(11527),V=function(e){var n=e.title,t=e.action,r=e.open,o=e.onOk,a=e.data,s=e.onCancel,l=q.Z.useForm(),c=u()(l,1)[0],d=(0,j.useIntl)(),f=function(){c.submit()};return(0,z.useEffect)((function(){t===p.Kd.EDIT&&r?c.setFieldsValue(i()(i()({},a),{},{is_admin:null!=a&&a.is_admin?W:Y})):t===p.Kd.CREATE&&r&&c.setFieldsValue({is_admin:Y})}),[r]),(0,G.jsx)(_.Z,{title:n,open:r,centered:!0,onOk:f,onCancel:s,destroyOnClose:!0,closeIcon:!1,maskClosable:!1,keyboard:!1,width:600,styles:{},footer:(0,G.jsx)(N.Z,{onOk:f,onCancel:s}),children:(0,G.jsxs)(q.Z,{name:"addUserForm",form:c,onFinish:o,preserve:!1,children:[(0,G.jsx)(q.Z.Item,{name:"username",rules:[{required:!0,message:d.formatMessage({id:"common.form.rule.input"},{name:d.formatMessage({id:"common.table.name"})})}],children:(0,G.jsx)(K.Z.Input,{label:d.formatMessage({id:"common.table.name"}),required:!0})}),(0,G.jsx)(q.Z.Item,{name:"full_name",rules:[{required:!1}],children:(0,G.jsx)(K.Z.Input,{trim:!1,label:d.formatMessage({id:"users.form.fullname"})})}),(0,G.jsx)(q.Z.Item,{name:"is_admin",rules:[{required:!1}],children:(0,G.jsx)(B.Z,{label:d.formatMessage({id:"users.table.role"}),children:U.map((function(e){return(0,G.jsxs)(F.default.Option,{value:e.value,children:[e.value===W?(0,G.jsx)(D.Z,{className:"size-16"}):(0,G.jsx)(H.Z,{className:"size-16"}),(0,G.jsx)("span",{className:"m-l-5",children:d.formatMessage({id:e.label})})]},e.value)}))})}),(0,G.jsx)(q.Z.Item,{name:"password",rules:[{required:t===p.Kd.CREATE,pattern:p.tb,message:d.formatMessage({id:"users.form.rule.password"})}],children:(0,G.jsx)(K.Z.Password,{label:d.formatMessage({id:"common.form.password"}),required:t===p.Kd.CREATE})})]})})},X=C.Z.Column,J=[{key:"edit",label:"common.button.edit",icon:(0,G.jsx)(y.Z,{})},{key:"delete",props:{danger:!0},label:"common.button.delete",icon:(0,G.jsx)(b.Z,{})}],Q=function(){var e,n,t=(0,x.Z)({fetchAPI:O.YX,deleteAPI:O.h8,contentForDelete:"users.table.user"}),r=t.dataSource,a=t.rowSelection,s=t.queryParams,c=t.sortOrder,y=t.modalRef,L=t.handleDelete,N=t.handleDeleteBatch,_=t.fetchData,K=t.handlePageChange,B=t.handleTableChange,D=t.handleSearch,H=t.handleNameChange,q=(0,j.useIntl)(),F=(0,z.useState)(!1),W=u()(F,2),Y=W[0],U=W[1],Q=(0,z.useState)(p.Kd.CREATE),$=u()(Q,2),ee=$[0],ne=$[1],te=(0,z.useState)(""),re=u()(te,2),oe=re[0],ae=re[1],ie=(0,z.useState)(void 0),se=u()(ie,2),le=se[0],ce=se[1],ue=function(){U(!0),ne(p.Kd.CREATE),ae(q.formatMessage({id:"users.form.create"}))},de=function(){var e=l()(o()().mark((function e(n){var t;return o()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=i()(i()(i()({},le),n),{},{is_admin:"admin"===n.is_admin}),e.prev=1,ee!==p.Kd.EDIT){e.next=7;break}return e.next=5,(0,O.Nq)({data:i()(i()({},t),{},{id:null==le?void 0:le.id})});case 5:e.next=9;break;case 7:return e.next=9,(0,O.r4)({data:t});case 9:_(),U(!1),E.ZP.success(q.formatMessage({id:"common.message.success"})),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(1),U(!1);case 17:case"end":return e.stop()}}),e,null,[[1,14]])})));return function(n){return e.apply(this,arguments)}}(),fe=function(e,n){"edit"===e?function(e){ce(e),U(!0),ne(p.Kd.EDIT),ae(q.formatMessage({id:"users.form.edit"}))}(n):"delete"===e&&L(i()(i()({},n),{},{name:n.username}))};return(0,A.y1)(g.ZP.CREATE,(function(){ue()}),{enabled:!Y}),(0,G.jsxs)(G.Fragment,{children:[(0,G.jsxs)(Z._z,{ghost:!0,header:{title:q.formatMessage({id:"users.title"}),style:{paddingInline:"var(--layout-content-header-inlinepadding)"},breadcrumb:{}},extra:[],children:[(0,G.jsx)(v.Z,{marginBottom:22,left:(0,G.jsxs)(S.Z,{children:[(0,G.jsx)(T.Z,{placeholder:q.formatMessage({id:"common.filter.name"}),style:{width:300},allowClear:!0,onChange:H}),(0,G.jsx)(R.ZP,{type:"text",style:{color:"var(--ant-color-text-tertiary)"},onClick:D,icon:(0,G.jsx)(w.Z,{})})]}),right:(0,G.jsxs)(S.Z,{size:20,children:[(0,G.jsx)(R.ZP,{icon:(0,G.jsx)(k.Z,{}),type:"primary",onClick:ue,children:q.formatMessage({id:"users.button.create"})}),(0,G.jsx)(R.ZP,{icon:(0,G.jsx)(b.Z,{}),danger:!0,onClick:N,disabled:!a.selectedRowKeys.length,children:(0,G.jsxs)("span",{children:[null==q||null===(e=q.formatMessage)||void 0===e?void 0:e.call(q,{id:"common.button.delete"}),a.selectedRowKeys.length>0&&(0,G.jsxs)("span",{children:["(",null===(n=a.selectedRowKeys)||void 0===n?void 0:n.length,")"]})]})})]})}),(0,G.jsx)(P.ZP,{renderEmpty:function(e){if("Table"===e)return r.loading||!r.loadend||r.dataList.length?(0,G.jsx)("div",{}):(0,G.jsx)(M.Z,{image:M.Z.PRESENTED_IMAGE_SIMPLE})},children:(0,G.jsxs)(C.Z,{dataSource:r.dataList,rowSelection:a,loading:r.loading,rowKey:"id",onChange:B,pagination:{showSizeChanger:!0,pageSize:s.perPage,current:s.page,total:r.total,hideOnSinglePage:10===s.perPage,onChange:K},children:[(0,G.jsx)(X,{title:q.formatMessage({id:"common.table.name"}),dataIndex:"username",ellipsis:{showTitle:!1},render:function(e,n){return(0,G.jsx)(d.Z,{ghost:!0,minWidth:20,children:e})}},"name"),(0,G.jsx)(X,{title:q.formatMessage({id:"users.table.role"}),dataIndex:"role",ellipsis:{showTitle:!1},render:function(e,n){return n.is_admin?(0,G.jsxs)(d.Z,{ghost:!0,minWidth:50,children:[(0,G.jsx)(h.Z,{type:"icon-admin-user",className:"size-16"}),(0,G.jsx)("span",{className:"m-l-5",children:q.formatMessage({id:"users.form.admin"})})]}):(0,G.jsxs)(d.Z,{ghost:!0,minWidth:50,children:[(0,G.jsx)(h.Z,{type:"icon-user",className:"size-16"}),(0,G.jsx)("span",{className:"m-l-5",children:q.formatMessage({id:"users.form.user"})})]})}},"role"),(0,G.jsx)(X,{title:q.formatMessage({id:"users.form.fullname"}),dataIndex:"full_name",ellipsis:{showTitle:!1},render:function(e,n){return(0,G.jsx)(d.Z,{ghost:!0,minWidth:20,children:e})}},"full_name"),(0,G.jsx)(X,{title:q.formatMessage({id:"users.form.source"}),dataIndex:"source",ellipsis:{showTitle:!1},render:function(e,n){return(0,G.jsx)(d.Z,{ghost:!0,minWidth:20,children:e})}},"source"),(0,G.jsx)(X,{title:q.formatMessage({id:"common.table.createTime"}),dataIndex:"created_at",defaultSortOrder:"descend",sortOrder:c,showSorterTooltip:!1,sorter:!1,ellipsis:{showTitle:!1},render:function(e,n){return(0,G.jsx)(d.Z,{ghost:!0,minWidth:20,children:I()(e).format("YYYY-MM-DD HH:mm:ss")})}},"createTime"),(0,G.jsx)(X,{title:q.formatMessage({id:"common.table.operation"}),ellipsis:{showTitle:!1},render:function(e,n){return(0,G.jsx)(m.Z,{items:J,onSelect:function(e){return fe(e,n)}})}},"operation")]})})]}),(0,G.jsx)(V,{open:Y,action:ee,title:oe,data:le,onCancel:function(){U(!1)},onOk:de}),(0,G.jsx)(f.Z,{ref:y})]})}},94299:function(e,n,t){t.d(n,{y1:function(){return w}});var r=t(50959);t(11527);function o(){return o=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},o.apply(this,arguments)}var a=["shift","alt","meta","mod","ctrl"],i={esc:"escape",return:"enter",".":"period",",":"comma","-":"slash"," ":"space","`":"backquote","#":"backslash","+":"bracketright",ShiftLeft:"shift",ShiftRight:"shift",AltLeft:"alt",AltRight:"alt",MetaLeft:"meta",MetaRight:"meta",OSLeft:"meta",OSRight:"meta",ControlLeft:"ctrl",ControlRight:"ctrl"};function s(e){return(i[e]||e).trim().toLowerCase().replace(/key|digit|numpad|arrow/,"")}function l(e,n){return void 0===n&&(n=","),e.split(n)}function c(e,n,t){void 0===n&&(n="+");var r=e.toLocaleLowerCase().split(n).map((function(e){return s(e)}));return o({},{alt:r.includes("alt"),ctrl:r.includes("ctrl")||r.includes("control"),shift:r.includes("shift"),meta:r.includes("meta"),mod:r.includes("mod")},{keys:r.filter((function(e){return!a.includes(e)})),description:t})}"undefined"!=typeof document&&(document.addEventListener("keydown",(function(e){void 0!==e.key&&f([s(e.key),s(e.code)])})),document.addEventListener("keyup",(function(e){void 0!==e.key&&m([s(e.key),s(e.code)])}))),"undefined"!=typeof window&&window.addEventListener("blur",(function(){u.clear()}));var u=new Set;function d(e){return Array.isArray(e)}function f(e){var n=Array.isArray(e)?e:[e];u.has("meta")&&u.forEach((function(e){return!function(e){return a.includes(e)}(e)&&u.delete(e.toLowerCase())})),n.forEach((function(e){return u.add(e.toLowerCase())}))}function m(e){var n=Array.isArray(e)?e:[e];"meta"===e?u.clear():n.forEach((function(e){return u.delete(e.toLowerCase())}))}function h(e,n){var t=e.target;void 0===n&&(n=!1);var r=t&&t.tagName;return d(n)?Boolean(r&&n&&n.some((function(e){return e.toLowerCase()===r.toLowerCase()}))):Boolean(r&&n&&!0===n)}var v=function(e,n,t){void 0===t&&(t=!1);var r,o,a=n.alt,i=n.meta,l=n.mod,c=n.shift,f=n.ctrl,m=n.keys,h=e.key,v=e.code,p=e.ctrlKey,g=e.metaKey,x=e.shiftKey,y=e.altKey,b=s(v),w=h.toLowerCase();if(!(null!=m&&m.includes(b)||null!=m&&m.includes(w)||["ctrl","control","unknown","meta","alt","shift","os"].includes(b)))return!1;if(!t){if(a===!y&&"alt"!==w)return!1;if(c===!x&&"shift"!==w)return!1;if(l){if(!g&&!p)return!1}else{if(i===!g&&"meta"!==w&&"os"!==w)return!1;if(f===!p&&"ctrl"!==w&&"control"!==w)return!1}}return!(!m||1!==m.length||!m.includes(w)&&!m.includes(b))||(m?(void 0===o&&(o=","),(d(r=m)?r:r.split(o)).every((function(e){return u.has(e.trim().toLowerCase())}))):!m)},p=(0,r.createContext)(void 0);function g(e,n){return e&&n&&"object"==typeof e&&"object"==typeof n?Object.keys(e).length===Object.keys(n).length&&Object.keys(e).reduce((function(t,r){return t&&g(e[r],n[r])}),!0):e===n}var x=(0,r.createContext)({hotkeys:[],enabledScopes:[],toggleScope:function(){},enableScope:function(){},disableScope:function(){}});var y=function(e){e.stopPropagation(),e.preventDefault(),e.stopImmediatePropagation()},b="undefined"!=typeof window?r.useLayoutEffect:r.useEffect;function w(e,n,t,o){var a=(0,r.useRef)(null),i=(0,r.useRef)(!1),u=t instanceof Array?o instanceof Array?void 0:o:t,w=d(e)?e.join(null==u?void 0:u.splitKey):e,k=t instanceof Array?t:o instanceof Array?o:void 0,Z=(0,r.useCallback)(n,null!=k?k:[]),j=(0,r.useRef)(Z);j.current=k?Z:n;var C=function(e){var n=(0,r.useRef)(void 0);return g(n.current,e)||(n.current=e),n.current}(u),E=(0,r.useContext)(x).enabledScopes,M=(0,r.useContext)(p);return b((function(){if(!1!==(null==C?void 0:C.enabled)&&(e=E,n=null==C?void 0:C.scopes,0===e.length&&n||!n||e.some((function(e){return n.includes(e)}))||e.includes("*"))){var e,n,t=function(e,n){var t;if(void 0===n&&(n=!1),!h(e,["input","textarea","select"])||h(e,null==C?void 0:C.enableOnFormTags)){if(null!==a.current){var r=a.current.getRootNode();if((r instanceof Document||r instanceof ShadowRoot)&&r.activeElement!==a.current&&!a.current.contains(r.activeElement))return void y(e)}(null==(t=e.target)||!t.isContentEditable||null!=C&&C.enableOnContentEditable)&&l(w,null==C?void 0:C.splitKey).forEach((function(t){var r,o=c(t,null==C?void 0:C.combinationKey);if(v(e,o,null==C?void 0:C.ignoreModifiers)||null!=(r=o.keys)&&r.includes("*")){if(null!=C&&null!=C.ignoreEventWhen&&C.ignoreEventWhen(e))return;if(n&&i.current)return;if(function(e,n,t){("function"==typeof t&&t(e,n)||!0===t)&&e.preventDefault()}(e,o,null==C?void 0:C.preventDefault),!function(e,n,t){return"function"==typeof t?t(e,n):!0===t||void 0===t}(e,o,null==C?void 0:C.enabled))return void y(e);j.current(e,o),n||(i.current=!0)}}))}},r=function(e){void 0!==e.key&&(f(s(e.code)),(void 0===(null==C?void 0:C.keydown)&&!0!==(null==C?void 0:C.keyup)||null!=C&&C.keydown)&&t(e))},o=function(e){void 0!==e.key&&(m(s(e.code)),i.current=!1,null!=C&&C.keyup&&t(e,!0))},d=a.current||(null==u?void 0:u.document)||document;return d.addEventListener("keyup",o),d.addEventListener("keydown",r),M&&l(w,null==C?void 0:C.splitKey).forEach((function(e){return M.addHotkey(c(e,null==C?void 0:C.combinationKey,null==C?void 0:C.description))})),function(){d.removeEventListener("keyup",o),d.removeEventListener("keydown",r),M&&l(w,null==C?void 0:C.splitKey).forEach((function(e){return M.removeHotkey(c(e,null==C?void 0:C.combinationKey,null==C?void 0:C.description))}))}}}),[w,C,E]),a}}}]);