"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[4674],{26268:function(e,n,t){t.d(n,{Z:function(){return c}});var r=t(35453),o=t(50959),i={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M832 64H296c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h496v688c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8V96c0-17.7-14.3-32-32-32zM704 192H192c-17.7 0-32 14.3-32 32v530.7c0 8.5 3.4 16.6 9.4 22.6l173.3 173.3c2.2 2.2 4.7 4 7.4 5.5v1.9h4.2c3.5 1.3 7.2 2 11 2H704c17.7 0 32-14.3 32-32V224c0-17.7-14.3-32-32-32zM350 856.2L263.9 770H350v86.2zM664 888H414V746c0-22.1-17.9-40-40-40H232V264h432v624z"}}]},name:"copy",theme:"outlined"},a=t(52273),s=function(e,n){return o.createElement(a.Z,(0,r.Z)({},e,{ref:n,icon:i}))};var c=o.forwardRef(s)},63417:function(e,n,t){var r=t(26068),o=t.n(r),i=t(48305),a=t.n(i),s=t(5268),c=t(26268),l=t(38551),u=t(40174),d=t(23333),f=t(85885),m=t(99013),p=t.n(m),v=t(50959),h=t(11527);n.Z=function(e){var n=e.children,t=e.tips,r=e.text,i=e.disabled,m=e.type,y=void 0===m?"text":m,x=e.shape,g=void 0===x?"default":x,k=e.fontSize,b=void 0===k?"14px":k,j=e.style,w=e.btnStyle,Z=e.placement,C=e.size,M=void 0===C?"middle":C,S=(0,l.useIntl)(),E=(0,v.useState)(!1),T=a()(E,2),P=T[0],L=T[1],R=(0,v.useRef)(null),O=(0,v.useRef)(null),A=(0,v.useMemo)((function(){return P?S.formatMessage({id:"common.button.copied"}):null!=t?t:S.formatMessage({id:"common.button.copy"})}),[P,S,t]);return(0,v.useEffect)((function(){return R.current&&(O.current=new(p())(R.current),O.current.on("success",(function(){L(!0),setTimeout((function(){L(!1)}),3e3)})),O.current.on("error",(function(e){u.ZP.success(S.formatMessage({id:"common.copy.fail"})),e.clearSelection()}))),function(){var e;null===(e=O.current)||void 0===e||e.destroy()}}),[R]),(0,h.jsx)(d.Z,{title:A,placement:Z,children:(0,h.jsx)(f.ZP,{className:"copy-button",ref:R,type:y,shape:g,size:M,disabled:!!i,"data-clipboard-text":r,style:o()({},w),icon:P?(0,h.jsx)(s.Z,{style:{color:"var(--ant-color-success)",fontSize:b}}):(0,h.jsx)(c.Z,{style:o()({fontSize:b},j)}),children:n})})}},31863:function(e,n,t){var r,o,i,a=t(90228),s=t.n(a),c=t(87999),l=t.n(c),u=t(48305),d=t.n(u),f=t(53649),m=t.n(f),p=t(32246),v=t(72541),h=t(38551),y=t(40174),x=t(1956),g=t(90468),k=t(85885),b=t(83603),j=t(91663),w=t(50959),Z=t(97884),C=t(11527),M=(0,j.kc)((function(e){var n=e.css;return{"delete-modal-content":n(r||(r=m()(["\n    display: flex;\n    font-size: var(--font-size-middle);\n    .anticon {\n      font-size: 20px;\n      margin-right: 10px;\n      color: var(--ant-color-warning);\n    }\n    .title {\n      display: flex;\n      align-items: center;\n      font-weight: var(--font-weight-500);\n    }\n  "]))),content:n(o||(o=m()(["\n    padding-top: 15px;\n    padding-left: 30px;\n    color: var(--ant-color-text-secondary);\n    white-space: pre-line;\n    word-break: break-all;\n    span {\n      color: var(--ant-color-text);\n      display: flex;\n      margin-top: 8px;\n    }\n  "])))}})),S=Z.ZP.div(i||(i=m()(["\n  margin-top: 20px;\n  margin-left: 30px;\n  display: flex;\n  justify-content: flex-start;\n  align-items: center;\n  .check-text {\n    font-weight: 700;\n    color: var(--ant-color-warning);\n  }\n"]))),E=(0,w.forwardRef)((function(e,n){var t,r=(0,h.useIntl)(),o=M().styles,i=(0,p.Z)(),a=i.saveScrollHeight,c=i.restoreScrollHeight,u=(0,w.useState)(!1),f=d()(u,2),m=f[0],j=f[1],Z=(0,w.useState)({checked:!1}),E=d()(Z,2),T=E[0],P=E[1],L=(0,w.useState)({}),R=d()(L,2),O=R[0],A=R[1],I=function(e){var n;a(),A(e),P({checked:(null===(n=e.checkConfig)||void 0===n?void 0:n.defautlChecked)||!1}),j(!0)},z=function(){j(!1),c()},_=function(){var e;j(!1),null===(e=O.onCancel)||void 0===e||e.call(O),c()},K=function(){var e=l()(s()().mark((function e(){var n,t;return s()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,null===(n=O.onOk)||void 0===n?void 0:n.call(O);case 3:t=e.sent,Array.isArray(t)?t.every((function(e){return"fulfilled"===(null==e?void 0:e.status)}))&&y.ZP.success(r.formatMessage({id:"common.message.success"})):y.ZP.success(r.formatMessage({id:"common.message.success"})),e.next=10;break;case 8:e.prev=8,e.t0=e.catch(0);case 10:return e.prev=10,j(!1),c(),e.finish(10);case 14:case"end":return e.stop()}}),e,null,[[0,8,10,14]])})));return function(){return e.apply(this,arguments)}}();return(0,w.useImperativeHandle)(n,(function(){return{show:I,hide:z,configuration:T}})),(0,C.jsxs)(x.Z,{style:{top:"20%"},open:m,onOk:K,onCancel:_,destroyOnClose:!1,closeIcon:!1,maskClosable:!1,keyboard:!1,width:460,styles:{footer:{marginTop:"20px"}},footer:(0,C.jsxs)(g.Z,{size:20,children:[(0,C.jsx)(k.ZP,{onClick:_,size:"middle",children:O.cancelText?r.formatMessage({id:O.cancelText}):r.formatMessage({id:"common.button.cancel"})}),(0,C.jsx)(k.ZP,{type:"primary",onClick:K,size:"middle",children:O.okText?r.formatMessage({id:O.okText}):r.formatMessage({id:"common.button.delete"})})]}),children:[(0,C.jsx)("div",{className:o["delete-modal-content"],children:(0,C.jsxs)("span",{className:"title",children:[(0,C.jsx)(v.Z,{}),(0,C.jsx)("span",{children:O.title?r.formatMessage({id:O.title}):r.formatMessage({id:"common.title.delete.confirm"})})]})}),(0,C.jsx)("div",{className:o.content,dangerouslySetInnerHTML:{__html:O.content?r.formatMessage({id:O.operation||""},{type:r.formatMessage({id:O.content}),name:O.name}):""}}),O.checkConfig&&(0,C.jsx)(S,{children:(0,C.jsx)(b.Z,{checked:T.checked,onChange:function(e){return P({checked:e.target.checked})},children:(0,C.jsx)("span",{className:"check-text",children:r.formatMessage({id:null===(t=O.checkConfig)||void 0===t?void 0:t.checkText})})})})]})}));n.Z=E},67768:function(e,n,t){var r,o=t(26068),i=t.n(o),a=t(53649),s=t.n(a),c=t(38551),l=t(90468),u=t(85885),d=(t(50959),t(97884)),f=t(11527),m=d.ZP.div(r||(r=s()(["\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  gap: 20px;\n"])));n.Z=function(e){var n=e.onOk,t=e.onCancel,r=e.cancelText,o=e.okText,a=e.okBtnProps,s=e.cancelBtnProps,d=e.loading,p=e.htmlType,v=void 0===p?"button":p,h=e.style,y=e.showOkBtn,x=void 0===y||y,g=e.description,k=e.extra,b=e.showCancelBtn,j=void 0===b||b,w=(e.form,(0,c.useIntl)());return(0,f.jsxs)(m,{children:[(0,f.jsx)("div",{children:g}),(0,f.jsxs)(l.Z,{size:20,style:i()({},h),children:[j&&(0,f.jsx)(u.ZP,i()(i()({onClick:t,style:{width:"88px"}},s),{},{children:r||w.formatMessage({id:"common.button.cancel"})})),k,x&&(0,f.jsx)(u.ZP,i()(i()({type:"primary",onClick:n,style:{width:"88px"},loading:d,htmlType:v},a),{},{children:o||w.formatMessage({id:"common.button.save"})}))]})]})}},98817:function(e,n,t){var r=t(26068),o=t.n(r),i=t(32246),a=t(1956),s=t(50959),c=t(11527);n.Z=function(e){var n=(0,i.Z)(),t=n.saveScrollHeight,r=n.restoreScrollHeight;return s.useEffect((function(){e.open?t():r()}),[e.open]),(0,c.jsx)(a.Z,o()({},e))}},32246:function(e,n,t){t.d(n,{Z:function(){return o}});var r=t(50959);function o(){var e=r.useRef(0),n=r.useRef({}),t=r.useRef(null),o=r.useRef(null),i=r.useRef(null),a=function(){var e;t.current=null===(e=window.__GPUSTACK_BODY_SCROLLER__)||void 0===e||null===(e=e.elements())||void 0===e?void 0:e.scrollEventElement,o.current=window.__GPUSTACK_BODY_SCROLLER__},s=r.useCallback((function(){var r,i,s,c;t.current||a(),n.current=null===(r=o.current)||void 0===r?void 0:r.state();var l=null===(i=n.current)||void 0===i||null===(i=i.overflowAmount)||void 0===i?void 0:i.y;e.current=l,null===(s=o.current)||void 0===s||null===(c=s.options)||void 0===c||c.call(s,{overflow:{x:"hidden",y:"visible"}})}),[]),c=r.useCallback((function(){i.current&&clearTimeout(i.current),i.current=setTimeout((function(){var e,n;null===(e=o.current)||void 0===e||null===(n=e.options)||void 0===n||n.call(e,{overflow:{x:"hidden",y:"scroll"}})}),500)}),[]);return r.useEffect((function(){return a(),function(){t.current=null,o.current=null}}),[]),{saveScrollHeight:s,restoreScrollHeight:c}}},80327:function(e,n,t){t.r(n),t.d(n,{default:function(){return Q}});var r=t(90228),o=t.n(r),i=t(87999),a=t.n(i),s=t(48305),c=t.n(s),l=t(8445),u=t(31863),d=t(62722),f=t(20369),m=t(82344),p=t(44336),v=t(56838),h=t(19019),y=t(69070),x=t(67581),g=t(38551),k=t(29687),b=t(23010),j=t(90468),w=t(8267),Z=t(85885),C=t(82930),M=t(23333),S=t(7672),E=t.n(S),T=t(50959),P=t(94299),L="/api-keys";function R(e){return O.apply(this,arguments)}function O(){return(O=a()(o()().mark((function e(n){return o()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,g.request)("".concat(L),{method:"GET",params:n}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function A(e){return I.apply(this,arguments)}function I(){return(I=a()(o()().mark((function e(n){return o()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,g.request)("".concat(L),{method:"POST",data:n.data}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function z(e){return _.apply(this,arguments)}function _(){return(_=a()(o()().mark((function e(n){return o()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,g.request)("".concat(L,"/").concat(n),{method:"DELETE"}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var K=t(26068),H=t.n(K),D=t(63417),B=t(67768),q=t(98817),Y=t(39139),N=t(55825),F=t(68476),V=t(76808),G=[{label:"apikeys.form.expiration.7days",type:"day",value:7,locale:!0},{label:"apikeys.form.expiration.1month",type:"month",value:1,locale:!0},{label:"apikeys.form.expiration.6months",type:"month",value:6,locale:!0},{label:"apikeys.form.expiration.never",type:"never",value:-1,locale:!0}],W=t(11527),U=function(e){var n=e.title,t=e.action,r=e.open,i=e.onOk,s=e.onCancel,l=F.Z.useForm(),u=c()(l,1)[0],d=(0,g.useIntl)(),m=(0,T.useState)(!1),p=c()(m,2),v=p[0],h=p[1],y=(0,T.useState)(""),x=c()(y,2),k=x[0],b=x[1],j=(0,T.useState)(!1),w=c()(j,2),C=w[0],M=w[1];(0,T.useEffect)((function(){t===f.Kd.CREATE&&r&&u.setFieldsValue({expires_in:1})}),[r]);var S=function(e){var n=e;if(-1===n)return 0;var t=G.find((function(e){return n===e.value})),r=E()().add(null==t?void 0:t.value,"".concat(null==t?void 0:t.type)),o=E()();return r.diff(o,"second")},P=function(){var e=a()(o()().mark((function e(n){var t,r;return o()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,M(!0),t=H()(H()({},n),{},{expires_in:S(n.expires_in)}),e.next=5,A({data:t});case 5:r=e.sent,b(r.value),h(!0),M(!1),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),M(!1);case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(n){return e.apply(this,arguments)}}(),L=function(){u.submit()};return(0,W.jsx)(q.Z,{title:v?d.formatMessage({id:"apikeys.title.save"}):n,open:r,centered:!0,onOk:L,onCancel:s,afterOpenChange:function(e){h(!1)},destroyOnClose:!0,closeIcon:!1,maskClosable:!1,keyboard:!1,width:600,styles:{},footer:v?(0,W.jsx)(Z.ZP,{type:"primary",onClick:function(){i()},children:d.formatMessage({id:"common.button.done"})}):(0,W.jsx)(B.Z,{onOk:L,onCancel:s,loading:C}),children:(0,W.jsx)(F.Z,{name:"addAPIKey",form:u,onFinish:P,preserve:!1,children:v?(0,W.jsxs)(F.Z.Item,{children:[(0,W.jsx)("div",{children:(0,W.jsx)(V.Z,{bordered:!1,color:"error",style:{padding:"6px 8px",marginBottom:16},children:d.formatMessage({id:"apikeys.table.save.tips"})})}),(0,W.jsx)(Y.Z.Input,{label:d.formatMessage({id:"apikeys.form.apikey"}),value:k,addAfter:(0,W.jsx)(D.Z,{text:k,shape:"default",size:"middle",type:"text"})})]}):(0,W.jsxs)(W.Fragment,{children:[(0,W.jsx)(F.Z.Item,{name:"name",rules:[{required:!0,message:d.formatMessage({id:"common.form.rule.input"},{name:d.formatMessage({id:"common.table.name"})})}],children:(0,W.jsx)(Y.Z.Input,{label:d.formatMessage({id:"common.table.name"}),required:!0})}),(0,W.jsx)(F.Z.Item,{name:"expires_in",rules:[{required:!0,message:d.formatMessage({id:"common.form.rule.select"},{name:d.formatMessage({id:"apikeys.form.expiretime"})})}],children:(0,W.jsx)(N.Z,{options:G,label:d.formatMessage({id:"apikeys.form.expiretime"}),required:!0})}),(0,W.jsx)(F.Z.Item,{name:"description",rules:[{required:!1}],children:(0,W.jsx)(Y.Z.TextArea,{label:d.formatMessage({id:"common.table.description"})})})]})})})},J=k.Z.Column,Q=function(){var e,n,t=(0,p.Z)({fetchAPI:R,deleteAPI:z,contentForDelete:"apikeys.table.apikeys"}),r=t.dataSource,i=t.rowSelection,s=t.queryParams,S=t.sortOrder,L=t.modalRef,O=t.handleDelete,A=t.handleDeleteBatch,I=t.fetchData,_=t.handlePageChange,K=t.handleTableChange,H=t.handleSearch,D=t.handleNameChange,B=(0,g.useIntl)(),q=(0,T.useState)(!1),Y=c()(q,2),N=Y[0],F=Y[1],V=(0,T.useState)(f.Kd.CREATE),G=c()(V,2),Q=G[0],X=G[1],$=function(){F(!0),X(f.Kd.CREATE)},ee=function(){var e=a()(o()().mark((function e(){return o()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,I();case 3:F(!1),e.next=8;break;case 6:e.prev=6,e.t0=e.catch(0);case 8:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(){return e.apply(this,arguments)}}();return(0,P.y1)(m.ZP.CREATE,(function(){$()}),{enabled:!N}),(0,W.jsxs)(W.Fragment,{children:[(0,W.jsxs)(x._z,{ghost:!0,header:{title:B.formatMessage({id:"apikeys.title"}),style:{paddingInline:"var(--layout-content-header-inlinepadding)"},breadcrumb:{}},extra:[],children:[(0,W.jsx)(d.Z,{marginBottom:22,left:(0,W.jsxs)(j.Z,{children:[(0,W.jsx)(w.Z,{placeholder:B.formatMessage({id:"common.filter.name"}),style:{width:300},allowClear:!0,onChange:D}),(0,W.jsx)(Z.ZP,{type:"text",style:{color:"var(--ant-color-text-tertiary)"},onClick:H,icon:(0,W.jsx)(v.Z,{})})]}),right:(0,W.jsxs)(j.Z,{size:20,children:[(0,W.jsx)(Z.ZP,{icon:(0,W.jsx)(h.Z,{}),type:"primary",onClick:$,children:B.formatMessage({id:"apikeys.button.create"})}),(0,W.jsx)(Z.ZP,{icon:(0,W.jsx)(y.Z,{}),danger:!0,onClick:A,disabled:!i.selectedRowKeys.length,children:(0,W.jsxs)("span",{children:[null==B||null===(e=B.formatMessage)||void 0===e?void 0:e.call(B,{id:"common.button.delete"}),i.selectedRowKeys.length>0&&(0,W.jsxs)("span",{children:["(",null===(n=i.selectedRowKeys)||void 0===n?void 0:n.length,")"]})]})})]})}),(0,W.jsx)(C.ZP,{renderEmpty:function(e){if("Table"===e)return r.loading||!r.loadend||r.dataList.length?(0,W.jsx)("div",{}):(0,W.jsx)(b.Z,{image:b.Z.PRESENTED_IMAGE_SIMPLE})},children:(0,W.jsxs)(k.Z,{dataSource:r.dataList,rowSelection:i,loading:r.loading,rowKey:"id",onChange:K,pagination:{showSizeChanger:!0,pageSize:s.perPage,current:s.page,total:r.total,hideOnSinglePage:10===s.perPage,onChange:_},children:[(0,W.jsx)(J,{title:B.formatMessage({id:"common.table.name"}),dataIndex:"name",ellipsis:{showTitle:!1},render:function(e,n){return(0,W.jsx)(l.Z,{ghost:!0,style:{maxWidth:400},children:e})}},"name"),(0,W.jsx)(J,{title:B.formatMessage({id:"apikeys.form.expiretime"}),dataIndex:"expires_at",ellipsis:{showTitle:!1},render:function(e,n){return(0,W.jsx)(l.Z,{ghost:!0,children:e?E()(e).format("YYYY-MM-DD HH:mm:ss"):B.formatMessage({id:"apikeys.form.expiration.never"})})}},"expiration"),(0,W.jsx)(J,{title:B.formatMessage({id:"common.table.description"}),dataIndex:"description",ellipsis:{showTitle:!1},render:function(e,n){return(0,W.jsx)(l.Z,{ghost:!0,children:e})}},"description"),(0,W.jsx)(J,{title:B.formatMessage({id:"common.table.createTime"}),dataIndex:"created_at",defaultSortOrder:"descend",sortOrder:S,showSorterTooltip:!1,sorter:!1,ellipsis:{showTitle:!1},render:function(e,n){return(0,W.jsx)(l.Z,{ghost:!0,children:E()(e).format("YYYY-MM-DD HH:mm:ss")})}},"createTime"),(0,W.jsx)(J,{title:B.formatMessage({id:"common.table.operation"}),ellipsis:{showTitle:!1},render:function(e,n){return(0,W.jsx)(j.Z,{size:20,children:(0,W.jsx)(M.Z,{title:B.formatMessage({id:"common.button.delete"}),children:(0,W.jsx)(Z.ZP,{onClick:function(){return O(n)},size:"small",danger:!0,icon:(0,W.jsx)(y.Z,{})})})})}},"operation")]})})]}),(0,W.jsx)(U,{open:N,action:Q,title:B.formatMessage({id:"apikeys.button.create"}),onCancel:function(){F(!1)},onOk:ee}),(0,W.jsx)(u.Z,{ref:L})]})}},94299:function(e,n,t){t.d(n,{y1:function(){return b}});var r=t(50959);t(11527);function o(){return o=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},o.apply(this,arguments)}var i=["shift","alt","meta","mod","ctrl"],a={esc:"escape",return:"enter",".":"period",",":"comma","-":"slash"," ":"space","`":"backquote","#":"backslash","+":"bracketright",ShiftLeft:"shift",ShiftRight:"shift",AltLeft:"alt",AltRight:"alt",MetaLeft:"meta",MetaRight:"meta",OSLeft:"meta",OSRight:"meta",ControlLeft:"ctrl",ControlRight:"ctrl"};function s(e){return(a[e]||e).trim().toLowerCase().replace(/key|digit|numpad|arrow/,"")}function c(e,n){return void 0===n&&(n=","),e.split(n)}function l(e,n,t){void 0===n&&(n="+");var r=e.toLocaleLowerCase().split(n).map((function(e){return s(e)}));return o({},{alt:r.includes("alt"),ctrl:r.includes("ctrl")||r.includes("control"),shift:r.includes("shift"),meta:r.includes("meta"),mod:r.includes("mod")},{keys:r.filter((function(e){return!i.includes(e)})),description:t})}"undefined"!=typeof document&&(document.addEventListener("keydown",(function(e){void 0!==e.key&&f([s(e.key),s(e.code)])})),document.addEventListener("keyup",(function(e){void 0!==e.key&&m([s(e.key),s(e.code)])}))),"undefined"!=typeof window&&window.addEventListener("blur",(function(){u.clear()}));var u=new Set;function d(e){return Array.isArray(e)}function f(e){var n=Array.isArray(e)?e:[e];u.has("meta")&&u.forEach((function(e){return!function(e){return i.includes(e)}(e)&&u.delete(e.toLowerCase())})),n.forEach((function(e){return u.add(e.toLowerCase())}))}function m(e){var n=Array.isArray(e)?e:[e];"meta"===e?u.clear():n.forEach((function(e){return u.delete(e.toLowerCase())}))}function p(e,n){var t=e.target;void 0===n&&(n=!1);var r=t&&t.tagName;return d(n)?Boolean(r&&n&&n.some((function(e){return e.toLowerCase()===r.toLowerCase()}))):Boolean(r&&n&&!0===n)}var v=function(e,n,t){void 0===t&&(t=!1);var r,o,i=n.alt,a=n.meta,c=n.mod,l=n.shift,f=n.ctrl,m=n.keys,p=e.key,v=e.code,h=e.ctrlKey,y=e.metaKey,x=e.shiftKey,g=e.altKey,k=s(v),b=p.toLowerCase();if(!(null!=m&&m.includes(k)||null!=m&&m.includes(b)||["ctrl","control","unknown","meta","alt","shift","os"].includes(k)))return!1;if(!t){if(i===!g&&"alt"!==b)return!1;if(l===!x&&"shift"!==b)return!1;if(c){if(!y&&!h)return!1}else{if(a===!y&&"meta"!==b&&"os"!==b)return!1;if(f===!h&&"ctrl"!==b&&"control"!==b)return!1}}return!(!m||1!==m.length||!m.includes(b)&&!m.includes(k))||(m?(void 0===o&&(o=","),(d(r=m)?r:r.split(o)).every((function(e){return u.has(e.trim().toLowerCase())}))):!m)},h=(0,r.createContext)(void 0);function y(e,n){return e&&n&&"object"==typeof e&&"object"==typeof n?Object.keys(e).length===Object.keys(n).length&&Object.keys(e).reduce((function(t,r){return t&&y(e[r],n[r])}),!0):e===n}var x=(0,r.createContext)({hotkeys:[],enabledScopes:[],toggleScope:function(){},enableScope:function(){},disableScope:function(){}});var g=function(e){e.stopPropagation(),e.preventDefault(),e.stopImmediatePropagation()},k="undefined"!=typeof window?r.useLayoutEffect:r.useEffect;function b(e,n,t,o){var i=(0,r.useRef)(null),a=(0,r.useRef)(!1),u=t instanceof Array?o instanceof Array?void 0:o:t,b=d(e)?e.join(null==u?void 0:u.splitKey):e,j=t instanceof Array?t:o instanceof Array?o:void 0,w=(0,r.useCallback)(n,null!=j?j:[]),Z=(0,r.useRef)(w);Z.current=j?w:n;var C=function(e){var n=(0,r.useRef)(void 0);return y(n.current,e)||(n.current=e),n.current}(u),M=(0,r.useContext)(x).enabledScopes,S=(0,r.useContext)(h);return k((function(){if(!1!==(null==C?void 0:C.enabled)&&(e=M,n=null==C?void 0:C.scopes,0===e.length&&n||!n||e.some((function(e){return n.includes(e)}))||e.includes("*"))){var e,n,t=function(e,n){var t;if(void 0===n&&(n=!1),!p(e,["input","textarea","select"])||p(e,null==C?void 0:C.enableOnFormTags)){if(null!==i.current){var r=i.current.getRootNode();if((r instanceof Document||r instanceof ShadowRoot)&&r.activeElement!==i.current&&!i.current.contains(r.activeElement))return void g(e)}(null==(t=e.target)||!t.isContentEditable||null!=C&&C.enableOnContentEditable)&&c(b,null==C?void 0:C.splitKey).forEach((function(t){var r,o=l(t,null==C?void 0:C.combinationKey);if(v(e,o,null==C?void 0:C.ignoreModifiers)||null!=(r=o.keys)&&r.includes("*")){if(null!=C&&null!=C.ignoreEventWhen&&C.ignoreEventWhen(e))return;if(n&&a.current)return;if(function(e,n,t){("function"==typeof t&&t(e,n)||!0===t)&&e.preventDefault()}(e,o,null==C?void 0:C.preventDefault),!function(e,n,t){return"function"==typeof t?t(e,n):!0===t||void 0===t}(e,o,null==C?void 0:C.enabled))return void g(e);Z.current(e,o),n||(a.current=!0)}}))}},r=function(e){void 0!==e.key&&(f(s(e.code)),(void 0===(null==C?void 0:C.keydown)&&!0!==(null==C?void 0:C.keyup)||null!=C&&C.keydown)&&t(e))},o=function(e){void 0!==e.key&&(m(s(e.code)),a.current=!1,null!=C&&C.keyup&&t(e,!0))},d=i.current||(null==u?void 0:u.document)||document;return d.addEventListener("keyup",o),d.addEventListener("keydown",r),S&&c(b,null==C?void 0:C.splitKey).forEach((function(e){return S.addHotkey(l(e,null==C?void 0:C.combinationKey,null==C?void 0:C.description))})),function(){d.removeEventListener("keyup",o),d.removeEventListener("keydown",r),S&&c(b,null==C?void 0:C.splitKey).forEach((function(e){return S.removeHotkey(l(e,null==C?void 0:C.combinationKey,null==C?void 0:C.description))}))}}}),[b,C,M]),i}}}]);