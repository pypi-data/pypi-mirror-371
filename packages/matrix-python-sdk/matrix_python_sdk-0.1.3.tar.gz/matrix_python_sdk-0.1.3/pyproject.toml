# =====================================================================
#  pyproject.toml — Matrix Python SDK
# =====================================================================

[build-system]
requires = ["setuptools>=68", "wheel"]
build-backend = "setuptools.build_meta"

[project]
name = "matrix-python-sdk"
version = "0.1.3"
description = "Python SDK for Matrix Hub — catalog search, entity detail, install, and remote management for agents, tools, and MCP servers."
readme = "README.md"
requires-python = ">=3.11,<3.13"

classifiers = [
  "Development Status :: 3 - Alpha",
  "Intended Audience :: Developers",
  "License :: OSI Approved :: Apache Software License",
  "Programming Language :: Python :: 3",
  "Programming Language :: Python :: 3 :: Only",
  "Programming Language :: Python :: 3.11",
  "Programming Language :: Python :: 3.12",
  "Typing :: Typed",
]
license = { text = "Apache-2.0" }
authors = [
    { name = "Agent Matrix", email = "dev@agent-matrix.example" }
]
# Core runtime dependencies
dependencies = [
    "httpx>=0.28,<0.29",
    "pydantic>=2.0,<3.0",
    "python-dotenv>=1.1,<2.0",
    "tomli>=2.0.1",
]

[project.urls]
Homepage = "https://github.com/agent-matrix/matrix-python-sdk"
Issues = "https://github.com/agent-matrix/matrix-python-sdk/issues"
Repository = "https://github.com/agent-matrix/matrix-python-sdk"
Documentation = "https://agent-matrix.github.io/matrix-python-sdk/"

[tool.setuptools]
# Tell setuptools to find packages under the current directory
packages = ["matrix_sdk"]
package-dir = { "" = "." }

[tool.ruff]
line-length = 100
target-version = "py311"

[tool.ruff.lint]
select = ["E", "F", "W", "I", "C90"] # example rule-sets; adjust as needed

# Optional extras for users
[project.optional-dependencies]
# CLI commands for bulk registration
cli = ["typer>=0.9,<0.10", "rich>=13.0,<14.0"]
# Development & testing
dev = [
    "pytest>=8.0,<9.0",
    "pytest-asyncio>=1.0,<2.0",
    "ruff>=0.12,<0.13",
    "black",
    "mypy",
    "build",
    "twine",
    "mkdocs",
    "pre-commit>=2.20,<3.0"
]

# CLI entry point (if you install with [cli] extras)
[project.scripts]
# -> makes `matrix-servers` available on PATH
matrix-servers = "matrix_sdk.cli.commands:app"

# =====================================================================
#  badges for README.md display (not used by setuptools but helpful in docs)
# =====================================================================
[badges]
pypi = { image = "https://img.shields.io/pypi/v/matrix-python-sdk.svg", url = "https://pypi.org/project/matrix-python-sdk/" }
python-versions = { image = "https://img.shields.io/pypi/pyversions/matrix-python-sdk.svg", url = "https://pypi.org/project/matrix-python-sdk/" }
ci = { image = "https://github.com/agent-matrix/matrix-python-sdk/actions/workflows/ci.yml/badge.svg", url = "https://github.com/agent-matrix/matrix-python-sdk/actions" }
license = { image = "https://img.shields.io/pypi/l/matrix-python-sdk.svg", url = "https://github.com/agent-matrix/matrix-python-sdk/blob/main/LICENSE" }

# Mypy configuration
[tool.mypy]
namespace_packages = true
explicit_package_bases = true

[[tool.mypy.overrides]]
module = [
    "tomli",
    "matrix_sdk.bulk.probe"
]
ignore_missing_imports = true
