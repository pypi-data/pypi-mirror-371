{
  "_template_info": {
    "name": "Homodyne Static Isotropic Mode Configuration",
    "version": "2.1",
    "description": "Specialized configuration for static isotropic scattering analysis",
    "based_on": "config_template.json - specialized for isotropic static mode",
    "usage": "Copy this template for isotropic static scattering experiments",
    "mode": "static_isotropic",
    "package_version": "0.6.3",
    "template_updated": "2024-08-19",
    "key_features": [
      "Static mode with no flow effects",
      "Isotropic scattering - no angle selection",
      "phi_angles_file not loaded - uses dummy angles",
      "Angle filtering automatically disabled",
      "Only diffusion parameters (D0, alpha, D_offset) are relevant",
      "Scaling optimization always enabled for proper chi-squared calculation"
    ],
    "_scaling_optimization_benefits_isotropic": {
      "overview": "Even in isotropic mode, scaling optimization (g\u2082 = offset + contrast \u00d7 g\u2081) is essential",
      "single_scaling": "One scaling relationship applies to all 'angles' (isotropic averaging)",
      "faster_computation": "Simpler geometry but same mathematical rigor for chi-squared",
      "robust_results": "Accounts for instrumental factors even in simplified isotropic case"
    },
    "_when_to_use_this_template": [
      "Sample shows no angular dependence in scattering",
      "No flow or rotation applied to sample",
      "Want fastest analysis with 3-parameter model",
      "Focus on diffusion dynamics only (D0, alpha, D_offset)",
      "Sample is liquid, powder, or isotropic solid"
    ]
  },
  "metadata": {
    "_comment": "Project metadata for static isotropic analysis",
    "config_version": "0.6.3",
    "description": "Static Isotropic Scattering Analysis - No flow, no angular dependence",
    "analysis_mode": "static_isotropic",
    "created_date": "YYYY-MM-DD",
    "updated_date": "YYYY-MM-DD",
    "authors": [
      "Your Name"
    ],
    "institution": "Your Institution",
    "experiment_name": "Static Isotropic Scattering Experiment",
    "sample_description": "Sample description for static measurement",
    "script_compatibility": "homodyne v0.6.3",
    "_cli_usage": {
      "description": "CLI usage for static isotropic analysis",
      "recommended_commands": [
        "homodyne-config --mode static_isotropic --sample SAMPLE_NAME",
        "homodyne --config config.json --static-isotropic --method classical",
        "homodyne --config config.json --static-isotropic --method all"
      ],
      "logging_options": {
        "verbose": "homodyne --config config.json --static-isotropic --verbose",
        "quiet": "homodyne --config config.json --static-isotropic --quiet",
        "note": "All logging modes save to output_dir/run.log for analysis tracking"
      },
      "performance_features": {
        "jit_warmup": "homodyne --config config.json --static-isotropic --performance-warmup",
        "memory_monitoring": "homodyne --config config.json --static-isotropic --monitor-memory",
        "adaptive_benchmarking": "Enable in config: performance_settings.numba_optimization.performance_monitoring.adaptive_benchmarking: true",
        "note": "Performance features provide 95%+ improvement in stability"
      }
    }
  },
  "experimental_data": {
    "_comment": "Data configuration for isotropic static mode",
    "description": "Data source configuration - phi_angles_file ignored in isotropic mode",
    "data_folder_path": "./data/SAMPLE_NAME/",
    "data_file_name": "your_data_file.hdf",
    "phi_angles_path": "./data/phi_angles/",
    "_phi_angles_path_note": "Path ignored in isotropic mode - dummy angles used instead",
    "phi_angles_file": "phi_list.txt",
    "_phi_angles_file_note": "File ignored in isotropic mode - single dummy angle used",
    "exchange_key": "exchange",
    "cache_file_path": "./data/SAMPLE_NAME/",
    "cache_filename_template": "cached_c2_isotropic_frames_{start_frame}_{end_frame}.npz",
    "cache_compression": true,
    "data_type": "float64",
    "file_format": "NPZ",
    "preprocessing": {
      "_comment": "Optimized for isotropic mode",
      "apply_diagonal_correction": true,
      "vectorized_correction": true,
      "cache_processed_data": true,
      "normalize_data": true,
      "normalization_method": "baseline"
    }
  },
  "analyzer_parameters": {
    "_comment": "Analysis parameters optimized for static isotropic mode",
    "temporal": {
      "dt": 0.1,
      "_dt_note": "Time step - same importance as other modes",
      "dt_unit": "seconds",
      "start_frame": 1001,
      "end_frame": 2000
    },
    "scattering": {
      "wavevector_q": 0.0054,
      "_wavevector_q_note": "q-vector magnitude - isotropic so angular averaging applied",
      "q_unit": "\u00c5\u207b\u00b9"
    },
    "geometry": {
      "_comment": "Geometry parameters - gap still relevant for potential future use",
      "stator_rotor_gap": 2000000,
      "gap_unit": "\u00c5",
      "_gap_note": "Gap parameter kept for consistency but not used in static mode"
    },
    "computational": {
      "num_threads": 8,
      "auto_detect_cores": true,
      "max_threads_limit": 16,
      "memory_limit_gb": 8
    }
  },
  "initial_parameters": {
    "_comment": "Initial parameters for static isotropic mode - only diffusion parameters matter",
    "description": "Only D0, alpha, D_offset are physically meaningful in static isotropic mode",
    "values": [
      1324.1,
      -0.014,
      -0.674361,
      0.0,
      0.0,
      0.0,
      0.0
    ],
    "_values_note": "Last 4 parameters (shear + phi0) automatically set to 0 in static mode",
    "parameter_names": [
      "D0",
      "alpha",
      "D_offset",
      "gamma_dot_t0",
      "beta",
      "gamma_dot_t_offset",
      "phi0"
    ],
    "units": [
      "\u00c5\u00b2/s",
      "dimensionless",
      "\u00c5\u00b2/s",
      "s\u207b\u00b9",
      "dimensionless",
      "s\u207b\u00b9",
      "degrees"
    ],
    "physical_meaning": {
      "D0": "Reference diffusion coefficient - PRIMARY PARAMETER",
      "alpha": "Power-law exponent for D(t) evolution - PRIMARY PARAMETER",
      "D_offset": "Baseline diffusion coefficient - PRIMARY PARAMETER",
      "gamma_dot_t0": "Ignored in static mode (automatically set to 0)",
      "beta": "Ignored in static mode (automatically set to 0)",
      "gamma_dot_t_offset": "Ignored in static mode (automatically set to 0)",
      "phi0": "Irrelevant in isotropic mode (automatically set to 0)"
    },
    "active_parameters": [
      "D0",
      "alpha",
      "D_offset"
    ],
    "_active_parameters_note": "Only these 3 parameters are optimized in static isotropic mode"
  },
  "optimization_config": {
    "_comment": "Optimization for static isotropic mode",
    "angle_filtering": {
      "_comment": "Angle filtering automatically disabled in isotropic mode",
      "enabled": false,
      "_enabled_note": "Automatically disabled in static isotropic mode regardless of setting",
      "target_ranges": [],
      "_target_ranges_note": "Empty - no angle filtering in isotropic mode",
      "fallback_to_all_angles": true,
      "_isotropic_mode_note": "Angle filtering is automatically disabled for static isotropic mode"
    },
    "classical_optimization": {
      "methods": [
        "Nelder-Mead"
      ],
      "method_options": {
        "Nelder-Mead": {
          "maxiter": 3000,
          "_maxiter_note": "Reduced iterations since only 3 parameters to optimize",
          "xatol": 1e-08,
          "fatol": 1e-08,
          "adaptive": true
        }
      }
    },
    "mcmc_sampling": {
      "enabled": true,
      "sampler": "NUTS",
      "draws": 8000,
      "_draws_note": "Fewer draws needed with only 3 parameters",
      "tune": 1000,
      "thin": 2,
      "_thin_note": "Moderate thinning for static mode (good convergence expected)",
      "chains": 4,
      "cores": 4,
      "target_accept": 0.95,
      "max_treedepth": 10,
      "return_inferencedata": true
    },
    "scaling_parameters": {
      "_comment": "Physical scaling constraints for c2 fitting",
      "fitted_range": {
        "min": 1.0,
        "max": 2.0,
        "_description": "c2_fitted = c2_theory * contrast + offset, must be in [1,2]"
      },
      "theory_range": {
        "min": 0.0,
        "max": 1.0,
        "_description": "c2_theory normalized correlation function, must be in [0,1]"
      },
      "contrast": {
        "min": 0.05,
        "max": 0.5,
        "prior_mu": 0.3,
        "prior_sigma": 0.1,
        "type": "TruncatedNormal",
        "_description": "Scaling factor for correlation strength, typically \u2208 (0, 0.5]"
      },
      "offset": {
        "min": 0.05,
        "max": 1.95,
        "prior_mu": 1.0,
        "prior_sigma": 0.2,
        "type": "TruncatedNormal",
        "_description": "Baseline correlation level, typically \u2208 (0, 2.0), \u03bc \u2248 1.0"
      }
    }
  },
  "parameter_space": {
    "_comment": "Parameter bounds - only first 3 are used in static isotropic mode",
    "bounds": [
      {
        "name": "D0",
        "min": 1.0,
        "max": 1000000.0,
        "type": "TruncatedNormal",
        "prior_mu": 10000.0,
        "prior_sigma": 1000.0,
        "unit": "\u00c5\u00b2/s",
        "physical_constraint": "positive",
        "_note": "PRIMARY PARAMETER - reference diffusion coefficient"
      },
      {
        "name": "alpha",
        "min": -2.0,
        "max": 2.0,
        "type": "Normal",
        "prior_mu": -1.5,
        "prior_sigma": 0.1,
        "unit": "dimensionless",
        "physical_constraint": "none",
        "_note": "PRIMARY PARAMETER - diffusion time dependence exponent"
      },
      {
        "name": "D_offset",
        "min": -100,
        "max": 100,
        "type": "Normal",
        "prior_mu": 0.0,
        "prior_sigma": 10.0,
        "unit": "\u00c5\u00b2/s",
        "physical_constraint": "none",
        "_note": "PRIMARY PARAMETER - baseline diffusion coefficient"
      },
      {
        "name": "gamma_dot_t0",
        "min": 0.0,
        "max": 0.0,
        "_bounds_note": "Fixed at 0 in static mode",
        "type": "fixed",
        "unit": "s\u207b\u00b9",
        "physical_constraint": "fixed_zero",
        "_reference_min": 1e-06,
        "_reference_max": 1.0,
        "_reference_type": "TruncatedNormal",
        "_reference_prior_mu": 0.001,
        "_reference_prior_sigma": 0.01
      },
      {
        "name": "beta",
        "min": 0.0,
        "max": 0.0,
        "_bounds_note": "Fixed at 0 in static mode",
        "type": "fixed",
        "unit": "dimensionless",
        "physical_constraint": "fixed_zero",
        "_reference_min": -2.0,
        "_reference_max": 2.0,
        "_reference_type": "Normal",
        "_reference_prior_mu": 0.0,
        "_reference_prior_sigma": 0.1
      },
      {
        "name": "gamma_dot_t_offset",
        "min": 0.0,
        "max": 0.0,
        "_bounds_note": "Fixed at 0 in static mode",
        "type": "fixed",
        "unit": "s\u207b\u00b9",
        "physical_constraint": "fixed_zero",
        "_reference_min": -0.01,
        "_reference_max": 0.01,
        "_reference_type": "Normal",
        "_reference_prior_mu": 0.0,
        "_reference_prior_sigma": 0.001
      },
      {
        "name": "phi0",
        "min": 0.0,
        "max": 0.0,
        "_bounds_note": "Fixed at 0 in static mode",
        "type": "fixed",
        "unit": "degrees",
        "physical_constraint": "fixed_zero",
        "_reference_min": -10,
        "_reference_max": 10,
        "_reference_type": "Normal",
        "_reference_prior_mu": 0.0,
        "_reference_prior_sigma": 5.0
      }
    ]
  },
  "analysis_settings": {
    "_comment": "Static isotropic mode configuration",
    "static_mode": true,
    "_static_mode_note": "REQUIRED: Must be true for static analysis",
    "static_submode": "isotropic",
    "_static_submode_note": "REQUIRED: Must be 'isotropic' for this template",
    "model_description": {
      "current_mode": "static_isotropic_case",
      "equation": "g\u2081(t\u2081,t\u2082) = exp(-q\u00b2 \u222b\u1d57\u00b2\u1d57\u00b9 D(t)dt), g\u2082(t\u2081,t\u2082) ~ [g\u2081(t\u2081,t\u2082)]\u00b2",
      "description": "Pure diffusion with no angular dependence",
      "key_features": [
        "No flow effects (\u03b3\u0307 = 0)",
        "No angular dependence (isotropic)",
        "Only diffusion dynamics D(t) = D\u2080(t/t\u2080)^\u03b1 + D_offset",
        "3 active parameters: D0, alpha, D_offset"
      ]
    }
  },
  "advanced_settings": {
    "data_loading": {
      "use_diagonal_correction": true,
      "vectorized_diagonal_fix": true
    },
    "chi_squared_calculation": {
      "method": "standard",
      "_scaling_optimization_note": "Scaling optimization is always enabled: g\u2082 = offset + contrast \u00d7 g\u2081. This is essential for proper chi-squared calculation regardless of mode or number of angles.",
      "_scaling_details": {
        "_purpose": "Performs least squares fitting to determine contrast and offset parameters",
        "_accounts_for": [
          "instrumental response",
          "background signals",
          "detector variations",
          "normalization differences"
        ],
        "_chi_squared_formula": "\u03c7\u00b2 = \u03a3(experimental - fitted)\u00b2/\u03c3\u00b2 where fitted = theory \u00d7 contrast + offset",
        "_implementation": "Uses numpy.linalg.lstsq to solve A\u00b7x = b where A = [theory, ones], x = [contrast, offset]",
        "_isotropic_mode_benefits": [
          "Single scaling relationship applied (no angular dependence)",
          "Faster computation due to simplified geometry",
          "Robust fitting with isotropic averaging",
          "Consistent results independent of sample orientation"
        ],
        "_typical_values_isotropic": {
          "contrast": "0.5-2.0 (narrower range due to isotropic averaging)",
          "offset": "0.01-0.05 (typically smaller due to reduced background anisotropy)"
        }
      },
      "uncertainty_estimation_factor": 0.1,
      "minimum_sigma": 1e-10,
      "fast_computation": true,
      "validity_check": {
        "check_positive_D0": true,
        "check_positive_gamma_dot_t0": false,
        "_check_positive_gamma_dot_t0_note": "Disabled - parameter fixed at 0",
        "check_positive_time_dependent": true,
        "check_parameter_bounds": true
      }
    }
  },
  "performance_settings": {
    "caching": {
      "enable_memory_cache": true,
      "enable_disk_cache": true,
      "cache_size_limit_mb": 1000,
      "auto_cleanup": true
    },
    "parallel_processing": {
      "enable_multiprocessing": true,
      "chunk_size": "auto",
      "backend": "threading"
    },
    "numba_optimization": {
      "stability_enhancements": {
        "enable_kernel_warmup": true,
        "_enable_kernel_warmup_note": "Pre-compile kernels for stable isotropic analysis performance",
        "optimize_memory_layout": true,
        "_optimize_memory_layout_note": "Memory optimization for single-angle isotropic calculations",
        "environment_optimization": {
          "auto_configure": true,
          "_auto_configure_note": "Automatic environment optimization for isotropic mode",
          "max_threads": 4,
          "_max_threads_note": "Conservative thread count for optimal stability-performance balance"
        }
      },
      "performance_monitoring": {
        "smart_caching": {
          "enabled": true,
          "_enabled_note": "Memory-aware caching optimized for isotropic calculations",
          "max_memory_mb": 200.0,
          "_max_memory_mb_note": "Lower cache limit for simple single-angle isotropic model"
        },
        "adaptive_benchmarking": {
          "enabled": false,
          "_enabled_note": "Disabled by default - enable for performance optimization",
          "target_cv": 0.1,
          "_target_cv_note": "Aggressive CV target achievable with performance rebalancing",
          "min_runs": 3,
          "max_runs": 20,
          "_benchmarking_note": "Fast convergence expected for simplest 3-parameter case"
        }
      }
    },
    "noise_model": {
      "use_simple_forward_model": false,
      "sigma_prior": 0.1,
      "_isotropic_note": "Simple forward model appropriate for isotropic case"
    }
  },
  "output_settings": {
    "reporting": {
      "generate_plots": true,
      "plot_formats": [
        "png",
        "pdf"
      ],
      "detailed_summary": true
    },
    "plotting": {
      "general": {
        "create_plots": true,
        "plot_format": "png",
        "dpi": 300,
        "figure_size": [
          10,
          8
        ],
        "style": "publication"
      },
      "logging": {
        "_comment": "Logging configuration for static isotropic mode",
        "log_level": "INFO",
        "_log_level_note": "Logging level: DEBUG, INFO, WARNING, ERROR",
        "log_to_file": true,
        "_log_to_file_note": "Save logs to file",
        "log_to_console": true,
        "_log_to_console_note": "Display logs in console",
        "log_filename": "homodyne_isotropic_analysis.log",
        "_log_filename_note": "Log file name for isotropic mode",
        "_cli_logging_options": {
          "_comment": "Command-line logging control options",
          "verbose_flag": "--verbose enables DEBUG level logging with detailed output",
          "quiet_flag": "--quiet disables console logging while keeping file logging enabled",
          "default_behavior": "INFO level logging to both console and file",
          "conflict_resolution": "--verbose and --quiet cannot be used together",
          "file_logging": "File logging is always enabled regardless of console settings"
        }
      },
      "c2_heatmaps": {
        "enabled": true,
        "_enabled_note": "Single angle heatmaps for isotropic mode",
        "layout": "single_row",
        "include_experimental": true,
        "include_theoretical": true,
        "include_residuals": true,
        "title_prefix": "C2 Isotropic Static Mode"
      },
      "mcmc_plots": {
        "enabled": true,
        "corner_plots": {
          "enabled": true,
          "figsize": [
            8,
            8
          ],
          "_figsize_note": "Smaller size for 3x3 parameter space"
        },
        "trace_plots": {
          "enabled": true,
          "figsize": [
            10,
            6
          ],
          "_figsize_note": "Compact layout for 3 parameters"
        }
      }
    }
  },
  "_usage_notes": {
    "description": "Specific usage notes for static isotropic mode",
    "key_differences": [
      "phi_angles_file is not loaded - dummy angles used automatically",
      "Angle filtering is disabled regardless of configuration",
      "Only 3 parameters (D0, alpha, D_offset) are optimized",
      "Shear and phi0 parameters are automatically set to 0",
      "Results are independent of scattering angle",
      "Faster optimization due to fewer parameters and no angle selection"
    ],
    "when_to_use": [
      "Static samples with no applied flow or rotation",
      "Isotropic scattering where results don't depend on angle",
      "Quick analysis focusing only on diffusion dynamics",
      "Systems where angular anisotropy is not expected or relevant"
    ],
    "performance_benefits": [
      "Faster optimization (3 vs 7 parameters)",
      "No angle file loading overhead",
      "No angle filtering computational cost",
      "Simpler parameter space for MCMC"
    ]
  },
  "validation_rules": {
    "_comment": "Validation rules for static isotropic mode",
    "fit_quality": {
      "_comment": "Classical optimization fit quality for 3-parameter isotropic analysis",
      "_applies_to": "Classical optimization using Nelder-Mead method",
      "overall_chi_squared": {
        "excellent_threshold": 2.0,
        "acceptable_threshold": 5.0,
        "warning_threshold": 10.0,
        "critical_threshold": 20.0,
        "_isotropic_note": "Isotropic averaging may improve fit quality vs anisotropic"
      },
      "per_angle_chi_squared": {
        "excellent_threshold": 2.0,
        "acceptable_threshold": 5.0,
        "warning_threshold": 10.0,
        "outlier_threshold_multiplier": 2.5,
        "max_outlier_fraction": 0.25,
        "min_good_angles": 1,
        "_min_good_angles_note": "Only 1 angle minimum for isotropic (single dummy angle)"
      }
    },
    "mcmc_convergence": {
      "_comment": "MCMC convergence validation for 3-parameter static isotropic analysis",
      "_applies_to": "MCMC/NUTS sampling methods only",
      "_note": "Isotropic mode uses MCMC convergence diagnostics instead of chi-squared",
      "rhat_thresholds": {
        "_comment": "R-hat thresholds for simplified 3-parameter isotropic model",
        "excellent_threshold": 1.01,
        "_excellent_threshold_note": "R\u0302 \u2264 1.01 indicates excellent convergence",
        "good_threshold": 1.05,
        "_good_threshold_note": "R\u0302 \u2264 1.05 indicates good convergence for isotropic model",
        "acceptable_threshold": 1.1,
        "_acceptable_threshold_note": "R\u0302 \u2264 1.1 indicates acceptable convergence",
        "critical_threshold": 1.15,
        "_critical_threshold_note": "R\u0302 > 1.15 indicates poor convergence"
      },
      "ess_thresholds": {
        "_comment": "ESS thresholds for 3-parameter isotropic space",
        "excellent_threshold": 400,
        "_excellent_threshold_note": "ESS \u2265 400 excellent for 3-parameter space",
        "good_threshold": 200,
        "_good_threshold_note": "ESS \u2265 200 good for isotropic analysis",
        "acceptable_threshold": 100,
        "_acceptable_threshold_note": "ESS \u2265 100 acceptable for static isotropic",
        "minimum_threshold": 50,
        "_minimum_threshold_note": "ESS < 50 inadequate for parameter estimates"
      },
      "divergence_thresholds": {
        "_comment": "Divergence criteria for simple isotropic geometry",
        "max_divergences_fraction": 0.01,
        "_max_divergences_fraction_note": "1% max divergences for simple isotropic model",
        "warning_divergences_fraction": 0.005,
        "_warning_divergences_fraction_note": "0.5% divergences warrants investigation"
      },
      "quality_assessment": {
        "_comment": "Isotropic-specific MCMC quality criteria",
        "excellent_criteria": "R\u0302 < 1.01 AND ESS > 400 AND divergences < 0.5%",
        "good_criteria": "R\u0302 < 1.05 AND ESS > 200 AND divergences < 1%",
        "acceptable_criteria": "R\u0302 < 1.1 AND ESS > 100 AND divergences < 1%",
        "poor_criteria": "Any criterion fails to meet acceptable threshold",
        "_isotropic_note": "3-parameter isotropic model should converge efficiently"
      }
    },
    "parameter_validation": {
      "_comment": "Parameter validation for static isotropic mode",
      "check_bounds": true,
      "physics_constraints": true,
      "correlation_checks": true,
      "_isotropic_constraints": [
        "D0 must be positive (physical diffusion)",
        "Only D0, alpha, D_offset are optimized",
        "Flow parameters automatically set to 0",
        "phi0 automatically set to 0 (irrelevant in isotropic mode)"
      ]
    }
  }
}