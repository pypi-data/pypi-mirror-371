import{d as U}from"./domains-Bgn4ixHL.js";import{b as M,p as te,g as m,h as B,d as le,c as A,o as C,w as l,a,q as xe,e as v,t as V,f as u,n as E,l as w,s as me,m as q,F as de,v as Ce,x as De,y as we,z as he,A as Ae,B as O,C as Se,I as $e,D as Ne,E as Ue,k as ce,G as Fe,r as Te,H as Le}from"./index-I1VDlN4g.js";import{u as fe}from"./permissions-CITHLHVg.js";import{V as pe,r as Z}from"./VForm-DAkW4nfy.js";import{c as qe,V as Be,b as Re,a as ve}from"./VCard-er_isjE_.js";import{V as oe}from"./VTextField-BdyvgvkG.js";import{V as Pe}from"./VSelect-Cs4ARbAS.js";import{V as J}from"./VSwitch-Cs1NQrmk.js";import{V as Ee}from"./VSpacer-C7xukQmu.js";import{V as N,u as Oe,a as Me,m as Ie,b as ze,c as Ge,M as Je,d as _e,e as ie}from"./VAvatar-Lpb-Dion.js";import{p as je}from"./parameters-A6iBEYQq.js";import{_ as We}from"./CreationForm-71YJbjsA.js";import{_ as Ke,a as Ye,b as He,c as Qe}from"./DomainTransportForm-C2xo0Yd7.js";import{_ as Xe}from"./AccountPasswordSubForm-D9S6LaeH.js";import{a as P,V as se}from"./VRow-BF35mT1S.js";import{_ as Ze}from"./DomainAdminList-BjC4KsqI.js";import{_ as ea}from"./ConfirmDialog-BBcgdAnO.js";import{V as ee}from"./VChip-B4iSpj8_.js";import{_ as aa}from"./MenuItems-BAtHWzAE.js";import{V as ta}from"./VCheckboxBtn-Dt810gWf.js";import{V as ae}from"./VMenu-BPFJwj2f.js";import{u as la,a as oa}from"./VProgressCircular-w75-3ogi.js";import{u as na,m as ia,a as sa}from"./tag-BnSYRTcD.js";import{V as ye,a as ra}from"./VToolbar-BiCiBxBJ.js";import{V as be,a as re,b as ue}from"./forwardRefs-Dvjn_Xq4.js";import{V as ua}from"./VDataTable-4JRjbtgF.js";import{V as ma}from"./VCheckbox-D-u8JXP1.js";import{V as I}from"./VDialog-Bk6EWNhz.js";import{_ as da,i as ca}from"./importExport-BlQYb0NO.js";import"./VSelectionControl-Dg-XyRRS.js";/* empty css              */import"./logos-q8SEyAa4.js";import"./VWindowItem-ChWm_kz3.js";import"./ssrBoot-AzTdjPjk.js";import"./VContainer-DvTbsotR.js";import"./VSheet-Btq_Mu4s.js";import"./ChoiceField-DJ_c78Cm.js";import"./transports-Dz7c6kIy.js";import"./VAutocomplete-C4IpXyl8.js";import"./filter-CnffiQAW.js";import"./VAlert-DIQTrRif.js";import"./VDataTableVirtual-BlnO18u_.js";import"./VTable-CNz2SGk4.js";import"./VFileInput-D1_7ZkO_.js";const fa={class:"headline"},pa={class:"m-label"},va={class:"m-label"},ge={__name:"DomainAliasForm",props:{domainAlias:{type:Object,default:()=>null}},emits:["close"],setup(r,{emit:_}){const{$gettext:e}=M(),f=_,{displayNotification:D}=te(),y=r,h=m([]),t=m({enabled:!0}),d=m(!1),S=m(),k=B(()=>y.domainAlias?e("Update"):e("Add")),p=B(()=>y.domainAlias?e("Edit domain alias"):e("Add a new domain alias"));async function g(){d.value=!0;try{await U.deleteDomainAlias(y.domainAlias.pk),D({msg:e("Domain alias deleted")}),f("close")}finally{d.value=!1}}async function $(){const{valid:x}=await S.value.validate();if(x){d.value=!0;try{if(!t.value.pk)await U.createDomainAlias(t.value),D({msg:e("Domain alias created")});else{const i=JSON.parse(JSON.stringify(t.value));await U.updateDomainAlias(y.domainAlias.pk,i),D({msg:e("Domain alias updated")})}f("close")}finally{d.value=!1}}}return le(()=>{U.getDomains().then(x=>{h.value=x.data}),y.domainAlias&&(t.value=JSON.parse(JSON.stringify(y.domainAlias)))}),(x,i)=>(C(),A(ve,null,{default:l(()=>[a(pe,{ref_key:"vFormRef",ref:S,onSubmit:xe($,["prevent"])},{default:l(()=>[a(qe,null,{default:l(()=>[v("span",fa,V(p.value),1)]),_:1}),a(Be,null,{default:l(()=>[v("label",pa,V(u(e)("Name")),1),a(oe,{modelValue:t.value.name,"onUpdate:modelValue":i[0]||(i[0]=c=>t.value.name=c),variant:"outlined",density:"compact",rules:[u(Z).required]},null,8,["modelValue","rules"]),v("label",va,V(u(e)("Choose a domain")),1),a(Pe,{modelValue:t.value.target,"onUpdate:modelValue":i[1]||(i[1]=c=>t.value.target=c),items:h.value,"item-title":"name","item-value":"pk",rules:[u(Z).required],"single-line":"",variant:"outlined",density:"compact"},null,8,["modelValue","items","rules"]),a(J,{modelValue:t.value.enabled,"onUpdate:modelValue":i[2]||(i[2]=c=>t.value.enabled=c),label:"Enabled",color:"primary"},null,8,["modelValue"])]),_:1}),a(Re,null,{default:l(()=>[a(Ee),a(N,{loading:d.value,onClick:i[3]||(i[3]=c=>f("close"))},{default:l(()=>[w(V(u(e)("Close")),1)]),_:1},8,["loading"]),r.domainAlias&&r.domainAlias.pk?(C(),A(N,{key:0,color:"error",loading:d.value,onClick:g},{default:l(()=>[w(V(u(e)("Delete")),1)]),_:1},8,["loading"])):E("",!0),a(N,{color:"primary",type:"submit",loading:d.value},{default:l(()=>[w(V(k.value),1)]),_:1},8,["loading"])]),_:1})]),_:1},512)]),_:1}))}},_a={__name:"DomainOptionsForm",props:{modelValue:{type:Object,default:null}},emits:["createAdmin"],setup(r,{expose:_,emit:e}){const{$gettext:f}=M(),D=r,y=e,h=m(),t=m(!1),d=B(()=>D.modelValue);function S(k){y("createAdmin",k)}return _({vFormRef:h}),(k,p)=>(C(),A(pe,{ref_key:"vFormRef",ref:h},{default:l(()=>[a(J,{modelValue:t.value,"onUpdate:modelValue":[p[0]||(p[0]=g=>t.value=g),S],label:u(f)("Create a domain administrator"),color:"primary"},null,8,["modelValue","label"]),a(oe,{modelValue:d.value.domain_admin.username,"onUpdate:modelValue":p[1]||(p[1]=g=>d.value.domain_admin.username=g),label:u(f)("Name"),hint:u(f)("Name of the administrator"),"persistent-hint":"",variant:"outlined",disabled:!t.value,suffix:`@${d.value.name}`,rules:[!t.value||u(Z).required]},null,8,["modelValue","label","hint","disabled","suffix","rules"]),a(Xe,{modelValue:d.value.domain_admin,"onUpdate:modelValue":p[2]||(p[2]=g=>d.value.domain_admin=g),disabled:!t.value},null,8,["modelValue","disabled"]),a(J,{modelValue:d.value.domain_admin.with_mailbox,"onUpdate:modelValue":p[3]||(p[3]=g=>d.value.domain_admin.with_mailbox=g),label:u(f)("With a mailbox"),disabled:!t.value,hint:u(f)("Create a mailbox for the administrator."),"persistent-hint":"",color:"primary"},null,8,["modelValue","label","disabled","hint"]),a(J,{modelValue:d.value.domain_admin.with_aliases,"onUpdate:modelValue":p[4]||(p[4]=g=>d.value.domain_admin.with_aliases=g),label:u(f)("Create aliases"),disabled:!t.value,hint:u(f)("Create standard aliases for the domain."),"persistent-hint":"",color:"primary"},null,8,["modelValue","label","disabled","hint"])]),_:1},512))}},ya={class:"text-grey"},ba={__name:"DomainCreationForm",emits:["close","created"],setup(r,{emit:_}){const{$gettext:e}=M(),f=te(),D=me(),y=_,t=m({name:"",type:"domain",enabled:!0,enable_dns_checks:!0,enable_dkim:!1,dkim_key_selector:"modoboa",quota:0,default_mailbox_quota:0,domain_admin:{username:"admin",random_password:!1,with_mailbox:!1,with_aliases:!1},transport:{settings:{}}});le(()=>{je.getGlobalApplication("admin").then(n=>{const o=n.data.params;t.value.quota=o.default_domain_quota,t.value.default_mailbox_quota=o.default_mailbox_quota,o.default_domain_message_limit!==null&&(t.value.message_limit=o.default_domain_message_limit)})});const d=m(!1),S=m(),k=m(),p=m(),g=m(),$=m(),x=m(),i={general:k,dns:p,limitations:g,options:$,transport:x},c=[{name:"general",title:e("General")},{name:"dns",title:e("DNS")},{name:"limitations",title:e("Limitations")},{name:"options",title:e("Options")}],T=[{name:"general",title:e("General")},{name:"dns",title:e("DNS")},{name:"limitations",title:e("Limitations")},{name:"transport",title:e("Transport")}],j=B(()=>t.value.type==="domain"?c:T),R=B(()=>{const n=[{title:e("General"),items:[{key:e("Name"),value:t.value.name},{key:e("Type"),value:t.value.type},{key:e("Enabled"),value:t.value.enabled,type:"yesno"}]},{title:e("DNS"),items:[{key:e("Enable DNS checks"),value:t.value.enable_dns_checks,type:"yesno"},{key:e("Enable DKIM signing"),value:t.value.enable_dkim,type:"yesno"}]},{title:e("Limitations"),items:[{key:e("Quota"),value:t.value.quota},{key:e("Default mailbox quota"),value:t.value.default_mailbox_quota},{key:e("Message sending limit"),value:t.value.message_limit}]}];if(t.value.enable_dkim&&(n[1].items.push({key:e("DKIM key selector"),value:t.value.dkim_key_selector}),n[1].items.push({key:e("DKIM key length"),value:t.value.dkim_key_length})),t.value.type==="relaydomain"&&t.value.transport.service){const o={title:e("Transport"),items:[{key:e("Service"),value:t.value.transport.service}]};for(const b of x.value.service.settings){const s={key:b.label,value:t.value.transport.settings[`${t.value.transport.service}_${b.name}`]};b.type==="boolean"&&(s.type="yesno"),o.items.push(s)}n.push(o)}else if(t.value.type==="domain"){const o={title:e("Options"),items:[{key:e("Create a domain administrator"),value:d.value,type:"yesno"}]};d.value&&o.items.push({key:e("Administrator name"),value:t.value.domain_admin.username},{name:"random_password",key:e("Random password"),value:t.value.domain_admin.random_password,type:"yesno"},{key:e("With mailbox"),value:t.value.domain_admin.with_mailbox,type:"yesno"},{key:e("Create aliases"),value:t.value.domain_admin.with_aliases,type:"yesno"}),n.push(o)}return n});function z(){y("close")}function W(){navigator.clipboard.writeText(t.value.domain_admin.password).then(()=>{f.displayNotification({msg:e("Password copied to clipboard")})})}function K(n){return i.value[n.name]}function Y(n){return i[n.name].value.vFormRef}async function H(){}function Q(n){d.value=n}async function X(){const n=JSON.parse(JSON.stringify(t.value));d.value||delete n.domain_admin,n.message_limit===""&&delete n.message_limit,n.type==="relaydomain"?x.value.checkSettingTypes(n):delete n.transport;try{const o=await U.createDomain(n);D.push({name:"DomainDetail",params:{id:o.data.pk}}),f.displayNotification({msg:e("Domain created")}),z()}finally{S.value.working=!1}}return(n,o)=>(C(),A(We,{ref_key:"form",ref:S,title:u(e)("New domain"),steps:j.value,"form-getter":K,"get-v-form-ref":Y,"validate-object":H,"summary-sections":R.value,onClose:z,onCreate:X},{"form.general":l(()=>[a(Qe,{ref_key:"general",ref:k,modelValue:t.value,"onUpdate:modelValue":o[0]||(o[0]=b=>t.value=b),class:"ml-4"},null,8,["modelValue"])]),"form.dns":l(()=>[a(He,{ref_key:"dns",ref:p,modelValue:t.value,"onUpdate:modelValue":o[1]||(o[1]=b=>t.value=b),class:"ml-4"},null,8,["modelValue"])]),"form.limitations":l(()=>[a(Ye,{ref_key:"limitations",ref:g,modelValue:t.value,"onUpdate:modelValue":o[2]||(o[2]=b=>t.value=b),class:"ml-4"},null,8,["modelValue"])]),"form.options":l(()=>[a(_a,{ref_key:"options",ref:$,modelValue:t.value,"onUpdate:modelValue":o[3]||(o[3]=b=>t.value=b),class:"ml-4",onCreateAdmin:Q},null,8,["modelValue"])]),"form.transport":l(()=>[a(Ke,{ref_key:"transport",ref:x,modelValue:t.value.transport,"onUpdate:modelValue":o[4]||(o[4]=b=>t.value.transport=b),class:"ml-4"},null,8,["modelValue"])]),"item.random_password":l(({item:b})=>[b.value?(C(),A(P,{key:0,cols:"12",class:"highligth text-white"},{default:l(()=>[a(se,null,{default:l(()=>[a(P,null,{default:l(()=>[v("span",null,V(b.key),1)]),_:2},1024),a(P,{class:"text-right"},{default:l(()=>[w(V(n.$yesno(b.value)),1)]),_:2},1024)]),_:2},1024),a(se,null,{default:l(()=>[a(P,{class:"text-right py-1"},{default:l(()=>[w(V(t.value.domain_admin.password)+" ",1),a(N,{icon:"mdi-clipboard-multiple-outline",color:"white",variant:"text",title:u(e)("Copy to clipboard"),onClick:W},null,8,["title"])]),_:1})]),_:1})]),_:2},1024)):(C(),q(de,{key:1},[a(P,null,{default:l(()=>[v("span",ya,V(b.key),1)]),_:2},1024),a(P,{class:"text-right"},{default:l(()=>[w(V(n.$yesno(b.value)),1)]),_:2},1024)],64))]),_:2},1032,["title","steps","summary-sections"]))}},ga={__name:"DNSStatusChip",props:{status:{type:String,default:"pending"}},setup(r){const _=r,{$gettext:e}=M(),f=B(()=>_.status==="disabled"?e("Disabled"):_.status==="pending"?e("Pending"):_.status==="critical"?e("Problem"):_.status==="ok"?e("Valid"):e("Unknown")),D=B(()=>_.status==="disabled"?"":_.status==="pending"?"info":_.status==="critical"?"error":_.status==="ok"?"success":"warning");return(y,h)=>(C(),A(ee,{color:D.value,size:"small"},{default:l(()=>[w(V(f.value),1)]),_:1},8,["color"]))}},Va=De({bordered:Boolean,color:String,content:[Number,String],dot:Boolean,floating:Boolean,icon:$e,inline:Boolean,label:{type:String,default:"$vuetify.badge"},max:[Number,String],modelValue:{type:Boolean,default:!0},offsetX:[Number,String],offsetY:[Number,String],textColor:String,...sa(),...Ge({location:"top end"}),...ze(),...ia(),...Se(),...Ie({transition:"scale-rotate-transition"})},"VBadge"),ka=Ce()({name:"VBadge",inheritAttrs:!1,props:Va(),setup(r,_){const{backgroundColorClasses:e,backgroundColorStyles:f}=la(()=>r.color),{roundedClasses:D}=Oe(r),{t:y}=we(),{textColorClasses:h,textColorStyles:t}=oa(()=>r.textColor),{themeClasses:d}=he(),{locationStyles:S}=Me(r,!0,k=>(r.floating?r.dot?2:4:r.dot?8:12)+(["top","bottom"].includes(k)?Number(r.offsetY??0):["left","right"].includes(k)?Number(r.offsetX??0):0));return na(()=>{const k=Number(r.content),p=!r.max||isNaN(k)?r.content:k<=Number(r.max)?k:`${r.max}+`,[g,$]=Ae(_.attrs,["aria-atomic","aria-label","aria-live","role","title"]);return a(r.tag,O({class:["v-badge",{"v-badge--bordered":r.bordered,"v-badge--dot":r.dot,"v-badge--floating":r.floating,"v-badge--inline":r.inline},r.class]},$,{style:r.style}),{default:()=>{var x,i;return[v("div",{class:"v-badge__wrapper"},[(i=(x=_.slots).default)==null?void 0:i.call(x),a(Je,{transition:r.transition},{default:()=>{var c,T;return[Ne(v("span",O({class:["v-badge__badge",d.value,e.value,D.value,h.value],style:[f.value,t.value,r.inline?{}:S.value],"aria-atomic":"true","aria-label":y(r.label,k),"aria-live":"polite",role:"status"},g),[r.dot?void 0:_.slots.badge?(T=(c=_.slots).badge)==null?void 0:T.call(c):r.icon?a(_e,{icon:r.icon},null):p]),[[Ue,r.modelValue]])]}})])]}})}),{}}}),xa={class:"v-data-table__td v-data-table-column--no-padding v-data-table-column--align-start"},Ca={key:1},Da={key:1},wa={key:0},ha={class:"text-right"},Aa={class:"grey lighten-4"},Sa=["colspan"],$a=["onClick"],Na={__name:"DomainList",setup(r,{expose:_}){const{$gettext:e}=M(),f=me(),{canSetRole:D}=fe(),y=te(),h=[{title:e("Name"),key:"name"},{title:e("Enabled"),key:"enabled",width:"5%"},{title:e("Aliases"),key:"domainalias_count"},{title:e("DNS status"),key:"dns_global_status",sortable:!1},{title:e("Sending limit"),key:"message_limit"},{title:e("Quota"),key:"allocated_quota_in_percent"}];D.value&&h.push({title:e("Actions"),value:"actions",sortable:!1,align:"end"});const t=m({}),d=m(),S=m([]),k=m(!1),p=m(!1),g=m(null),$=m(null),x=m(!1),i=m(!1),c=m(""),T=m([]),j=m([]);async function R(){t.value={},p.value=!0;try{const n=await U.getDomains();S.value=n.data}finally{p.value=!1}}function z(){i.value=!1,g.value=null,$.value=null}async function W(n){if(await d.value.open(e("Warning"),e("Do you really want to delete the domain %{ domain }?",{domain:n.name}),{color:"error",cancelLabel:e("No"),agreeLabel:e("Yes")})){p.value=!0;try{const b={keep_folder:k.value};await U.deleteDomain(n.pk,b),R(),y.displayNotification({msg:e("Domain deleted")}),k.value=!1}finally{p.value=!1}}}function K(n){f.push({name:"DomainEdit",params:{id:n.pk}})}function Y(n,o){g.value=n,$.value=o,i.value=!0}function H(n,o,b,s){if(b(o)){s(o);return}U.getDomainAliases(n.name).then(F=>{t.value[n.name]=F.data,s(o)})}function Q(n){g.value=n,x.value=!0}function X(n){const o=[{label:e("Administrators"),icon:"mdi-account-supervisor",onClick:Q},{label:e("Edit"),icon:"mdi-circle-edit-outline",onClick:K},{label:e("Delete"),icon:"mdi-delete-outline",onClick:W,color:"red"}];return n.opened_alarms_count&&o.push({label:e("Alarms"),icon:"mdi-bell",color:"red",onClick:()=>f.push({name:"Alarms"})}),o}return le(()=>{R()}),_({reloadDomains:R}),(n,o)=>{const b=Te("router-link");return C(),A(ve,{class:"mt-6"},{default:l(()=>[a(ua,{modelValue:T.value,"onUpdate:modelValue":o[1]||(o[1]=s=>T.value=s),expanded:j.value,headers:h,items:S.value,"item-value":"name",search:c.value,"show-select":"","expand-on-click":"",loading:p.value},{top:l(()=>[a(ye,{color:"white",flat:""},{default:l(()=>[a(oe,{modelValue:c.value,"onUpdate:modelValue":o[0]||(o[0]=s=>c.value=s),"prepend-inner-icon":"mdi-magnify",placeholder:u(e)("Search"),variant:"outlined","single-line":"","hide-details":"",density:"compact",class:"flex-grow-0 w-33 mr-4"},null,8,["modelValue","placeholder"]),Le(n.$slots,"extraActions",{},void 0,!0),a(ae,{location:"bottom"},{activator:l(({props:s})=>[a(N,O({variant:"flat","append-icon":"mdi-chevron-down"},s,{size:"small"}),{default:l(()=>[w(V(u(e)("Actions")),1)]),_:2},1040)]),default:l(()=>[a(be,{density:"compact"})]),_:1}),a(N,{variant:"text",icon:"mdi-reload",onClick:R})]),_:3})]),item:l(({item:s,internalItem:L,isExpanded:F,toggleExpand:ne,isSelected:Ve,toggleSelect:ke})=>[v("tr",null,[v("td",xa,[a(ta,{value:!Ve(L),onClick:G=>ke(L)},null,8,["value","onClick"])]),v("td",null,[a(b,{to:{name:"DomainDetail",params:{id:s.pk}}},{default:l(()=>[w(V(s.name),1)]),_:2},1032,["to"]),s.type==="relaydomain"?(C(),A(ee,{key:0,size:"small",color:"primary",class:"ml-2"},{default:l(()=>[w(V(u(e)("Relay")),1)]),_:1})):E("",!0)]),v("td",null,[a(_e,{color:s.enabled?"success":"error",icon:s.enabled?"mdi-check-circle":"mdi-close-circle",variant:"flat"},null,8,["color","icon"])]),v("td",null,[w(V(s.domainalias_count)+" aliases ",1),s.domainalias_count?(C(),A(N,{key:0,variant:"text",icon:F(L)?"mdi-chevron-up":"mdi-chevron-down",onClick:G=>H(s,L,F,ne)},null,8,["icon","onClick"])):E("",!0)]),v("td",null,[a(ga,{status:s.dns_global_status},null,8,["status"])]),v("td",null,[s.message_limit?(C(),A(ie,{key:0,color:s.sent_messages_in_percent<80?"primary":"warning","model-value":s.sent_messages_in_percent},null,8,["color","model-value"])):(C(),q("span",Ca,V(u(e)("Unlimited")),1))]),v("td",null,[s.quota!=="0"?(C(),A(ie,{key:0,color:s.allocated_quota_in_percent<80?"primary":"warning","model-value":s.allocated_quota_in_percent},null,8,["color","model-value"])):(C(),q("span",Da,V(u(e)("Unlimited")),1))]),u(D)?(C(),q("td",wa,[v("div",ha,[a(ae,{"offset-y":""},{activator:l(({props:G})=>[s.opened_alarms_count?(C(),A(ka,{key:0,bordered:"",color:"error",icon:"mdi-bell",overlap:""},{default:l(()=>[a(N,O({icon:"mdi-dots-horizontal",variant:"text"},G),null,16)]),_:2},1024)):(C(),A(N,O({key:1,icon:"mdi-dots-horizontal",variant:"text"},G),null,16))]),default:l(()=>[a(aa,{items:X(s),obj:s},null,8,["items","obj"])]),_:2},1024)])])):E("",!0)])]),"expanded-row":l(({item:s,columns:L})=>[v("tr",Aa,[v("td",{colspan:L.length},[(C(!0),q(de,null,Fe(t.value[s.name],F=>(C(),q("span",{key:F.name,class:"mr-4"},[v("a",{href:"#",class:"mr-2",onClick:ne=>Y(s,F)},V(F.name),9,$a),a(ee,{variant:"flat",size:"x-small",color:"success"},{default:l(()=>o[6]||(o[6]=[w("DNS OK")])),_:1,__:[6]})]))),128))],8,Sa)])]),_:3},8,["modelValue","expanded","items","search","loading"]),a(ea,{ref_key:"confirm",ref:d},{default:l(()=>[a(ma,{modelValue:k.value,"onUpdate:modelValue":o[2]||(o[2]=s=>k.value=s),label:u(e)("Do not delete domain folder"),"hide-details":""},null,8,["modelValue","label"])]),_:1},512),a(I,{modelValue:i.value,"onUpdate:modelValue":o[3]||(o[3]=s=>i.value=s),persistent:"","max-width":"800px"},{default:l(()=>[a(ge,{"domain-alias":$.value,onClose:z},null,8,["domain-alias"])]),_:1},8,["modelValue"]),a(I,{modelValue:x.value,"onUpdate:modelValue":o[5]||(o[5]=s=>x.value=s),persistent:"","max-width":"800px"},{default:l(()=>[a(Ze,{domain:g.value,"dialog-mode":"",onClose:o[4]||(o[4]=s=>x.value=!1)},null,8,["domain"])]),_:1},8,["modelValue"])]),_:3})}}},Ua=ce(Na,[["__scopeId","data-v-8ed27599"]]),Fa={__name:"DomainsView",setup(r){const _=m(),e=m(!1),f=m(!1),D=m(!1),{$gettext:y}=M(),{canAddDomain:h}=fe(),t=m(),{importContent:d,exportContent:S}=ca();function k(){U.exportAll().then(x=>{S(x.data,"domains",y)})}function p(x){d(U,x,t,y)}const g=()=>{e.value=!1,_.value.reloadDomains()},$=()=>{D.value=!1,_.value.reloadDomains()};return(x,i)=>(C(),q("div",null,[a(ye,{flat:""},{default:l(()=>[a(ra,null,{default:l(()=>[w(V(u(y)("Domains")),1)]),_:1})]),_:1}),a(u(Ua),{ref_key:"domainList",ref:_},{extraActions:l(()=>[u(h)?(C(),A(ae,{key:0,"offset-y":""},{activator:l(({props:c})=>[a(N,O({color:"primary",variant:"outlined"},c,{"prepend-icon":"mdi-plus",class:"mr-4"}),{default:l(()=>[w(V(u(y)("New")),1)]),_:2},1040)]),default:l(()=>[a(be,{density:"compact"},{default:l(()=>[a(re,{onClick:i[0]||(i[0]=c=>f.value=!0)},{default:l(()=>[a(ue,null,{default:l(()=>[w(V(u(y)("Domain")),1)]),_:1})]),_:1}),a(re,{onClick:i[1]||(i[1]=c=>e.value=!0)},{default:l(()=>[a(ue,null,{default:l(()=>[w(V(u(y)("Alias")),1)]),_:1})]),_:1})]),_:1})]),_:1})):E("",!0),u(h)?(C(),A(N,{key:1,class:"mr-2",title:u(y)("Import domains and aliases from CSV file"),variant:"flat",icon:"mdi-file-import-outline",onClick:i[2]||(i[2]=c=>D.value=!0)},null,8,["title"])):E("",!0),a(N,{class:"mr-2",title:u(y)("Export domains and aliases to CSV"),variant:"flat",icon:"mdi-file-export-outline",onClick:k},null,8,["title"])]),_:1},512),a(I,{modelValue:f.value,"onUpdate:modelValue":i[4]||(i[4]=c=>f.value=c),fullscreen:"",scrollable:"","z-index":"10"},{default:l(()=>[a(u(ba),{onClose:i[3]||(i[3]=c=>f.value=!1)})]),_:1},8,["modelValue"]),a(I,{modelValue:e.value,"onUpdate:modelValue":i[6]||(i[6]=c=>e.value=c),persistent:"","max-width":"800px"},{default:l(()=>[a(u(ge),{onClose:i[5]||(i[5]=c=>g())})]),_:1},8,["modelValue"]),a(I,{modelValue:D.value,"onUpdate:modelValue":i[7]||(i[7]=c=>D.value=c),persistent:"","max-width":"800px"},{default:l(()=>[a(u(da),{ref_key:"importForm",ref:t,title:u(y)("Import domains"),onSubmit:p,onClose:$},{help:l(()=>i[8]||(i[8]=[v("ul",null,[v("li",null,[v("em",null,"domain; name; quota; default mailbox quota; enabled")]),v("li",null,[v("em",null,"domainalias; name; targeted domain; enabled")]),v("li",null,[v("em",null,"relaydomain; name; target host; target port; service; enabled; verify recipients")])],-1)])),_:1},8,["title"])]),_:1},8,["modelValue"])]))}},Ct=ce(Fa,[["__scopeId","data-v-1068f77b"]]);export{Ct as default};
