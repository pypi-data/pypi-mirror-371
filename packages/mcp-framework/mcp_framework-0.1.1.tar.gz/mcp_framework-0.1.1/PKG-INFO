Metadata-Version: 2.4
Name: mcp-framework
Version: 0.1.1
Summary: ä¸€ä¸ªå¼ºå¤§ä¸”æ˜“ç”¨çš„ MCP (Model Context Protocol) æœåŠ¡å™¨å¼€å‘æ¡†æ¶
Home-page: https://github.com/mcpframework/mcp_framework
Author: MCP Framework Team
Author-email: MCP Framework Team <team@mcpframework.com>
Maintainer-email: MCP Framework Team <team@mcpframework.com>
License: MIT
Project-URL: Homepage, https://github.com/mcpframework/mcp_framework
Project-URL: Documentation, https://mcp-framework.readthedocs.io/
Project-URL: Repository, https://github.com/mcpframework/mcp_framework.git
Project-URL: Bug Reports, https://github.com/mcpframework/mcp_framework/issues
Project-URL: Source Code, https://github.com/mcpframework/mcp_framework
Keywords: mcp,model-context-protocol,server,framework,ai,llm,tools,streaming,async,web-server
Classifier: Development Status :: 4 - Beta
Classifier: Intended Audience :: Developers
Classifier: License :: OSI Approved :: MIT License
Classifier: Programming Language :: Python :: 3
Classifier: Programming Language :: Python :: 3.8
Classifier: Programming Language :: Python :: 3.9
Classifier: Programming Language :: Python :: 3.10
Classifier: Programming Language :: Python :: 3.11
Classifier: Programming Language :: Python :: 3.12
Classifier: Topic :: Software Development :: Libraries :: Python Modules
Classifier: Topic :: Internet :: WWW/HTTP :: HTTP Servers
Classifier: Topic :: Scientific/Engineering :: Artificial Intelligence
Classifier: Framework :: AsyncIO
Classifier: Operating System :: OS Independent
Requires-Python: >=3.8
Description-Content-Type: text/markdown
License-File: LICENSE
Requires-Dist: aiohttp>=3.8.0
Requires-Dist: aiofiles>=23.0.0
Requires-Dist: pydantic>=2.0.0
Requires-Dist: click>=8.0.0
Requires-Dist: colorama>=0.4.6
Requires-Dist: psutil>=5.9.0
Requires-Dist: PyInstaller>=5.0.0
Provides-Extra: dev
Requires-Dist: pytest>=7.0.0; extra == "dev"
Requires-Dist: pytest-asyncio>=0.21.0; extra == "dev"
Requires-Dist: black>=22.0.0; extra == "dev"
Requires-Dist: flake8>=4.0.0; extra == "dev"
Requires-Dist: mypy>=0.991; extra == "dev"
Requires-Dist: pre-commit>=2.20.0; extra == "dev"
Provides-Extra: web
Requires-Dist: jinja2>=3.0.0; extra == "web"
Requires-Dist: aiohttp-jinja2>=1.5.0; extra == "web"
Provides-Extra: build
Requires-Dist: PyInstaller>=5.0.0; extra == "build"
Requires-Dist: wheel>=0.37.0; extra == "build"
Requires-Dist: twine>=4.0.0; extra == "build"
Provides-Extra: all
Requires-Dist: mcp-framework[build,dev,web]; extra == "all"
Dynamic: author
Dynamic: home-page
Dynamic: license-file
Dynamic: requires-python

# MCP Framework

ä¸€ä¸ªå¼ºå¤§ä¸”æ˜“ç”¨çš„ MCP (Model Context Protocol) æœåŠ¡å™¨å¼€å‘æ¡†æ¶ï¼Œæ”¯æŒå¿«é€Ÿæ„å»ºã€éƒ¨ç½²å’Œç®¡ç† MCP æœåŠ¡å™¨ã€‚

## ğŸš€ ç‰¹æ€§

### æ ¸å¿ƒåŠŸèƒ½
- **ç®€å•æ˜“ç”¨**: åŸºäºè£…é¥°å™¨çš„ API è®¾è®¡ï¼Œå¿«é€Ÿå®šä¹‰å·¥å…·å’Œèµ„æº
- **ç±»å‹å®‰å…¨**: å®Œæ•´çš„ç±»å‹æ³¨è§£æ”¯æŒï¼Œè‡ªåŠ¨ç”Ÿæˆ JSON Schema
- **æµå¼æ”¯æŒ**: å†…ç½®æµå¼å“åº”æ”¯æŒï¼Œé€‚åˆå¤§æ•°æ®é‡å¤„ç†
- **é…ç½®ç®¡ç†**: çµæ´»çš„é…ç½®ç³»ç»Ÿï¼Œæ”¯æŒå¤šç«¯å£é…ç½®
- **è‡ªåŠ¨æ„å»º**: é›†æˆ PyInstaller æ„å»ºç³»ç»Ÿï¼Œä¸€é”®ç”Ÿæˆå¯æ‰§è¡Œæ–‡ä»¶

### é«˜çº§ç‰¹æ€§
- **å¤šå¹³å°æ”¯æŒ**: Windowsã€macOSã€Linux è·¨å¹³å°æ„å»º
- **ä¾èµ–ç®¡ç†**: æ™ºèƒ½ä¾èµ–åˆ†æå’Œæ‰“åŒ…
- **çƒ­é‡è½½**: å¼€å‘æ¨¡å¼ä¸‹æ”¯æŒä»£ç çƒ­é‡è½½
- **æ—¥å¿—ç³»ç»Ÿ**: å®Œæ•´çš„æ—¥å¿—è®°å½•å’Œè°ƒè¯•æ”¯æŒ
- **Web ç•Œé¢**: å†…ç½®é…ç½®å’Œæµ‹è¯• Web ç•Œé¢

## ğŸ“¦ å®‰è£…

### ä» PyPI å®‰è£…

```bash
pip install mcp-framework
```

### ä»æºç å®‰è£…

```bash
git clone https://github.com/your-repo/mcp_framework.git
cd mcp_framework
pip install -e .
```

## ğŸ¯ å¿«é€Ÿå¼€å§‹

### 1. åˆ›å»ºåŸºç¡€æœåŠ¡å™¨

```python
#!/usr/bin/env python3
from mcp_framework import EnhancedMCPServer, run_server_main
from mcp_framework.core.decorators import Required, Optional
from typing import Annotated

# åˆ›å»ºæœåŠ¡å™¨å®ä¾‹
server = EnhancedMCPServer(
    name="MyMCPServer",
    version="1.0.0",
    description="æˆ‘çš„ç¬¬ä¸€ä¸ª MCP æœåŠ¡å™¨"
)

# ä½¿ç”¨è£…é¥°å™¨å®šä¹‰å·¥å…·
@server.tool("è®¡ç®—ä¸¤ä¸ªæ•°çš„å’Œ")
async def add_numbers(
    a: Annotated[int, Required("ç¬¬ä¸€ä¸ªæ•°å­—")],
    b: Annotated[int, Required("ç¬¬äºŒä¸ªæ•°å­—")]
) -> int:
    """è®¡ç®—ä¸¤ä¸ªæ•°å­—çš„å’Œ"""
    return a + b

# å®šä¹‰æµå¼å·¥å…·
@server.streaming_tool("ç”Ÿæˆæ•°å­—åºåˆ—")
async def generate_sequence(
    start: Annotated[int, Required("èµ·å§‹æ•°å­—")],
    end: Annotated[int, Required("ç»“æŸæ•°å­—")]
):
    """ç”Ÿæˆæ•°å­—åºåˆ—"""
    for i in range(start, end + 1):
        yield f"æ•°å­—: {i}"
        await asyncio.sleep(0.1)  # æ¨¡æ‹Ÿå¤„ç†æ—¶é—´

# å®šä¹‰èµ„æº
@server.resource(
    uri="file://data.txt",
    name="ç¤ºä¾‹æ•°æ®",
    description="ç¤ºä¾‹æ•°æ®æ–‡ä»¶"
)
async def get_data():
    return {"content": "è¿™æ˜¯ç¤ºä¾‹æ•°æ®", "type": "text/plain"}

# å¯åŠ¨æœåŠ¡å™¨
if __name__ == "__main__":
    run_server_main(
        server_instance=server,
        server_name="MyMCPServer",
        default_port=8080
    )
```

### 2. è¿è¡ŒæœåŠ¡å™¨

```bash
python my_server.py --port 8080 --host localhost
```

## ğŸ“š è¯¦ç»†æ–‡æ¡£

### è£…é¥°å™¨ API

#### å·¥å…·è£…é¥°å™¨

```python
# åŸºç¡€å·¥å…·
@server.tool("å·¥å…·æè¿°")
async def my_tool(param1: str, param2: int) -> str:
    return f"å¤„ç†ç»“æœ: {param1} - {param2}"

# æµå¼å·¥å…·
@server.streaming_tool("æµå¼å·¥å…·æè¿°")
async def my_streaming_tool(query: str):
    for i in range(10):
        yield f"å¤„ç†æ­¥éª¤ {i}: {query}"
        await asyncio.sleep(0.1)
```

#### å‚æ•°ç±»å‹æ³¨è§£

```python
from mcp_framework.core.decorators import Required, Optional, Enum, IntRange
from typing import Annotated

@server.tool("é«˜çº§å‚æ•°ç¤ºä¾‹")
async def advanced_params(
    # å¿…å¡«å­—ç¬¦ä¸²å‚æ•°
    name: Annotated[str, Required("ç”¨æˆ·åç§°")],
    
    # å¯é€‰å‚æ•°å¸¦é»˜è®¤å€¼
    age: Annotated[int, Optional("å¹´é¾„", default=18)],
    
    # æšä¸¾å‚æ•°
    gender: Annotated[str, Enum("æ€§åˆ«", ["male", "female", "other"])],
    
    # èŒƒå›´å‚æ•°
    score: Annotated[int, IntRange("åˆ†æ•°", min_val=0, max_val=100)],
    
    # å¸ƒå°”å‚æ•°
    active: Annotated[bool, Required("æ˜¯å¦æ¿€æ´»")] = True
) -> dict:
    return {
        "name": name,
        "age": age,
        "gender": gender,
        "score": score,
        "active": active
    }
```

#### èµ„æºè£…é¥°å™¨

```python
@server.resource(
    uri="file://config.json",
    name="é…ç½®æ–‡ä»¶",
    description="æœåŠ¡å™¨é…ç½®æ–‡ä»¶",
    mime_type="application/json"
)
async def get_config():
    return {
        "content": json.dumps({"setting1": "value1"}),
        "type": "application/json"
    }
```

### æœåŠ¡å™¨é…ç½®

#### é…ç½®å‚æ•°å®šä¹‰

```python
from mcp_framework.core.decorators import ServerParam, StringParam, SelectParam

@server.server_param("api_key")
def api_key_param() -> Annotated[str, StringParam(
    "API å¯†é’¥",
    "ç”¨äºè®¿é—®å¤–éƒ¨æœåŠ¡çš„ API å¯†é’¥",
    placeholder="è¯·è¾“å…¥ API å¯†é’¥"
)]:
    pass

@server.server_param("model_type")
def model_param() -> Annotated[str, SelectParam(
    "æ¨¡å‹ç±»å‹",
    "é€‰æ‹©è¦ä½¿ç”¨çš„ AI æ¨¡å‹",
    options=["gpt-3.5-turbo", "gpt-4", "claude-3"]
)]:
    pass
```

#### é…ç½®ä½¿ç”¨

```python
@server.tool("ä½¿ç”¨é…ç½®çš„å·¥å…·")
async def configured_tool(query: Annotated[str, Required("æŸ¥è¯¢å†…å®¹")]):
    # è·å–é…ç½®å€¼
    api_key = server.get_config_value("api_key")
    model_type = server.get_config_value("model_type", "gpt-3.5-turbo")
    
    # ä½¿ç”¨é…ç½®è¿›è¡Œå¤„ç†
    return f"ä½¿ç”¨ {model_type} å¤„ç†æŸ¥è¯¢: {query}"
```

### å¤šç«¯å£é…ç½®

æ¡†æ¶æ”¯æŒä¸ºä¸åŒç«¯å£åˆ›å»ºç‹¬ç«‹çš„é…ç½®æ–‡ä»¶ï¼š

```bash
# åœ¨ä¸åŒç«¯å£å¯åŠ¨æœåŠ¡å™¨ï¼Œä¼šè‡ªåŠ¨åˆ›å»ºå¯¹åº”çš„é…ç½®æ–‡ä»¶
python server.py --port 8080  # åˆ›å»º server_port_8080_config.json
python server.py --port 8081  # åˆ›å»º server_port_8081_config.json
```

## ğŸ”¨ æ„å»ºç³»ç»Ÿ

æ¡†æ¶é›†æˆäº†å¼ºå¤§çš„æ„å»ºç³»ç»Ÿï¼Œæ”¯æŒå°† MCP æœåŠ¡å™¨æ‰“åŒ…ä¸ºç‹¬ç«‹çš„å¯æ‰§è¡Œæ–‡ä»¶ã€‚

### æ„å»ºåŠŸèƒ½ç‰¹æ€§

- **è‡ªåŠ¨å‘ç°**: è‡ªåŠ¨å‘ç°é¡¹ç›®ä¸­çš„æ‰€æœ‰æœåŠ¡å™¨è„šæœ¬
- **ä¾èµ–åˆ†æ**: æ™ºèƒ½åˆ†æå’Œæ”¶é›†ä¾èµ–åŒ…
- **å¤šå¹³å°æ„å»º**: æ”¯æŒ Windowsã€macOSã€Linux
- **è™šæ‹Ÿç¯å¢ƒéš”ç¦»**: ä¸ºæ¯ä¸ªæœåŠ¡å™¨åˆ›å»ºç‹¬ç«‹çš„æ„å»ºç¯å¢ƒ
- **å®Œæ•´æ‰“åŒ…**: ç”ŸæˆåŒ…å«æ‰€æœ‰ä¾èµ–çš„åˆ†å‘åŒ…

### ä½¿ç”¨æ„å»ºç³»ç»Ÿ

#### 1. å‡†å¤‡æ„å»ºè„šæœ¬

åœ¨é¡¹ç›®æ ¹ç›®å½•åˆ›å»º `build.py`ï¼ˆæˆ–ä½¿ç”¨æ¡†æ¶æä¾›çš„æ„å»ºè„šæœ¬ï¼‰ï¼š

```python
#!/usr/bin/env python3
from mcp_framework.build import MCPServerBuilder

if __name__ == "__main__":
    builder = MCPServerBuilder()
    builder.build_all()
```

#### 2. æ„å»ºå‘½ä»¤

```bash
# æ„å»ºæ‰€æœ‰æœåŠ¡å™¨
python build.py

# æ„å»ºç‰¹å®šæœåŠ¡å™¨
python build.py --server my_server.py

# åˆ—å‡ºæ‰€æœ‰å¯æ„å»ºçš„æœåŠ¡å™¨
python build.py --list

# åªæ¸…ç†æ„å»ºç›®å½•
python build.py --clean-only

# è·³è¿‡æµ‹è¯•
python build.py --no-test

# åŒ…å«æºä»£ç 
python build.py --include-source
```

#### 3. æ„å»ºè¾“å‡º

æ„å»ºå®Œæˆåï¼Œä¼šåœ¨ `dist/` ç›®å½•ç”Ÿæˆåˆ†å‘åŒ…ï¼š

```
dist/
â”œâ”€â”€ my-server-macos-arm64-20241201_143022.tar.gz
â”œâ”€â”€ weather-server-macos-arm64-20241201_143025.tar.gz
â””â”€â”€ ...
```

æ¯ä¸ªåˆ†å‘åŒ…åŒ…å«ï¼š
- å¯æ‰§è¡Œæ–‡ä»¶
- å®Œæ•´çš„ requirements.txt
- å¯åŠ¨è„šæœ¬ï¼ˆstart.sh / start.batï¼‰
- README å’Œè®¸å¯è¯æ–‡ä»¶
- æºä»£ç ï¼ˆå¦‚æœæŒ‡å®š --include-sourceï¼‰

### ä¾èµ–ç®¡ç†

æ„å»ºç³»ç»Ÿæ”¯æŒå¤šå±‚ä¾èµ–ç®¡ç†ï¼š

1. **é€šç”¨ä¾èµ–** (`requirements.txt`): æ‰€æœ‰æœåŠ¡å™¨å…±äº«çš„ä¾èµ–
2. **ç‰¹å®šä¾èµ–** (`{server_name}_requirements.txt`): ç‰¹å®šæœåŠ¡å™¨çš„ä¾èµ–
3. **è‡ªåŠ¨åˆ†æ**: ä»ä»£ç ä¸­è‡ªåŠ¨åˆ†æå¯¼å…¥çš„åŒ…

ç¤ºä¾‹æ–‡ä»¶ç»“æ„ï¼š
```
project/
â”œâ”€â”€ requirements.txt              # é€šç”¨ä¾èµ–
â”œâ”€â”€ weather_server.py
â”œâ”€â”€ weather_server_requirements.txt  # weather_server ç‰¹å®šä¾èµ–
â”œâ”€â”€ chat_server.py
â”œâ”€â”€ chat_server_requirements.txt     # chat_server ç‰¹å®šä¾èµ–
â””â”€â”€ build.py
```

## ğŸŒ Web ç•Œé¢

æ¡†æ¶æä¾›å†…ç½®çš„ Web ç®¡ç†ç•Œé¢ï¼š

```python
from mcp_framework.web import setup_web_interface

# å¯ç”¨ Web ç•Œé¢
setup_web_interface(server, port=8080)
```

è®¿é—® `http://localhost:8080/config` è¿›è¡Œé…ç½®ç®¡ç†ã€‚

## ğŸ”§ é«˜çº§ç”¨æ³•

### è‡ªå®šä¹‰æœåŠ¡å™¨ç±»

```python
from mcp_framework import BaseMCPServer

class CustomMCPServer(BaseMCPServer):
    def __init__(self):
        super().__init__("CustomServer", "1.0.0")
        
    async def initialize(self):
        # è‡ªå®šä¹‰åˆå§‹åŒ–é€»è¾‘
        self.custom_data = await self.load_custom_data()
        
    async def handle_tool_call(self, tool_name: str, arguments: dict):
        # è‡ªå®šä¹‰å·¥å…·è°ƒç”¨å¤„ç†
        if tool_name == "custom_tool":
            return await self.handle_custom_tool(arguments)
        return await super().handle_tool_call(tool_name, arguments)
```

### ä¸­é—´ä»¶æ”¯æŒ

```python
from mcp_framework.server.middleware import LoggingMiddleware, AuthMiddleware

# æ·»åŠ ä¸­é—´ä»¶
server.add_middleware(LoggingMiddleware())
server.add_middleware(AuthMiddleware(api_key="your-api-key"))
```

## ğŸ“– ç¤ºä¾‹é¡¹ç›®

æŸ¥çœ‹ `examples/` ç›®å½•ä¸­çš„å®Œæ•´ç¤ºä¾‹ï¼š

- `examples/port_config_demo.py` - ç«¯å£é…ç½®æ¼”ç¤º
- `examples/weather_server.py` - å¤©æ°”æœåŠ¡å™¨ç¤ºä¾‹
- `examples/file_manager.py` - æ–‡ä»¶ç®¡ç†æœåŠ¡å™¨
- `examples/ai_assistant.py` - AI åŠ©æ‰‹æœåŠ¡å™¨

## ğŸ¤ è´¡çŒ®

æ¬¢è¿è´¡çŒ®ä»£ç ï¼è¯·æŸ¥çœ‹ [CONTRIBUTING.md](CONTRIBUTING.md) äº†è§£è¯¦ç»†ä¿¡æ¯ã€‚

## ğŸ“„ è®¸å¯è¯

æœ¬é¡¹ç›®é‡‡ç”¨ MIT è®¸å¯è¯ - æŸ¥çœ‹ [LICENSE](LICENSE) æ–‡ä»¶äº†è§£è¯¦ç»†ä¿¡æ¯ã€‚

## ğŸ†˜ æ”¯æŒ

- ğŸ“š [æ–‡æ¡£](https://mcp-framework.readthedocs.io/)
- ğŸ› [é—®é¢˜åé¦ˆ](https://github.com/your-repo/mcp_framework/issues)
- ğŸ’¬ [è®¨è®ºåŒº](https://github.com/your-repo/mcp_framework/discussions)
- ğŸ“§ [é‚®ä»¶æ”¯æŒ](mailto:support@mcpframework.com)

## ğŸ—ºï¸ è·¯çº¿å›¾

- [ ] æ’ä»¶ç³»ç»Ÿ
- [ ] å›¾å½¢åŒ–é…ç½®ç•Œé¢
- [ ] é›†ç¾¤éƒ¨ç½²æ”¯æŒ
- [ ] æ€§èƒ½ç›‘æ§é¢æ¿
- [ ] Docker å®¹å™¨åŒ–æ”¯æŒ
- [ ] äº‘åŸç”Ÿéƒ¨ç½²æ¨¡æ¿

---

**MCP Framework** - è®© MCP æœåŠ¡å™¨å¼€å‘å˜å¾—ç®€å•è€Œå¼ºå¤§ï¼ ğŸš€
