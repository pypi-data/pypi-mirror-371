jobs:
- job: Version
  pool:
    vmImage: 'ubuntu-latest'
  steps:
  - checkout: self
    persistCredentials: true
  - script: |
      echo "Setting version variables"
      echo "Major: $(major)"
      echo "Minor: $(minor)"
      echo "Patch: $(patch)"
      echo "Build Number: $(Build.BuildNumber)"
      echo "Source Branch: $(Build.SourceBranchName)"
    displayName: 'Display Version Info'
  - script: |
      echo "##vso[build.updatebuildnumber]$(major).$(minor).$(patch)"
    displayName: 'Update Build Number'
