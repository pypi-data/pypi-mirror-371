Metadata-Version: 2.3
Name: job-hive
Version: 0.1.8
Summary: ä¸€ä¸ªæç®€çš„åˆ†å¸ƒå¼ä»»åŠ¡æ¨¡å—
Author: YUNHAI
Author-email: bybxbwg@foxmail.com
Requires-Python: >=3.10,<4.0
Classifier: Programming Language :: Python :: 3
Classifier: Programming Language :: Python :: 3.10
Classifier: Programming Language :: Python :: 3.11
Classifier: Programming Language :: Python :: 3.12
Classifier: Programming Language :: Python :: 3.13
Provides-Extra: redis
Requires-Dist: redis (>=6.4.0,<7.0.0) ; extra == "redis"
Description-Content-Type: text/markdown

# Job Hive

[![PyPI version](https://badge.fury.io/py/job-hive.svg)](https://badge.fury.io/py/job-hive)

åŸºäºRediså®ç°çš„è½»é‡çº§åˆ†å¸ƒå¼ä»»åŠ¡é˜Ÿåˆ—ç³»ç»Ÿ

## ğŸš€ åŠŸèƒ½ç‰¹æ€§

- æ”¯æŒä»»åŠ¡æ¨é€ã€æ‰§è¡Œç”Ÿå‘½å‘¨æœŸç®¡ç†
- æä¾›Redisé˜Ÿåˆ—å®ç°ï¼ˆæ”¯æŒå¯†ç è®¤è¯ï¼‰
- ä¸Šä¸‹æ–‡ç®¡ç†å™¨ç®€åŒ–èµ„æºç®¡ç†
- æ”¯æŒä»»åŠ¡æ‰¹å¤„ç†ï¼ˆç¤ºä¾‹ä¸­å«å•ä»»åŠ¡æ¨é€ï¼‰

## ğŸ“¦ å®‰è£…ä¾èµ–

> ç›®å‰ä»…æ”¯æŒPython3.10+ï¼Œäº 0.1.3 ç‰ˆæœ¬åœ¨åŸæ¥ Redis çš„åŸºç¡€ä¸Šï¼ŒåŠ å…¥ç®€æ˜“ç‰ˆæœ¬çš„ Kafka æ”¯æŒ
> Kafka ç”±äºå±€é™æ€§äº 0.1.8 ç‰ˆæœ¬ç§»é™¤

ä½¿ç”¨ redis

```bash
pip install job_hive[redis]
```

ä½¿ç”¨ kafka

```bash
pip install job_hive[kafka]
```

## ğŸ› ï¸ ä½¿ç”¨ç¤ºä¾‹

```python
from job_hive import HiveWork
from job_hive.queue import RedisQueue

with HiveWork(queue=RedisQueue(
        name="test",
        host="your_redis_host",
        password="your_password"
)) as work:
    # ä½¿ç”¨work å¯¹è±¡è¿›è¡Œä»»åŠ¡æ¨é€æäº¤åˆ°ä»»åŠ¡æ± 
    jobs = [work.push(print, f"hello {i}") for i in range(5)]
    for job_id in jobs:
        print(f"Job ID: {job_id}")
    # å¯åŠ¨å·¥ä½œæ¨¡å¼æ¥æ”¶ä»»åŠ¡
    work.work(result_ttl=86400)  # result_ttl å‚æ•°è®¾ç½®ç»“æœä¿ç•™æ—¶é—´ï¼Œé»˜è®¤ä¸º24å°æ—¶
```

### Group ä»»åŠ¡ç»„ç¤ºä¾‹

ä¼˜åŒ–äº†ä»»åŠ¡ç»„æäº¤æ–¹å¼ï¼Œæ”¹è¿›å¤§é‡ä»»åŠ¡äº§ç”Ÿæ—¶çš„æ€§èƒ½ã€‚

```python
from job_hive.queue import RedisQueue
from job_hive import HiveWork
from job_hive import Group

work = HiveWork(queue=RedisQueue(name="test", host='192.168.11.157', password='yunhai'))


@work.delay_task()
def hello(index):
    print('ä½ æ˜¯', index)
    raise Exception('test')


if __name__ == '__main__':
    group = Group(
        hello(1),
        hello(2),
        hello(3),
        hello(4),
        hello(5),
    )
    work.group_commit(group)
    work.work(result_ttl=30)
```

## âš™ï¸ é…ç½®è¯´æ˜

```python
from job_hive.queue import RedisQueue

RedisQueue(
    name="é˜Ÿåˆ—åç§°",  # å¿…å¡«
    host="localhost",  # é»˜è®¤localhost
    port=6379,  # é»˜è®¤ç«¯å£
    password=None,  # å¯†ç ï¼ˆå¯é€‰ï¼‰
    db=0  # æ•°æ®åº“ç¼–å·ï¼Œé»˜è®¤ä¸º0
)
```

## ğŸ¤ è´¡çŒ®æŒ‡å—

1. Forkæœ¬ä»“åº“
2. åˆ›å»ºç‰¹æ€§åˆ†æ”¯ï¼ˆgit checkout -b feature/AmazingFeatureï¼‰
3. æäº¤ä¿®æ”¹ï¼ˆgit commit -m 'Add some AmazingFeature'ï¼‰
4. æ¨é€åˆ†æ”¯ï¼ˆgit push origin feature/AmazingFeatureï¼‰
5. å‘èµ·Pull Request

## ğŸ“„ è®¸å¯è¯

MIT License
