# Claude Code Notifier å¢å¼ºé…ç½®æ–‡ä»¶

# é€šçŸ¥æ¸ é“é…ç½®
channels:
  # é’‰é’‰æœºå™¨äºº
  dingtalk:
    enabled: false
    webhook: ""
    secret: ""
    
  # é£ä¹¦æœºå™¨äºº
  feishu:
    enabled: false
    webhook: ""
    secret: ""
    
  # ä¼ä¸šå¾®ä¿¡æœºå™¨äºº
  wechat_work:
    enabled: false
    webhook: ""
    
  # Telegram Bot
  telegram:
    enabled: false
    bot_token: ""
    chat_id: ""
    
  # é‚®ç®± SMTP
  email:
    enabled: false
    smtp_host: "smtp.gmail.com"
    smtp_port: 587
    sender: ""
    password: ""
    receivers: []
    use_tls: true
    
  # Serveré…±ï¼ˆå¾®ä¿¡æ¨é€ï¼‰
  serverchan:
    enabled: false
    send_key: ""
    api_url: "https://sctapi.ftqq.com"
    
  # Webhook é€šçŸ¥ï¼ˆé€šç”¨ HTTP å›è°ƒï¼‰
  webhook:
    enabled: false
    url: "https://api.example.com/webhook"
    method: "POST"                    # GET, POST, PUT, PATCH, DELETE
    content_type: "application/json"  # æ”¯æŒå¤šç§ MIME ç±»å‹
    timeout: 30                       # è¯·æ±‚è¶…æ—¶ï¼ˆç§’ï¼‰
    retry_count: 3                    # é‡è¯•æ¬¡æ•°
    retry_delay: 2                    # é‡è¯•å»¶è¿Ÿï¼ˆç§’ï¼‰
    
    # è®¤è¯é…ç½®
    auth:
      type: "none"                    # none, bearer, basic, api_key, custom
      # Bearer Token ç¤ºä¾‹
      # type: "bearer"
      # token: "your_bearer_token"
      # Basic Auth ç¤ºä¾‹  
      # type: "basic"
      # username: "user"
      # password: "pass"
      # API Key ç¤ºä¾‹
      # type: "api_key"
      # key_name: "X-API-Key"
      # key_value: "your_api_key"
      
    # è‡ªå®šä¹‰ Headers
    headers:
      User-Agent: "Claude-Code-Notifier/1.0"
      # X-Custom-Header: "custom_value"
      
    # æ¶ˆæ¯æ ¼å¼é…ç½®
    message_format:
      template: "default"             # default, slack, discord, custom
      include_metadata: true
      timestamp_format: "iso"         # iso, unix, rfc3339
      
    # å®‰å…¨é…ç½®
    security:
      verify_ssl: true
      allow_redirects: false
      max_content_length: 1048576     # 1MB é™åˆ¶

# å†…ç½®äº‹ä»¶é…ç½®
events:
  # æ•æ„Ÿæ“ä½œæ£€æµ‹äº‹ä»¶
  sensitive_operation:
    enabled: true
    priority: high  # low, normal, high, critical
    channels: []    # ç©ºæ•°ç»„è¡¨ç¤ºä½¿ç”¨é»˜è®¤æ¸ é“ï¼Œå¯æŒ‡å®š ["dingtalk", "telegram"]
    template: "sensitive_operation_default"  # æ¨¡æ¿åç§°
    cooldown: 60    # å†·å´æ—¶é—´ï¼ˆç§’ï¼‰ï¼Œé¿å…é‡å¤é€šçŸ¥
    conditions:     # é™„åŠ æ¡ä»¶
      risk_levels: ["medium", "high"]  # åªé€šçŸ¥ä¸­é«˜é£é™©æ“ä½œ
      
  # ä»»åŠ¡å®Œæˆäº‹ä»¶
  task_completion:
    enabled: true
    priority: normal
    channels: []
    template: "task_completion_default"
    delay: 3        # å»¶è¿Ÿæ—¶é—´ï¼ˆç§’ï¼‰ï¼Œç¡®ä¿ä»»åŠ¡çœŸæ­£å®Œæˆ
    conditions:
      min_duration: 5  # æœ€å°æŒç»­æ—¶é—´ï¼ˆç§’ï¼‰ï¼Œé¿å…çŸ­ä»»åŠ¡é€šçŸ¥
      
  # Claude é™æµå†·å´äº‹ä»¶
  rate_limit:
    enabled: true
    priority: critical
    channels: []
    template: "rate_limit_default"
    conditions:
      notify_immediately: true  # ç«‹å³é€šçŸ¥
      
  # é”™è¯¯å‘ç”Ÿäº‹ä»¶
  error_occurred:
    enabled: true
    priority: high
    channels: []
    template: "error_default"
    conditions:
      error_types: ["network", "permission", "timeout"]  # åªé€šçŸ¥ç‰¹å®šç±»å‹é”™è¯¯
      
  # ä¼šè¯å¼€å§‹äº‹ä»¶
  session_start:
    enabled: false   # é»˜è®¤ç¦ç”¨ï¼Œé¿å…é¢‘ç¹é€šçŸ¥
    priority: low
    channels: []
    template: "session_start_default"

# è‡ªå®šä¹‰äº‹ä»¶é…ç½®
custom_events:
  # è‡ªå®šä¹‰äº‹ä»¶ç¤ºä¾‹1ï¼šä»£ç æäº¤æ£€æµ‹
  git_commit_detected:
    enabled: false
    priority: normal
    channels: ["dingtalk"]
    template: "git_commit_custom"
    trigger:
      type: "pattern_match"     # always, hook_event, tool_name, pattern_match, condition
      pattern: "git\\s+commit"
      extract_fields: ["tool_input", "project"]
    message:
      title: "ğŸ“ ä»£ç æäº¤æ£€æµ‹"
      content: "æ£€æµ‹åˆ°ä»£ç æäº¤æ“ä½œ"
      action: "è¯·ç¡®è®¤æäº¤å†…å®¹æ˜¯å¦æ­£ç¡®"
      
  # è‡ªå®šä¹‰äº‹ä»¶ç¤ºä¾‹2ï¼šç”Ÿäº§ç¯å¢ƒæ“ä½œ
  production_operation:
    enabled: false
    priority: critical
    channels: ["dingtalk", "telegram"]
    template: "production_alert_custom"
    trigger:
      type: "condition"
      condition: "'prod' in project.lower() or 'production' in tool_input.lower()"
      extract_fields: ["tool_name", "tool_input", "project"]
    message:
      title: "ğŸš¨ ç”Ÿäº§ç¯å¢ƒæ“ä½œè­¦å‘Š"
      content: "æ£€æµ‹åˆ°ç”Ÿäº§ç¯å¢ƒç›¸å…³æ“ä½œ"
      action: "è¯·è°¨æ…æ“ä½œå¹¶ç¡®è®¤æ— è¯¯"

# é€šçŸ¥è®¾ç½®
notifications:
  # é»˜è®¤é€šçŸ¥æ¸ é“ï¼ˆå½“äº‹ä»¶æ²¡æœ‰æŒ‡å®šæ¸ é“æ—¶ä½¿ç”¨ï¼‰
  default_channels: []
  
  # é€šçŸ¥é¢‘ç‡é™åˆ¶
  rate_limiting:
    enabled: true
    max_per_minute: 10        # æ¯åˆ†é’Ÿæœ€å¤§é€šçŸ¥æ•°
    max_per_hour: 60          # æ¯å°æ—¶æœ€å¤§é€šçŸ¥æ•°
    cooldown_events: []       # éœ€è¦å†·å´çš„äº‹ä»¶åˆ—è¡¨
    
  # é€šçŸ¥æ—¶é—´çª—å£
  time_windows:
    enabled: false
    quiet_hours:              # é™é»˜æ—¶é—´
      start: "22:00"
      end: "08:00"
      timezone: "Asia/Shanghai"
    working_hours:            # å·¥ä½œæ—¶é—´åŠ å¼ºé€šçŸ¥
      start: "09:00"
      end: "18:00"
      priority_boost: true    # å·¥ä½œæ—¶é—´å†…æå‡é€šçŸ¥ä¼˜å…ˆçº§
      
  # é€šçŸ¥åˆ†ç»„
  grouping:
    enabled: true
    group_window: 300         # åˆ†ç»„æ—¶é—´çª—å£ï¼ˆç§’ï¼‰
    max_group_size: 5         # æœ€å¤§åˆ†ç»„æ•°é‡
    similar_events: true      # ç›¸ä¼¼äº‹ä»¶åˆ†ç»„

# æ¨¡æ¿è®¾ç½®
templates:
  # è‡ªå®šä¹‰æ¨¡æ¿ç›®å½•
  custom_dir: "~/.claude-notifier/templates"
  
  # æ¨¡æ¿ç¼“å­˜
  cache_enabled: true
  cache_ttl: 3600             # ç¼“å­˜æ—¶é—´ï¼ˆç§’ï¼‰
  
  # æ¨¡æ¿å˜é‡
  global_variables:
    company_name: "My Company"
    support_email: "support@company.com"
    dashboard_url: "https://dashboard.company.com"

# é«˜çº§è®¾ç½®
advanced:
  # æ—¥å¿—è®¾ç½®
  logging:
    enabled: true
    level: "info"              # debug, info, warn, error
    file: "~/.claude-notifier/logs/notifier.log"
    max_size_mb: 10
    backup_count: 5
    
  # äº‹ä»¶å¤„ç†
  event_processing:
    async_enabled: true       # å¼‚æ­¥å¤„ç†äº‹ä»¶
    queue_size: 100          # äº‹ä»¶é˜Ÿåˆ—å¤§å°
    worker_threads: 2        # å·¥ä½œçº¿ç¨‹æ•°
    
  # é‡è¯•æœºåˆ¶
  retry:
    enabled: true
    max_attempts: 3
    backoff_factor: 2        # é€€é¿å› å­
    initial_delay: 1         # åˆå§‹å»¶è¿Ÿï¼ˆç§’ï¼‰
    
  # ç›‘æ§å’Œç»Ÿè®¡
  monitoring:
    enabled: true
    stats_file: "~/.claude-notifier/stats.json"
    metrics_interval: 60     # ç»Ÿè®¡é—´éš”ï¼ˆç§’ï¼‰

# Claudeä½¿ç”¨ç»Ÿè®¡ï¼ˆå¯é€‰åŠŸèƒ½ï¼‰
statistics:
  # æ˜¯å¦å¯ç”¨ç»Ÿè®¡åŠŸèƒ½
  enabled: false
  
  # ccusageé›†æˆï¼ˆéœ€è¦å•ç‹¬å®‰è£…: npm install -g ccusageï¼‰
  ccusage:
    enabled: false           # æ˜¯å¦ä½¿ç”¨ccusageè¿›è¡Œç»Ÿè®¡
    auto_install: false      # æ˜¯å¦è‡ªåŠ¨å®‰è£…ccusageï¼ˆä¸æ¨èï¼‰
    tracking:
      tokens: true           # è·Ÿè¸ªTokenä½¿ç”¨
      costs: true            # è·Ÿè¸ªæˆæœ¬
      rate_limits: true      # è·Ÿè¸ªé™æµçŠ¶æ€
    notifications:
      daily_summary: false   # æ¯æ—¥ä½¿ç”¨æ‘˜è¦
      cost_alerts: false     # æˆæœ¬è­¦å‘Š
      rate_limit_warnings: true  # é™æµè­¦å‘Š
      thresholds:
        daily_cost: 10.0     # æ—¥æˆæœ¬è­¦å‘Šé˜ˆå€¼ï¼ˆç¾å…ƒï¼‰
        monthly_cost: 100.0  # æœˆæˆæœ¬è­¦å‘Šé˜ˆå€¼ï¼ˆç¾å…ƒï¼‰
  
  # å†…ç½®ç»Ÿè®¡ï¼ˆè½»é‡çº§ï¼Œæ— éœ€å¤–éƒ¨ä¾èµ–ï¼‰
  builtin:
    enabled: true            # ä½¿ç”¨å†…ç½®ç»Ÿè®¡
    track_events: true       # è·Ÿè¸ªäº‹ä»¶ç»Ÿè®¡
    track_notifications: true # è·Ÿè¸ªé€šçŸ¥ç»Ÿè®¡
    track_sessions: true     # è·Ÿè¸ªä¼šè¯ç»Ÿè®¡
    reports:
      daily: false           # æ¯æ—¥æŠ¥å‘Š
      weekly: false          # å‘¨æŠ¥
      monthly: false         # æœˆæŠ¥

# æ’ä»¶å’Œæ‰©å±•
plugins:
  # è‡ªå®šä¹‰æ’ä»¶ç›®å½•
  plugin_dir: "~/.claude-notifier/plugins"
  
  # å¯ç”¨çš„æ’ä»¶
  enabled_plugins: []
  
  # æ’ä»¶é…ç½®
  plugin_configs: {}

# å®‰å…¨è®¾ç½®
security:
  # æ•æ„Ÿä¿¡æ¯åŠ å¯†
  encryption:
    enabled: false
    algorithm: "AES-256"
    
  # è®¿é—®æ§åˆ¶
  access_control:
    enabled: false
    allowed_users: []
    
  # å®¡è®¡æ—¥å¿—
  audit:
    enabled: true
    audit_file: "~/.claude-notifier/logs/audit.log"
