"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[964],{5127:(e,s,t)=>{t.d(s,{A0:()=>i,BF:()=>r,Hj:()=>o,XI:()=>a,nA:()=>d,nd:()=>c});var l=t(5155);t(2115);var n=t(9434);function a(e){let{className:s,...t}=e;return(0,l.jsx)("div",{"data-slot":"table-container",className:"relative w-full overflow-x-auto",children:(0,l.jsx)("table",{"data-slot":"table",className:(0,n.cn)("w-full caption-bottom text-sm",s),...t})})}function i(e){let{className:s,...t}=e;return(0,l.jsx)("thead",{"data-slot":"table-header",className:(0,n.cn)("[&_tr]:border-b",s),...t})}function r(e){let{className:s,...t}=e;return(0,l.jsx)("tbody",{"data-slot":"table-body",className:(0,n.cn)("[&_tr:last-child]:border-0",s),...t})}function o(e){let{className:s,...t}=e;return(0,l.jsx)("tr",{"data-slot":"table-row",className:(0,n.cn)("hover:bg-muted/50 data-[state=selected]:bg-muted border-b transition-colors",s),...t})}function c(e){let{className:s,...t}=e;return(0,l.jsx)("th",{"data-slot":"table-head",className:(0,n.cn)("text-foreground h-10 px-2 text-left align-middle font-medium whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",s),...t})}function d(e){let{className:s,...t}=e;return(0,l.jsx)("td",{"data-slot":"table-cell",className:(0,n.cn)("p-2 align-middle whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",s),...t})}},6964:(e,s,t)=>{t.r(s),t.d(s,{default:()=>er});var l=t(5155),n=t(2115),a=t(6695),i=t(6126),r=t(6051),o=t(7778),c=t(2055),d=t(342),u=t(9434),x=t(793),p=t(5196),m=t(4357),h=t(9397),f=t(5127),j=t(285),g=t(6671),y=t(3052),v=t(8686);function b(e){let{label:s,value:t,depth:n=0,path:a="",expandedMap:i,setExpandedMap:o}=e,c=Array.isArray(t),d="object"==typeof t&&null!==t&&!c,u=i[a]||!1;return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)(f.Hj,{onClick:()=>{(c||d)&&o({...i,[a]:!u})},className:"hover:bg-zinc-800/60 transition-colors cursor-pointer",style:{borderColor:r.zq},children:[(0,l.jsx)(f.nA,{style:{paddingLeft:16*n},children:(0,l.jsxs)("div",{className:"flex items-center",children:[c||d?(0,l.jsx)(y.A,{className:"w-4 h-4 mr-1 transition-transform duration-200 ease-in-out ".concat(u?"rotate-90":""),style:{color:r.zq}}):(0,l.jsx)("span",{className:"w-4 h-4 mr-1"}),s&&(0,l.jsx)("span",{className:"font-medium",style:{color:n>0?"#de4ba6":r.zq},children:s})]})}),(0,l.jsxs)(f.nA,{children:[!c&&!d&&(0,l.jsx)("span",{style:{color:r.zq},children:String(t)}),c&&(0,l.jsxs)("span",{className:"text-gray-700 italic select-none",children:["[",t.length,"]"]}),d&&(0,l.jsx)("span",{className:"text-gray-700 italic select-none",children:"{...}"})]})]}),(c||d)&&u&&(0,l.jsx)(l.Fragment,{children:c?t.map((e,s)=>(0,l.jsx)(b,{label:"[".concat(s,"]"),value:e,depth:n+1,path:"".concat(a,"[").concat(s,"]"),expandedMap:i,setExpandedMap:o},s)):Object.entries(t).map(e=>{let[s,t]=e;return(0,l.jsx)(b,{label:s,value:t,depth:n+1,path:"".concat(a,".").concat(s),expandedMap:i,setExpandedMap:o},s)})})]})}function N(e){let s,{encoded:t,name:a}=e,[i,o]=(0,n.useState)({});try{s=(0,v.D)(t instanceof ArrayBuffer?new Uint8Array(t):t)}catch(e){return(0,l.jsx)(f.Hj,{className:"hover:bg-zinc-800/60 transition-colors",style:{borderColor:r.zq},children:(0,l.jsxs)(f.nA,{colSpan:2,className:"text-red-500",children:["Failed to decode MsgPack: ",String(e)]})},String(t))}return(0,l.jsx)(f.XI,{children:(0,l.jsx)(f.BF,{children:(0,l.jsx)(b,{label:a,value:s,depth:0,path:a,expandedMap:i,setExpandedMap:o})})})}function w(e){let{dataKey:s,value:t,copiedKey:n,copyToClipboard:a}=e,i=void 0===t.value?"":String((0,x.hK)(t.value));return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(f.nA,{className:"font-medium",children:s}),(0,l.jsx)(f.nA,{className:"truncate max-w-xs",children:i}),(0,l.jsx)(f.nA,{className:"text-right",children:i&&(0,l.jsx)(j.$,{variant:"ghost",size:"icon",onClick:()=>a(s,i),className:"hover:bg-zinc-700 rounded-xl cursor-pointer",children:n===s?(0,l.jsx)(p.A,{className:"h-4 w-4",style:{color:r.zq}}):(0,l.jsx)(m.A,{className:"h-4 w-4",style:{color:r.zq}})})})]})}function z(e){let{results:s}=e,[t,i]=(0,n.useState)(null),o=(e,s)=>{navigator.clipboard.writeText(s),i(e),g.o.success("Copied to clipboard!",{duration:1e3,style:{color:r.zq,backgroundColor:"rgb(30, 30, 30)",border:"none"}}),setTimeout(()=>i(null),1500)};return(0,l.jsx)(l.Fragment,{children:(0,l.jsx)(a.Zp,{style:{backgroundColor:r.pk},className:"border-gray-700 min-h-0 flex flex-col shadow-lg rounded-2xl",children:(0,l.jsx)(a.Wu,{className:(0,u.cn)("flex-grow flex min-h-132 overflow-x-auto",s&&s.size>0?"":"items-center justify-center"),style:{color:r.zq},children:(0,l.jsxs)("div",{className:"flex-grow flex-col",children:[s&&s.size>0&&(0,l.jsxs)("div",{className:"text-center justify-center flex font-bold flex-col",style:{color:r.zq},children:[(0,l.jsxs)("div",{className:"flex items-center gap-2 justify-center",children:[(0,l.jsx)(h.A,{className:"w-5 opacity-50",style:{color:r.zq}}),(0,l.jsx)("h1",{className:"text-2xl",children:"Pipeline Results"})]}),(0,l.jsx)("div",{className:"flex h-1 w-full rounded-full mt-2",style:{backgroundColor:r.zq}})]}),s&&s.size>0?(0,l.jsx)(f.XI,{children:(0,l.jsx)(f.BF,{children:Array.from(s.entries()).map(e=>{let[s,n]=e;return n.isMsgpack?(0,l.jsx)(f.Hj,{className:"hover:bg-zinc-800/60 transition-colors",style:{borderColor:r.zq},children:(0,l.jsx)(f.nA,{colSpan:3,children:(0,l.jsx)(N,{encoded:n.value.bytesValue,name:s})})},s):(0,l.jsx)(f.Hj,{className:"hover:bg-zinc-800/60 transition-colors",style:{borderColor:r.zq},children:(0,l.jsx)(w,{dataKey:s,value:n,copiedKey:t,copyToClipboard:o})},s)})})}):(0,l.jsxs)("div",{className:"text-center",children:[(0,l.jsx)(h.A,{className:"w-16 h-16 mx-auto mb-2 opacity-50"}),(0,l.jsx)("p",{className:"select-none",children:"Pipeline Results"}),(0,l.jsx)("p",{className:"text-sm select-none",children:"Results will appear here"})]})]})})})})}var S=t(6877),E=t(3717),P=t(8564),C=t(4020),A=t(4616),k=t(2525),T=t(8698);function _(e){let{...s}=e;return(0,l.jsx)(T.bL,{"data-slot":"dropdown-menu",...s})}function q(e){let{...s}=e;return(0,l.jsx)(T.l9,{"data-slot":"dropdown-menu-trigger",...s})}function I(e){let{className:s,sideOffset:t=4,...n}=e;return(0,l.jsx)(T.ZL,{children:(0,l.jsx)(T.UC,{"data-slot":"dropdown-menu-content",sideOffset:t,className:(0,u.cn)("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 max-h-(--radix-dropdown-menu-content-available-height) min-w-[8rem] origin-(--radix-dropdown-menu-content-transform-origin) overflow-x-hidden overflow-y-auto rounded-md border p-1 shadow-md",s),...n})})}function O(e){let{className:s,inset:t,variant:n="default",...a}=e;return(0,l.jsx)(T.q7,{"data-slot":"dropdown-menu-item","data-inset":t,"data-variant":n,className:(0,u.cn)("focus:bg-accent focus:text-accent-foreground data-[variant=destructive]:text-destructive data-[variant=destructive]:focus:bg-destructive/10 dark:data-[variant=destructive]:focus:bg-destructive/20 data-[variant=destructive]:focus:text-destructive data-[variant=destructive]:*:[svg]:!text-destructive [&_svg:not([class*='text-'])]:text-muted-foreground relative flex cursor-default items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 data-[inset]:pl-8 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",s),...a})}var R=t(678),M=t(9076),V=t(1071),L=t(4416),$=t(1035),D=t(1222),B=t(6335);function F(e){let{visible:s,setVisible:t,pipelineTypes:a,socket:i,index:o}=e,[d,u]=(0,n.useState)(Array.from(a.values())[0]),[x,m]=(0,n.useState)("New Pipeline");return(0,l.jsxs)($.L,{visible:s,onClose:()=>t(!1),className:"w-[40vw] h-[30vh] -translate-y-40",children:[(0,l.jsxs)(c.V,{gap:"gap-2",children:[(0,l.jsx)(D.A,{label:"Pipeline Name",value:x,onChange:m,textSize:"text-xl"}),(0,l.jsx)(R.m,{label:"Pipeline Type",textSize:"text-xl",value:d,onValueChange:u,options:Array.from(a.values().filter(e=>!(e.type.startsWith("$$")&&e.type.endsWith("$$")))).map(e=>({label:e.type,value:e}))}),(0,l.jsxs)("h2",{className:"text-xl text-center",style:{color:r.zq},children:["Pipeline Index: #",o]})]}),(0,l.jsx)("div",{className:"h-5"}),(0,l.jsxs)(c.f,{gap:"gap-2 pt-4 items-center justify-center",children:[(0,l.jsx)(j.$,{disabled:0===x.length,variant:"outline",className:"rounded-md bg-zinc-900 hover:bg-zinc-700 text-lg cursor-pointer",style:{borderColor:r.Cz,color:r.zq},onClick:()=>{t(!1);let e=B.wS.create({type:B.sE.MESSAGE_TYPE_PROTO_ADD_PIPELINE,pipelineInfo:M.hz.create({name:x,type:d.type,index:o===-1/0?0:o,settingsValues:{}})}),s=B.wS.encode(e).finish();null==i||i.sendBinary(s)},children:(0,l.jsxs)("span",{className:"flex items-center gap-2",children:[(0,l.jsx)(p.A,{}),"Add Pipeline"]})}),(0,l.jsx)(j.$,{variant:"outline",className:"rounded-md bg-zinc-900 hover:bg-zinc-700 text-lg cursor-pointer",style:{borderColor:r.Cz,color:r.zq},onClick:()=>t(!1),children:(0,l.jsxs)("span",{className:"flex items-center gap-2",children:[(0,l.jsx)(L.A,{}),"Close"]})})]})]})}function G(e){let{visible:s,setVisible:t,requestedType:n,currentType:a,setPipelineType:i}=e;return(0,l.jsx)($.L,{visible:s,onClose:()=>t(!1),className:"w-[40vw] h-[30vh] -translate-y-40",children:(0,l.jsxs)(c.V,{gap:"gap-2",children:[(0,l.jsxs)("h1",{className:"text-center text-3xl",style:{color:r.zq},children:["Are you sure you want to switch pipeline type from",(0,l.jsxs)("span",{className:"font-semibold text-blue-300",children:[" ",null==a?void 0:a.type," "]}),"to",(0,l.jsxs)("span",{className:"font-semibold text-yellow-400",children:[" ",null==n?void 0:n.type," "]}),"?"]}),(0,l.jsx)("h1",{className:"text-lg text-center",style:{color:r.zq},children:"This action will result in all the current pipeline settings being deleted and becoming the defaults for the new pipleine"}),(0,l.jsx)("div",{className:"h-4"}),(0,l.jsx)(j.$,{variant:"outline",size:"sm",className:"rounded-md cursor-pointer bg-green-600 hover:bg-green-500 border-none",onClick:()=>{null==i||i(n),t(!1)},children:(0,l.jsxs)("span",{className:"flex items-center justify-center gap-2 font-bold",style:{color:"black"},children:[(0,l.jsx)(p.A,{}),"Confirm"]})}),(0,l.jsx)(j.$,{variant:"outline",size:"sm",className:"rounded-md cursor-pointer bg-red-600 hover:bg-red-500 border-none",onClick:()=>t(!1),children:(0,l.jsxs)("span",{className:"flex items-center justify-center gap-2",style:{color:"black"},children:[(0,l.jsx)(L.A,{}),"Cancel"]})})]})})}var Y=t(1243),W=t(4126);function Z(e){let{visible:s,setVisible:t,socket:n,pipelineToBeDeleted:a,onRemovePipeline:i}=e;return(0,l.jsx)($.L,{visible:s,onClose:()=>t(!1),className:"w-[40vw] h-[30vh] -translate-y-40",children:(0,l.jsxs)(c.V,{children:[(0,l.jsxs)("h2",{className:"text-2xl flex items-center gap-2 text-center",children:[(0,l.jsx)(Y.A,{className:"text-yellow-400"}),(0,l.jsx)("span",{className:"text-yellow-400 text-2xl",children:"Warning:"})]}),(0,l.jsxs)("span",{style:{color:r.zq},className:"text-2xl text-center",children:["This action will delete the ",null==a?void 0:a.name," Pipeline and will not be able to be restored"]}),(0,l.jsx)("div",{className:"h-5"}),(0,l.jsxs)(c.V,{gap:"gap-2",style:{color:r.zq},children:[(0,l.jsx)(j.$,{variant:"outline",className:"rounded-md bg-zinc-800 hover:bg-zinc-700 text-lg cursor-pointer",style:{color:r.zq},onClick:()=>{if(a){let e=B.wS.create({type:B.sE.MESSAGE_TYPE_PROTO_DELETE_PIPELINE,removePipelineIndex:null==a?void 0:a.index}),s=B.wS.encode(e).finish();null==n||n.sendBinary(s),i(a)}t(!1)},children:(0,l.jsxs)("span",{className:"flex items-center gap-2",children:[(0,l.jsx)(W.A,{}),"Delete Pipeline"]})}),(0,l.jsx)(j.$,{variant:"outline",className:"rounded-md bg-zinc-800 hover:bg-zinc-700 text-lg cursor-pointer",style:{color:r.zq},onClick:()=>t(!1),children:(0,l.jsxs)("span",{className:"flex items-center gap-2",children:[(0,l.jsx)(L.A,{}),"Cancel"]})})]})]})})}function H(e){var s;let{setSelectedPipeline:t,selectedPipeline:i,selectedPipelineType:o,setSelectedPipelineType:d,selectedCamera:u,setSelectedCamera:x,cameras:p,socket:h,pipelines:f,setpipelines:g,pipelinetypes:y}=e,[v,b]=(0,n.useState)(!1),[N,w]=(0,n.useState)(!1),[z,T]=(0,n.useState)(!1),[L,$]=(0,n.useState)(void 0),[Y,W]=(0,n.useState)(!1),[H,U]=(0,n.useState)("New Pipeline");return(0,n.useEffect)(()=>{i&&Y&&U(i.name)},[Y]),(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(a.Zp,{style:{backgroundColor:r.pk,color:r.zq},className:"border-gray-700",children:(0,l.jsxs)(a.Wu,{className:"space-y-3",children:[(0,l.jsx)("div",{className:"space-y-0",children:(0,l.jsx)(R.m,{value:u,onValueChange:e=>{x(e)},label:"Camera",options:Array.from(null!=(s=null==p?void 0:p.values())?s:[]).map(e=>({label:(0,l.jsx)("span",{children:e.name}),value:e,key:e.name}))})}),(0,l.jsx)(c.f,{gap:"gap-2",className:"items-center",children:Y?(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(D.A,{value:H,onChange:e=>U(e),label:"Pipeline Name"}),(0,l.jsx)(j.$,{variant:"outline",size:"sm",className:"rounded-md cursor-pointer bg-zinc-900 hover:bg-zinc-700",style:{borderColor:r.Cz,color:r.zq},onClick:()=>{W(!1)},children:(0,l.jsx)(S.A,{className:"w-4 h-4",style:{color:r.zq}})}),(0,l.jsx)(j.$,{variant:"outline",size:"sm",className:"rounded-md cursor-pointer bg-zinc-900 hover:bg-zinc-700",style:{borderColor:r.Cz,color:r.zq},onClick:()=>{if(i){let e=B.wS.create({type:B.sE.MESSAGE_TYPE_PROTO_SET_PIPELINE_NAME,setPipelineName:M.ZC.create({name:H,pipelineIndex:i.index})}),s=B.wS.encode(e).finish();null==h||h.sendBinary(s)}W(!1)},children:(0,l.jsx)(E.A,{className:"w-4 h-4",style:{color:r.zq}})})]}):(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(R.m,{label:"Pipeline",value:i,onValueChange:e=>t(e),options:Array.from(f.entries()).map(e=>{let[s,t]=e;return{label:(0,l.jsxs)("span",{className:"inline-flex items-center gap-2",children:[null==t?void 0:t.name," (#",s,")"," ",(null==u?void 0:u.defaultPipeline)==t.index?(0,l.jsx)(P.A,{className:"w-4 h-4 text-yellow-500",fill:"yellow"}):void 0]}),value:t,key:t.index.toString()}})}),(0,l.jsxs)(_,{children:[(0,l.jsx)(q,{asChild:!0,children:(0,l.jsx)(j.$,{variant:"outline",size:"sm",className:"rounded-md cursor-pointer bg-zinc-900 hover:bg-zinc-700",style:{borderColor:r.Cz,color:r.zq},children:(0,l.jsx)(C.A,{className:"w-4 h-4",style:{color:r.zq}})})}),(0,l.jsx)(I,{side:"bottom",align:"end",alignOffset:20,className:"rounded-md shadow-lg bg-zinc-800",style:{borderColor:r.Cz,borderWidth:"1px"},children:[{icon:(0,l.jsx)(E.A,{className:"w-4 h-4",style:{color:r.zq}}),label:"Rename",action:()=>W(!0),disabled:()=>void 0===i},{icon:(0,l.jsx)(A.A,{className:"w-4 h-4",style:{color:r.zq}}),label:"Add Pipeline",action:()=>b(!0),disabled:()=>!1},{icon:(0,l.jsx)(P.A,{className:"w-4 h-4",style:{color:r.zq}}),label:"Set As Default",action:()=>{if(i&&u){let e=B.wS.create({type:B.sE.MESSAGE_TYPE_PROTO_SET_DEFAULT_PIPELINE,setDefaultPipeline:V.PH.create({cameraIndex:u.index,pipelineIndex:i.index})}),s=B.wS.encode(e).finish();null==h||h.sendBinary(s)}},disabled:()=>void 0===i},{icon:(0,l.jsx)(m.A,{className:"w-4 h-4",style:{color:r.zq}}),label:"Duplicate",disabled:()=>void 0===i,action:()=>{if(i&&o){var e;let s=B.wS.create({type:B.sE.MESSAGE_TYPE_PROTO_ADD_PIPELINE,pipelineInfo:M.hz.create({name:"Copy Of ".concat(i.name),type:o.type,index:Math.max(...Array.from(f.keys()))+1,settingsValues:null!=(e=i.settingsValues)?e:{}})}),t=B.wS.encode(s).finish();null==h||h.sendBinary(t)}}},{icon:(0,l.jsx)(k.A,{className:"w-4 h-4",style:{color:r.zq}}),label:"Delete",action:()=>T(!0),disabled:()=>void 0===i||i.index==(null==u?void 0:u.defaultPipeline)}].map(e=>{let{icon:s,label:t,action:n,disabled:a}=e;return(0,l.jsxs)(O,{disabled:a(),className:"flex items-center gap-2 text-sm font-medium px-3 py-2 rounded-md cursor-pointer",style:{color:r.zq,transition:"background 0.15s ease"},onClick:n,onMouseEnter:e=>e.currentTarget.style.backgroundColor=r.CD,onMouseLeave:e=>e.currentTarget.style.backgroundColor="transparent",children:[s,t]},t)})})]})]})}),(0,l.jsx)(R.m,{label:"Pipeline Type",value:o,onValueChange:e=>{$(e),w(!0)},options:Array.from(y.values()).filter(e=>!(e.type.startsWith("$$")&&e.type.endsWith("$$"))).map(e=>({label:e.type,value:e,key:e.type}))})]})}),v&&(0,l.jsx)(F,{visible:v,pipelineTypes:y,setVisible:b,socket:h,index:Math.max(...Array.from(f.keys()))+1}),(0,l.jsx)(G,{visible:N,setVisible:w,requestedType:L,currentType:o,setPipelineType:e=>{if(d(e),i&&o){var s,t;let l=B.wS.create({type:B.sE.MESSAGE_TYPE_PROTO_ADD_PIPELINE,pipelineInfo:M.hz.create({name:i.name,type:null!=(s=null==e?void 0:e.type)?s:i.type,index:i.index,settingsValues:null!=(t=i.settingsValues)?t:{}})}),n=B.wS.encode(l).finish();null==h||h.sendBinary(n)}}}),z&&(0,l.jsx)(Z,{visible:z,setVisible:T,socket:h,pipelineToBeDeleted:i,onRemovePipeline:e=>{f.delete(e.index),g(f)}})]})}var U=t(704),X=t(4355),K=t(381);function J(e){var s;let{selectedPipeline:t,selectedPipelineType:i,backendConnected:o,setSetting:c,setPipelines:u,pipelines:p,locked:m}=e,[h,f]=(0,n.useState)([]),[j,g]=(0,n.useState)([]);function y(){if(!i||!o){f([]),g([]);return}let e=[],s=[];i.settings.forEach(n=>{var a,i;let r=(0,l.jsx)(x.Nv,{setting:n,setValue:e=>{(0,d.sG)(e)&&(setTimeout(()=>{if(void 0!==t){let s={...t.settingsValues,[n.name]:e},l={...t,settingsValues:s},a=new Map(p);a.set(t.index,l),u(a)}},0),setTimeout(()=>{c(e,n.name,t)},0))},value:null!=(i=null!=(a=null==t?void 0:t.settingsValues[n.name])?a:n.default)?i:(0,x.vR)(""),defaultValue:n.default,locked:m},n.name+n.category);"Camera Properties"===n.category?e.push(r):s.push(r)}),f(e),g(s)}return(0,n.useEffect)(()=>{y()},[i,t,o,m]),(0,n.useEffect)(()=>{y()},[m]),(0,l.jsx)(a.Zp,{style:{backgroundColor:r.pk},className:"border-gray-700 flex-grow overflow-auto",children:(0,l.jsx)(a.aR,{children:(0,l.jsxs)(U.tU,{defaultValue:"input",className:"w-full",style:{color:r.zq},children:[(0,l.jsxs)(U.j7,{className:"grid w-full grid-cols-2 border-gray-600 rounded-xl gap-2",style:{backgroundColor:r.pk},children:[(0,l.jsx)(U.Xi,{value:"input",className:"bg-zinc-800 rounded-md data-[state=active]:bg-pink-800 hover:bg-zinc-700 transition-colors duration-200 cursor-pointer h-8",children:"Input"}),(0,l.jsx)(U.Xi,{value:"pipeline",className:"bg-zinc-800 rounded-md data-[state=active]:bg-pink-800 hover:bg-zinc-700 transition-colors duration-200 cursor-pointer",children:null!=(s=null==i?void 0:i.type)?s:"Pipeline"})]}),(0,l.jsx)(U.av,{value:"input",className:"p-6 space-y-6",children:(0,l.jsx)("div",{style:{color:r.zq},children:h.length>0?(0,l.jsx)("div",{className:"space-y-2",children:h}):(0,l.jsxs)("div",{className:"text-center",style:{color:r.zq},children:[(0,l.jsx)(X.A,{className:"w-16 h-16 mx-auto mb-2 opacity-50"}),(0,l.jsx)("p",{className:"select-none",children:"Camera Settings"}),(0,l.jsx)("p",{className:"text-sm select-none",children:"Configure camera parameters"})]})})}),(0,l.jsx)(U.av,{value:"pipeline",className:"p-6 space-y-6",children:(0,l.jsx)("div",{style:{color:r.zq},children:j.length>0?(0,l.jsx)("div",{className:"space-y-2",children:j}):(0,l.jsxs)("div",{className:"text-center",style:{color:r.zq},children:[(0,l.jsx)(K.A,{className:"w-16 h-16 mx-auto mb-2 opacity-50"}),(0,l.jsx)("p",{className:"select-none",children:"Pipeline Settings"}),(0,l.jsx)("p",{className:"text-sm select-none",children:"Configure pipeline-specific parameters"})]})})})]})})})}var Q=t(4229),ee=t(430),es=t(2919),et=t(5203),el=t(9803);function en(e){let{icon:s,text:t,onClick:n}=e;return(0,l.jsx)(j.$,{variant:"outline",className:"rounded-md cursor-pointer bg-gray-800 hover:bg-gray-700 border-none h-full",onClick:n,children:(0,l.jsxs)("span",{className:"flex items-center justify-center gap-2 text-lg",style:{color:r.zq},children:[s,t]})})}function ea(e){let{locked:s,setLocked:t,save:n,recordingStatus:i,setRecordingStatus:o}=e;return(0,l.jsx)(a.Zp,{style:{backgroundColor:r.pk},className:"border-gray-700 flex flex-col h-full p-2",children:(0,l.jsx)(a.Wu,{children:(0,l.jsxs)(c.f,{gap:"gap-4",justify:"center",children:[(0,l.jsx)(en,{text:"Save",icon:(0,l.jsx)(Q.A,{className:"size-10"}),onClick:n}),s?(0,l.jsx)(en,{text:"Unlock",icon:(0,l.jsx)(ee.A,{className:"size-10"}),onClick:()=>t(!1)}):(0,l.jsx)(en,{text:"Lock",icon:(0,l.jsx)(es.A,{className:"size-10"}),onClick:()=>t(!0)}),i?(0,l.jsx)(en,{text:"Stop Recording",icon:(0,l.jsx)(et.A,{className:"size-10"}),onClick:()=>o(!1)}):(0,l.jsx)(en,{text:"Record",icon:(0,l.jsx)(el.A,{className:"size-10"}),onClick:()=>o(!0)})]})})})}function ei(e){var s,t;let{selectedCamera:n,cameraPerformance:d}=e;return(0,l.jsxs)(a.Zp,{style:{backgroundColor:r.pk},className:"border-gray-700 flex flex-col h-full max-h-[400px]",children:[(0,l.jsx)(a.aR,{children:(0,l.jsxs)(c.f,{className:"items-center justify-between",children:[(0,l.jsxs)(a.ZB,{className:"flex items-center gap-2",style:{color:r.zq},children:[(0,l.jsx)(X.A,{className:"w-5 h-5"}),"Camera Stream"]}),(0,l.jsx)(c.f,{gap:"gap-2",className:"items-center",children:(0,l.jsxs)(i.E,{variant:"secondary",className:"bg-stone-700",style:{color:r.zq},children:[(0,l.jsx)(h.A,{className:"w-3 h-3 mr-1"}),"Processing @ ",null!=(s=null==d?void 0:d.fps)?s:0," FPS –"," ",null!=(t=null==d?void 0:d.latencyProcess.toFixed(2))?t:0,"ms latency"]})})]})}),(0,l.jsx)(a.Wu,{className:"flex-grow flex flex-col items-center justify-center",children:(0,l.jsx)(o.I,{stream:null==n?void 0:n.streamPath})})]})}function er(){let{pipelines:e,connection:s,cameras:t,socket:a,setPipelines:i,pipelinetypes:o,pipelineresults:u,cameraperformance:x,recordingstatuses:p}=(0,d.jg)(),[m,h]=(0,n.useState)(e.get(0)),[f,j]=(0,n.useState)(Array.from(o.values()).at(0)),[g,y]=(0,n.useState)(!1),[v,b]=(0,n.useState)(0),[N,w]=(0,n.useState)(void 0),[S,E]=(0,n.useState)(!1),[P,C]=(0,n.useState)(void 0),[A,k]=(0,n.useState)(void 0);return(0,n.useEffect)(()=>{var s,t,l;let n=null!=(t=null!=(s=null==N?void 0:N.pipelineIndex)?s:null==m?void 0:m.index)?t:0,a=e.get(n);if(a||(n=null!=(l=null==N?void 0:N.defaultPipeline)?l:0,a=e.get(n)),a){h(a);let e=o.get(a.type);e?j(e):console.warn("Pipeline type not found for",a.type)}else console.warn("No valid pipeline found for camera",N)},[e,o,N]),(0,n.useEffect)(()=>{C(x.get(v))},[x]),(0,n.useEffect)(()=>{Array.from(t.keys()).length>0&&w(V.GI.create(t.get(v)))},[t]),(0,n.useEffect)(()=>{if(void 0!==N){var e;y(null!=(e=p.get(null==N?void 0:N.index))&&e)}},[N,p]),(0,n.useEffect)(()=>{void 0!==m&&k(u.get(m.index))},[m,u,f]),(0,n.useEffect)(()=>{document.title="Synapse Client"},[]),(0,l.jsx)(l.Fragment,{children:(0,l.jsx)("div",{className:"w-full min-h-screen text-pink-600",style:{backgroundColor:r.Tp,color:r.zq},children:(0,l.jsx)("div",{className:"max-w-8xl mx-auto",style:{backgroundColor:r.Tp,borderRadius:"12px",padding:"10px"},children:(0,l.jsxs)(c.f,{gap:"gap-2",className:"h-full",children:[(0,l.jsxs)(c.V,{className:"flex-[2] space-y-2 h-full",children:[(0,l.jsx)(ei,{selectedCamera:t.get(v),cameraPerformance:P}),(0,l.jsx)(J,{pipelines:e,setPipelines:i,selectedPipeline:m,selectedPipelineType:f,backendConnected:s.backend,setSetting:(e,s,t)=>{if((0,d.sG)(e)){let l=B.wS.create({type:B.sE.MESSAGE_TYPE_PROTO_SET_SETTING,setPipelineSetting:M.Ob.create({pipelineIndex:t.index,value:e,setting:s})}),n=B.wS.encode(l).finish();null==a||a.sendBinary(n)}},locked:S})]}),(0,l.jsxs)(c.V,{className:"flex-[1.2] space-y-2 h-full",children:[(0,l.jsx)(H,{setpipelines:i,pipelines:e,pipelinetypes:o,socket:a,setSelectedPipeline:e=>{void 0!==e&&(h(e),j(o.get(e.type)),N&&setTimeout(()=>{let s=B.wS.create({type:B.sE.MESSAGE_TYPE_PROTO_SET_PIPELINE_INDEX,setPipelineIndex:M.Wi.create({cameraIndex:N.index,pipelineIndex:e.index})}),t=B.wS.encode(s).finish();null==a||a.sendBinary(t)},0))},selectedPipeline:m,setSelectedPipelineType:s=>{j(s),setTimeout(()=>{if(m&&s){let t=B.wS.create({type:B.sE.MESSAGE_TYPE_PROTO_SET_TYPE_FOR_PIPELINE,setPipelineType:M.Yc.create({newType:s.type,pipelineIndex:m.index})}),l=B.wS.encode(t).finish();null==a||a.sendBinary(l),m.type=s.type;let n=new Map(e);n.set(m.index,m),i(n)}},0)},selectedPipelineType:f,cameras:t,setSelectedCamera:e=>{var s;b(null!=(s=null==e?void 0:e.index)?s:0)},selectedCamera:t.get(v)}),(0,l.jsx)(ea,{locked:S,setLocked:E,save:()=>{let e=B.wS.create({type:B.sE.MESSAGE_TYPE_PROTO_SAVE,removePipelineIndex:-1}),s=B.wS.encode(e).finish();null==a||a.sendBinary(s)},recordingStatus:g,setRecordingStatus:e=>{if(void 0!==N){let s=B.wS.create({type:B.sE.MESSAGE_TYPE_PROTO_SET_CAMERA_RECORDING_STATUS,setCameraRecordingStatus:V.wk.create({cameraIndex:N.index,record:e})}),t=B.wS.encode(s).finish();null==a||a.sendBinary(t)}}}),(0,l.jsx)(z,{results:A})]})]})})})})}}}]);