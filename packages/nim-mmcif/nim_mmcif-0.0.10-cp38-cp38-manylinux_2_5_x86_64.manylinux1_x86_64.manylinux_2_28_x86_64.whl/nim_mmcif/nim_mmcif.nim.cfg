# Cross-platform Nim configuration for nim_mmcif
# This file configures compilation for all platforms

# Platform-specific settings
@if macosx:
  @if arm64:
    --cpu:arm64
    --passC:"-arch arm64"
    --passL:"-arch arm64"
  @elif amd64:
    --cpu:amd64
    --passC:"-arch x86_64"
    --passL:"-arch x86_64"
  @end
  --cc:clang
@elif windows:
  --cpu:amd64
  # Don't force a specific compiler, let the build system choose
  # based on what's available
  @if vcc:
    --passC:"/MD"
  @elif gcc:
    --passC:"-m64"
    --passL:"-m64"
  @end
@elif linux:
  @if arm64:
    --cpu:arm64
  @else:
    --cpu:amd64
  @end
  --cc:gcc
  --passL:"-fPIC"
@end

# Common settings for all platforms
--app:lib
--opt:speed
--stackTrace:off
--lineTrace:off
--threads:on
--tlsEmulation:off