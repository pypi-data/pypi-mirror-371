{"version":3,"file":"133.8f6984a2a88c4572.js","sources":["webpack://knx-frontend/./homeassistant-frontend/src/common/entity/compute_device_name.ts","webpack://knx-frontend/./homeassistant-frontend/src/common/string/get_duplicates.ts","webpack://knx-frontend/./homeassistant-frontend/src/common/entity/strip_prefix_from_entity_name.ts","webpack://knx-frontend/./homeassistant-frontend/src/common/entity/compute_entity_name.ts","webpack://knx-frontend/./homeassistant-frontend/src/common/entity/context/get_entity_context.ts","webpack://knx-frontend/./homeassistant-frontend/src/common/entity/valid_entity_id.ts","webpack://knx-frontend/./homeassistant-frontend/src/components/entity/ha-entity-picker.ts","webpack://knx-frontend/./homeassistant-frontend/src/data/auth.ts","webpack://knx-frontend/./homeassistant-frontend/src/data/entity.ts","webpack://knx-frontend/./homeassistant-frontend/src/data/integration.ts","webpack://knx-frontend/./homeassistant-frontend/src/panels/config/helpers/show-dialog-helper-detail.ts"],"sourcesContent":["import memoizeOne from \"memoize-one\";\nimport type { DeviceRegistryEntry } from \"../../data/device_registry\";\nimport type {\n  EntityRegistryDisplayEntry,\n  EntityRegistryEntry,\n} from \"../../data/entity_registry\";\nimport type { HomeAssistant } from \"../../types\";\nimport { computeStateName } from \"./compute_state_name\";\nimport { getDuplicates } from \"../string/get_duplicates\";\n\nexport const computeDeviceName = (\n  device: DeviceRegistryEntry\n): string | undefined => (device.name_by_user || device.name)?.trim();\n\nexport const computeDeviceNameDisplay = (\n  device: DeviceRegistryEntry,\n  hass: HomeAssistant,\n  entities?: EntityRegistryEntry[] | EntityRegistryDisplayEntry[] | string[]\n) =>\n  computeDeviceName(device) ||\n  (entities && fallbackDeviceName(hass, entities)) ||\n  hass.localize(\"ui.panel.config.devices.unnamed_device\", {\n    type: hass.localize(\n      `ui.panel.config.devices.type.${device.entry_type || \"device\"}`\n    ),\n  });\n\nexport const fallbackDeviceName = (\n  hass: HomeAssistant,\n  entities: EntityRegistryEntry[] | EntityRegistryDisplayEntry[] | string[]\n) => {\n  for (const entity of entities || []) {\n    const entityId = typeof entity === \"string\" ? entity : entity.entity_id;\n    const stateObj = hass.states[entityId];\n    if (stateObj) {\n      return computeStateName(stateObj);\n    }\n  }\n  return undefined;\n};\n\nexport const getDuplicatedDeviceNames = memoizeOne(\n  (devices: HomeAssistant[\"devices\"]): Set<string> => {\n    const names = Object.values(devices)\n      .map((device) => computeDeviceName(device))\n      .filter((name): name is string => name !== undefined);\n\n    return getDuplicates(names);\n  }\n);\n","export function getDuplicates(array: string[]): Set<string> {\n  const duplicates = new Set<string>();\n  const seen = new Set<string>();\n\n  for (const item of array) {\n    if (seen.has(item)) {\n      duplicates.add(item);\n    } else {\n      seen.add(item);\n    }\n  }\n\n  return duplicates;\n}\n","const SUFFIXES = [\" \", \": \", \" - \"];\n\n/**\n * Strips a device name from an entity name.\n * @param entityName the entity name\n * @param prefix the prefix to strip\n * @returns\n */\nexport const stripPrefixFromEntityName = (\n  entityName: string,\n  prefix: string\n) => {\n  const lowerCasedEntityName = entityName.toLowerCase();\n  const lowerCasedPrefix = prefix.toLowerCase();\n  for (const suffix of SUFFIXES) {\n    const lowerCasedPrefixWithSuffix = `${lowerCasedPrefix}${suffix}`;\n\n    if (lowerCasedEntityName.startsWith(lowerCasedPrefixWithSuffix)) {\n      const newName = entityName.substring(lowerCasedPrefixWithSuffix.length);\n      if (newName.length) {\n        // If first word already has an upper case letter (e.g. from brand name)\n        // leave as-is, otherwise capitalize the first word.\n        return hasUpperCase(newName.substr(0, newName.indexOf(\" \")))\n          ? newName\n          : newName[0].toUpperCase() + newName.slice(1);\n      }\n    }\n  }\n\n  return undefined;\n};\n\nconst hasUpperCase = (str: string): boolean => str.toLowerCase() !== str;\n","import type { HassEntity } from \"home-assistant-js-websocket\";\nimport type {\n  EntityRegistryDisplayEntry,\n  EntityRegistryEntry,\n} from \"../../data/entity_registry\";\nimport type { HomeAssistant } from \"../../types\";\nimport { computeDeviceName } from \"./compute_device_name\";\nimport { computeStateName } from \"./compute_state_name\";\nimport { stripPrefixFromEntityName } from \"./strip_prefix_from_entity_name\";\n\nexport const computeEntityName = (\n  stateObj: HassEntity,\n  hass: HomeAssistant\n): string | undefined => {\n  const entry = hass.entities[stateObj.entity_id] as\n    | EntityRegistryDisplayEntry\n    | undefined;\n\n  if (!entry) {\n    // Fall back to state name if not in the entity registry (friendly name)\n    return computeStateName(stateObj);\n  }\n  return computeEntityEntryName(entry, hass);\n};\n\nexport const computeEntityEntryName = (\n  entry: EntityRegistryDisplayEntry | EntityRegistryEntry,\n  hass: HomeAssistant\n): string | undefined => {\n  const name =\n    entry.name || (\"original_name\" in entry ? entry.original_name : undefined);\n\n  const device = entry.device_id ? hass.devices[entry.device_id] : undefined;\n\n  if (!device) {\n    if (name) {\n      return name;\n    }\n    const stateObj = hass.states[entry.entity_id] as HassEntity | undefined;\n    if (stateObj) {\n      return computeStateName(stateObj);\n    }\n    return undefined;\n  }\n\n  const deviceName = computeDeviceName(device);\n\n  // If the device name is the same as the entity name, consider empty entity name\n  if (deviceName === name) {\n    return undefined;\n  }\n\n  // Remove the device name from the entity name if it starts with it\n  if (deviceName && name) {\n    return stripPrefixFromEntityName(name, deviceName) || name;\n  }\n\n  return name;\n};\n","import type { HassEntity } from \"home-assistant-js-websocket\";\nimport type { AreaRegistryEntry } from \"../../../data/area_registry\";\nimport type { DeviceRegistryEntry } from \"../../../data/device_registry\";\nimport type {\n  EntityRegistryDisplayEntry,\n  EntityRegistryEntry,\n  ExtEntityRegistryEntry,\n} from \"../../../data/entity_registry\";\nimport type { FloorRegistryEntry } from \"../../../data/floor_registry\";\nimport type { HomeAssistant } from \"../../../types\";\n\ninterface EntityContext {\n  entity: EntityRegistryDisplayEntry | null;\n  device: DeviceRegistryEntry | null;\n  area: AreaRegistryEntry | null;\n  floor: FloorRegistryEntry | null;\n}\n\nexport const getEntityContext = (\n  stateObj: HassEntity,\n  hass: HomeAssistant\n): EntityContext => {\n  const entry = hass.entities[stateObj.entity_id] as\n    | EntityRegistryDisplayEntry\n    | undefined;\n\n  if (!entry) {\n    return {\n      entity: null,\n      device: null,\n      area: null,\n      floor: null,\n    };\n  }\n  return getEntityEntryContext(entry, hass);\n};\n\nexport const getEntityEntryContext = (\n  entry:\n    | EntityRegistryDisplayEntry\n    | EntityRegistryEntry\n    | ExtEntityRegistryEntry,\n  hass: HomeAssistant\n): EntityContext => {\n  const entity = hass.entities[entry.entity_id];\n  const deviceId = entry?.device_id;\n  const device = deviceId ? hass.devices[deviceId] : undefined;\n  const areaId = entry?.area_id || device?.area_id;\n  const area = areaId ? hass.areas[areaId] : undefined;\n  const floorId = area?.floor_id;\n  const floor = floorId ? hass.floors[floorId] : undefined;\n\n  return {\n    entity: entity,\n    device: device || null,\n    area: area || null,\n    floor: floor || null,\n  };\n};\n","const validEntityId = /^(\\w+)\\.(\\w+)$/;\n\nexport const isValidEntityId = (entityId: string) =>\n  validEntityId.test(entityId);\n","import { mdiPlus, mdiShape } from \"@mdi/js\";\nimport type { ComboBoxLitRenderer } from \"@vaadin/combo-box/lit\";\nimport type { HassEntity } from \"home-assistant-js-websocket\";\nimport { html, LitElement, nothing, type PropertyValues } from \"lit\";\nimport { customElement, property, query } from \"lit/decorators\";\nimport memoizeOne from \"memoize-one\";\nimport { fireEvent } from \"../../common/dom/fire_event\";\nimport { computeAreaName } from \"../../common/entity/compute_area_name\";\nimport { computeDeviceName } from \"../../common/entity/compute_device_name\";\nimport { computeDomain } from \"../../common/entity/compute_domain\";\nimport { computeEntityName } from \"../../common/entity/compute_entity_name\";\nimport { computeStateName } from \"../../common/entity/compute_state_name\";\nimport { getEntityContext } from \"../../common/entity/context/get_entity_context\";\nimport { isValidEntityId } from \"../../common/entity/valid_entity_id\";\nimport { computeRTL } from \"../../common/util/compute_rtl\";\nimport { domainToName } from \"../../data/integration\";\nimport {\n  isHelperDomain,\n  type HelperDomain,\n} from \"../../panels/config/helpers/const\";\nimport { showHelperDetailDialog } from \"../../panels/config/helpers/show-dialog-helper-detail\";\nimport type { HomeAssistant } from \"../../types\";\nimport \"../ha-combo-box-item\";\nimport \"../ha-generic-picker\";\nimport type { HaGenericPicker } from \"../ha-generic-picker\";\nimport type {\n  PickerComboBoxItem,\n  PickerComboBoxSearchFn,\n} from \"../ha-picker-combo-box\";\nimport type { PickerValueRenderer } from \"../ha-picker-field\";\nimport \"../ha-svg-icon\";\nimport \"./state-badge\";\n\ninterface EntityComboBoxItem extends PickerComboBoxItem {\n  domain_name?: string;\n  stateObj?: HassEntity;\n}\n\nexport type HaEntityPickerEntityFilterFunc = (entity: HassEntity) => boolean;\n\nconst CREATE_ID = \"___create-new-entity___\";\n\n@customElement(\"ha-entity-picker\")\nexport class HaEntityPicker extends LitElement {\n  @property({ attribute: false }) public hass!: HomeAssistant;\n\n  // eslint-disable-next-line lit/no-native-attributes\n  @property({ type: Boolean }) public autofocus = false;\n\n  @property({ type: Boolean }) public disabled = false;\n\n  @property({ type: Boolean }) public required = false;\n\n  @property({ type: Boolean, attribute: \"allow-custom-entity\" })\n  public allowCustomEntity;\n\n  @property({ type: Boolean, attribute: \"show-entity-id\" })\n  public showEntityId = false;\n\n  @property() public label?: string;\n\n  @property() public value?: string;\n\n  @property() public helper?: string;\n\n  @property() public placeholder?: string;\n\n  @property({ type: String, attribute: \"search-label\" })\n  public searchLabel?: string;\n\n  @property({ attribute: false, type: Array }) public createDomains?: string[];\n\n  /**\n   * Show entities from specific domains.\n   * @type {Array}\n   * @attr include-domains\n   */\n  @property({ type: Array, attribute: \"include-domains\" })\n  public includeDomains?: string[];\n\n  /**\n   * Show no entities of these domains.\n   * @type {Array}\n   * @attr exclude-domains\n   */\n  @property({ type: Array, attribute: \"exclude-domains\" })\n  public excludeDomains?: string[];\n\n  /**\n   * Show only entities of these device classes.\n   * @type {Array}\n   * @attr include-device-classes\n   */\n  @property({ type: Array, attribute: \"include-device-classes\" })\n  public includeDeviceClasses?: string[];\n\n  /**\n   * Show only entities with these unit of measuments.\n   * @type {Array}\n   * @attr include-unit-of-measurement\n   */\n  @property({ type: Array, attribute: \"include-unit-of-measurement\" })\n  public includeUnitOfMeasurement?: string[];\n\n  /**\n   * List of allowed entities to show.\n   * @type {Array}\n   * @attr include-entities\n   */\n  @property({ type: Array, attribute: \"include-entities\" })\n  public includeEntities?: string[];\n\n  /**\n   * List of entities to be excluded.\n   * @type {Array}\n   * @attr exclude-entities\n   */\n  @property({ type: Array, attribute: \"exclude-entities\" })\n  public excludeEntities?: string[];\n\n  @property({ attribute: false })\n  public entityFilter?: HaEntityPickerEntityFilterFunc;\n\n  @property({ attribute: \"hide-clear-icon\", type: Boolean })\n  public hideClearIcon = false;\n\n  @query(\"ha-generic-picker\") private _picker?: HaGenericPicker;\n\n  protected firstUpdated(changedProperties: PropertyValues): void {\n    super.firstUpdated(changedProperties);\n    // Load title translations so it is available when the combo-box opens\n    this.hass.loadBackendTranslation(\"title\");\n  }\n\n  private _valueRenderer: PickerValueRenderer = (value) => {\n    const entityId = value || \"\";\n\n    const stateObj = this.hass.states[entityId];\n\n    if (!stateObj) {\n      return html`\n        <ha-svg-icon\n          slot=\"start\"\n          .path=${mdiShape}\n          style=\"margin: 0 4px\"\n        ></ha-svg-icon>\n        <span slot=\"headline\">${entityId}</span>\n      `;\n    }\n\n    const { area, device } = getEntityContext(stateObj, this.hass);\n\n    const entityName = computeEntityName(stateObj, this.hass);\n    const deviceName = device ? computeDeviceName(device) : undefined;\n    const areaName = area ? computeAreaName(area) : undefined;\n\n    const isRTL = computeRTL(this.hass);\n\n    const primary = entityName || deviceName || entityId;\n    const secondary = [areaName, entityName ? deviceName : undefined]\n      .filter(Boolean)\n      .join(isRTL ? \" ◂ \" : \" ▸ \");\n\n    return html`\n      <state-badge\n        .hass=${this.hass}\n        .stateObj=${stateObj}\n        slot=\"start\"\n      ></state-badge>\n      <span slot=\"headline\">${primary}</span>\n      <span slot=\"supporting-text\">${secondary}</span>\n    `;\n  };\n\n  private get _showEntityId() {\n    return this.showEntityId || this.hass.userData?.showEntityIdPicker;\n  }\n\n  private _rowRenderer: ComboBoxLitRenderer<EntityComboBoxItem> = (\n    item,\n    { index }\n  ) => {\n    const showEntityId = this._showEntityId;\n\n    return html`\n      <ha-combo-box-item type=\"button\" compact .borderTop=${index !== 0}>\n        ${item.icon_path\n          ? html`\n              <ha-svg-icon\n                slot=\"start\"\n                style=\"margin: 0 4px\"\n                .path=${item.icon_path}\n              ></ha-svg-icon>\n            `\n          : html`\n              <state-badge\n                slot=\"start\"\n                .stateObj=${item.stateObj}\n                .hass=${this.hass}\n              ></state-badge>\n            `}\n        <span slot=\"headline\">${item.primary}</span>\n        ${item.secondary\n          ? html`<span slot=\"supporting-text\">${item.secondary}</span>`\n          : nothing}\n        ${item.stateObj && showEntityId\n          ? html`\n              <span slot=\"supporting-text\" class=\"code\">\n                ${item.stateObj.entity_id}\n              </span>\n            `\n          : nothing}\n        ${item.domain_name && !showEntityId\n          ? html`\n              <div slot=\"trailing-supporting-text\" class=\"domain\">\n                ${item.domain_name}\n              </div>\n            `\n          : nothing}\n      </ha-combo-box-item>\n    `;\n  };\n\n  private _getAdditionalItems = () =>\n    this._getCreateItems(this.hass.localize, this.createDomains);\n\n  private _getCreateItems = memoizeOne(\n    (\n      localize: this[\"hass\"][\"localize\"],\n      createDomains: this[\"createDomains\"]\n    ) => {\n      if (!createDomains?.length) {\n        return [];\n      }\n\n      return createDomains.map((domain) => {\n        const primary = localize(\n          \"ui.components.entity.entity-picker.create_helper\",\n          {\n            domain: isHelperDomain(domain)\n              ? localize(\n                  `ui.panel.config.helpers.types.${domain as HelperDomain}`\n                )\n              : domainToName(localize, domain),\n          }\n        );\n\n        return {\n          id: CREATE_ID + domain,\n          primary: primary,\n          secondary: localize(\"ui.components.entity.entity-picker.new_entity\"),\n          icon_path: mdiPlus,\n        } satisfies EntityComboBoxItem;\n      });\n    }\n  );\n\n  private _getItems = () =>\n    this._getEntities(\n      this.hass,\n      this.includeDomains,\n      this.excludeDomains,\n      this.entityFilter,\n      this.includeDeviceClasses,\n      this.includeUnitOfMeasurement,\n      this.includeEntities,\n      this.excludeEntities\n    );\n\n  private _getEntities = memoizeOne(\n    (\n      hass: this[\"hass\"],\n      includeDomains: this[\"includeDomains\"],\n      excludeDomains: this[\"excludeDomains\"],\n      entityFilter: this[\"entityFilter\"],\n      includeDeviceClasses: this[\"includeDeviceClasses\"],\n      includeUnitOfMeasurement: this[\"includeUnitOfMeasurement\"],\n      includeEntities: this[\"includeEntities\"],\n      excludeEntities: this[\"excludeEntities\"]\n    ): EntityComboBoxItem[] => {\n      let items: EntityComboBoxItem[] = [];\n\n      let entityIds = Object.keys(hass.states);\n\n      if (includeEntities) {\n        entityIds = entityIds.filter((entityId) =>\n          includeEntities.includes(entityId)\n        );\n      }\n\n      if (excludeEntities) {\n        entityIds = entityIds.filter(\n          (entityId) => !excludeEntities.includes(entityId)\n        );\n      }\n\n      if (includeDomains) {\n        entityIds = entityIds.filter((eid) =>\n          includeDomains.includes(computeDomain(eid))\n        );\n      }\n\n      if (excludeDomains) {\n        entityIds = entityIds.filter(\n          (eid) => !excludeDomains.includes(computeDomain(eid))\n        );\n      }\n\n      const isRTL = computeRTL(this.hass);\n\n      items = entityIds.map<EntityComboBoxItem>((entityId) => {\n        const stateObj = hass!.states[entityId];\n\n        const { area, device } = getEntityContext(stateObj, hass);\n\n        const friendlyName = computeStateName(stateObj); // Keep this for search\n        const entityName = computeEntityName(stateObj, hass);\n        const deviceName = device ? computeDeviceName(device) : undefined;\n        const areaName = area ? computeAreaName(area) : undefined;\n\n        const domainName = domainToName(\n          this.hass.localize,\n          computeDomain(entityId)\n        );\n\n        const primary = entityName || deviceName || entityId;\n        const secondary = [areaName, entityName ? deviceName : undefined]\n          .filter(Boolean)\n          .join(isRTL ? \" ◂ \" : \" ▸ \");\n        const a11yLabel = [deviceName, entityName].filter(Boolean).join(\" - \");\n\n        return {\n          id: entityId,\n          primary: primary,\n          secondary: secondary,\n          domain_name: domainName,\n          sorting_label: [deviceName, entityName].filter(Boolean).join(\"_\"),\n          search_labels: [\n            entityName,\n            deviceName,\n            areaName,\n            domainName,\n            friendlyName,\n            entityId,\n          ].filter(Boolean) as string[],\n          a11y_label: a11yLabel,\n          stateObj: stateObj,\n        };\n      });\n\n      if (includeDeviceClasses) {\n        items = items.filter(\n          (item) =>\n            // We always want to include the entity of the current value\n            item.id === this.value ||\n            (item.stateObj?.attributes.device_class &&\n              includeDeviceClasses.includes(\n                item.stateObj.attributes.device_class\n              ))\n        );\n      }\n\n      if (includeUnitOfMeasurement) {\n        items = items.filter(\n          (item) =>\n            // We always want to include the entity of the current value\n            item.id === this.value ||\n            (item.stateObj?.attributes.unit_of_measurement &&\n              includeUnitOfMeasurement.includes(\n                item.stateObj.attributes.unit_of_measurement\n              ))\n        );\n      }\n\n      if (entityFilter) {\n        items = items.filter(\n          (item) =>\n            // We always want to include the entity of the current value\n            item.id === this.value ||\n            (item.stateObj && entityFilter!(item.stateObj))\n        );\n      }\n\n      return items;\n    }\n  );\n\n  protected render() {\n    const placeholder =\n      this.placeholder ??\n      this.hass.localize(\"ui.components.entity.entity-picker.placeholder\");\n    const notFoundLabel = this.hass.localize(\n      \"ui.components.entity.entity-picker.no_match\"\n    );\n\n    return html`\n      <ha-generic-picker\n        .hass=${this.hass}\n        .disabled=${this.disabled}\n        .autofocus=${this.autofocus}\n        .allowCustomValue=${this.allowCustomEntity}\n        .label=${this.label}\n        .helper=${this.helper}\n        .searchLabel=${this.searchLabel}\n        .notFoundLabel=${notFoundLabel}\n        .placeholder=${placeholder}\n        .value=${this.value}\n        .rowRenderer=${this._rowRenderer}\n        .getItems=${this._getItems}\n        .getAdditionalItems=${this._getAdditionalItems}\n        .hideClearIcon=${this.hideClearIcon}\n        .searchFn=${this._searchFn}\n        .valueRenderer=${this._valueRenderer}\n        @value-changed=${this._valueChanged}\n      >\n      </ha-generic-picker>\n    `;\n  }\n\n  private _searchFn: PickerComboBoxSearchFn<EntityComboBoxItem> = (\n    search,\n    filteredItems\n  ) => {\n    // If there is exact match for entity id, put it first\n    const index = filteredItems.findIndex(\n      (item) => item.stateObj?.entity_id === search\n    );\n    if (index === -1) {\n      return filteredItems;\n    }\n\n    const [exactMatch] = filteredItems.splice(index, 1);\n    filteredItems.unshift(exactMatch);\n    return filteredItems;\n  };\n\n  public async open() {\n    await this.updateComplete;\n    await this._picker?.open();\n  }\n\n  private _valueChanged(ev) {\n    ev.stopPropagation();\n    const value = ev.detail.value;\n\n    if (!value) {\n      this._setValue(undefined);\n      return;\n    }\n\n    if (value.startsWith(CREATE_ID)) {\n      const domain = value.substring(CREATE_ID.length);\n\n      showHelperDetailDialog(this, {\n        domain,\n        dialogClosedCallback: (item) => {\n          if (item.entityId) this._setValue(item.entityId);\n        },\n      });\n      return;\n    }\n\n    if (!isValidEntityId(value)) {\n      return;\n    }\n\n    this._setValue(value);\n  }\n\n  private _setValue(value: string | undefined) {\n    this.value = value;\n\n    fireEvent(this, \"value-changed\", { value });\n    fireEvent(this, \"change\");\n  }\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    \"ha-entity-picker\": HaEntityPicker;\n  }\n}\n","import type { HaFormSchema } from \"../components/ha-form/types\";\nimport type { HomeAssistant } from \"../types\";\nimport type { RefreshTokenType } from \"./refresh_token\";\n\nexport interface AuthUrlSearchParams {\n  client_id?: string;\n  redirect_uri?: string;\n  state?: string;\n}\n\nexport interface AuthProvider {\n  name: string;\n  id: string;\n  type: string;\n  users?: Record<string, string>;\n}\n\nexport interface Credential {\n  type: string;\n}\n\nexport interface SignedPath {\n  path: string;\n}\n\nexport const hassUrl = __HASS_URL__;\n\nexport const autocompleteLoginFields = (schema: HaFormSchema[]) =>\n  schema.map((field) => {\n    if (field.type !== \"string\") return field;\n    switch (field.name) {\n      case \"username\":\n        return { ...field, autocomplete: \"username\", autofocus: true };\n      case \"password\":\n        return { ...field, autocomplete: \"current-password\" };\n      case \"code\":\n        return { ...field, autocomplete: \"one-time-code\", autofocus: true };\n      default:\n        return field;\n    }\n  });\n\nexport const getSignedPath = (\n  hass: HomeAssistant,\n  path: string\n): Promise<SignedPath> => hass.callWS({ type: \"auth/sign_path\", path });\n\nexport const fetchAuthProviders = () =>\n  fetch(\"/auth/providers\", {\n    credentials: \"same-origin\",\n  });\n\nexport const createLoginFlow = (\n  client_id: string | undefined,\n  redirect_uri: string | undefined,\n  handler: (string | null)[]\n) =>\n  fetch(\"/auth/login_flow\", {\n    method: \"POST\",\n    credentials: \"same-origin\",\n    body: JSON.stringify({\n      client_id,\n      handler,\n      redirect_uri,\n    }),\n  });\n\nexport const submitLoginFlow = (flow_id: string, data: Record<string, any>) =>\n  fetch(`/auth/login_flow/${flow_id}`, {\n    method: \"POST\",\n    credentials: \"same-origin\",\n    body: JSON.stringify(data),\n  });\n\nexport const deleteLoginFlow = (flow_id) =>\n  fetch(`/auth/login_flow/${flow_id}`, {\n    method: \"DELETE\",\n    credentials: \"same-origin\",\n  });\n\nexport const redirectWithAuthCode = (\n  url: string,\n  authCode: string,\n  oauth2State: string | undefined,\n  storeToken: boolean\n) => {\n  // OAuth 2: 3.1.2 we need to retain query component of a redirect URI\n  if (!url.includes(\"?\")) {\n    url += \"?\";\n  } else if (!url.endsWith(\"&\")) {\n    url += \"&\";\n  }\n\n  url += `code=${encodeURIComponent(authCode)}`;\n\n  if (oauth2State) {\n    url += `&state=${encodeURIComponent(oauth2State)}`;\n  }\n  if (storeToken) {\n    url += `&storeToken=true`;\n  }\n\n  document.location.assign(url);\n};\n\nexport const createAuthForUser = async (\n  hass: HomeAssistant,\n  userId: string,\n  username: string,\n  password: string\n) =>\n  hass.callWS({\n    type: \"config/auth_provider/homeassistant/create\",\n    user_id: userId,\n    username,\n    password,\n  });\n\nexport const changePassword = (\n  hass: HomeAssistant,\n  current_password: string,\n  new_password: string\n) =>\n  hass.callWS({\n    type: \"config/auth_provider/homeassistant/change_password\",\n    current_password,\n    new_password,\n  });\n\nexport const adminChangePassword = (\n  hass: HomeAssistant,\n  userId: string,\n  password: string\n) =>\n  hass.callWS<undefined>({\n    type: \"config/auth_provider/homeassistant/admin_change_password\",\n    user_id: userId,\n    password,\n  });\n\nexport const adminChangeUsername = (\n  hass: HomeAssistant,\n  userId: string,\n  username: string\n) =>\n  hass.callWS<undefined>({\n    type: \"config/auth_provider/homeassistant/admin_change_username\",\n    user_id: userId,\n    username,\n  });\n\nexport const deleteAllRefreshTokens = (\n  hass: HomeAssistant,\n  token_type?: RefreshTokenType,\n  delete_current_token?: boolean\n) =>\n  hass.callWS({\n    type: \"auth/delete_all_refresh_tokens\",\n    token_type,\n    delete_current_token,\n  });\n","import { arrayLiteralIncludes } from \"../common/array/literal-includes\";\n\nexport const UNAVAILABLE = \"unavailable\";\nexport const UNKNOWN = \"unknown\";\nexport const ON = \"on\";\nexport const OFF = \"off\";\n\nexport const UNAVAILABLE_STATES = [UNAVAILABLE, UNKNOWN] as const;\nexport const OFF_STATES = [UNAVAILABLE, UNKNOWN, OFF] as const;\n\nexport const isUnavailableState = arrayLiteralIncludes(UNAVAILABLE_STATES);\nexport const isOffState = arrayLiteralIncludes(OFF_STATES);\n","import type { Connection } from \"home-assistant-js-websocket\";\nimport { createCollection } from \"home-assistant-js-websocket\";\nimport type { LocalizeFunc } from \"../common/translations/localize\";\nimport type { HomeAssistant } from \"../types\";\nimport { debounce } from \"../common/util/debounce\";\n\nexport const integrationsWithPanel = {\n  bluetooth: \"config/bluetooth\",\n  dhcp: \"config/dhcp\",\n  matter: \"config/matter\",\n  mqtt: \"config/mqtt\",\n  ssdp: \"config/ssdp\",\n  thread: \"config/thread\",\n  zeroconf: \"config/zeroconf\",\n  zha: \"config/zha/dashboard\",\n  zwave_js: \"config/zwave_js/dashboard\",\n};\n\nexport type IntegrationType =\n  | \"device\"\n  | \"helper\"\n  | \"hub\"\n  | \"service\"\n  | \"hardware\"\n  | \"entity\"\n  | \"system\";\n\nexport interface IntegrationManifest {\n  is_built_in: boolean;\n  overwrites_built_in?: boolean;\n  domain: string;\n  name: string;\n  config_flow: boolean;\n  documentation: string;\n  issue_tracker?: string;\n  dependencies?: string[];\n  after_dependencies?: string[];\n  codeowners?: string[];\n  requirements?: string[];\n  ssdp?: { manufacturer?: string; modelName?: string; st?: string }[];\n  zeroconf?: string[];\n  homekit?: { models: string[] };\n  integration_type?: IntegrationType;\n  loggers?: string[];\n  quality_scale?:\n    | \"bronze\"\n    | \"silver\"\n    | \"gold\"\n    | \"platinum\"\n    | \"no_score\"\n    | \"internal\"\n    | \"legacy\"\n    | \"custom\";\n  iot_class:\n    | \"assumed_state\"\n    | \"cloud_polling\"\n    | \"cloud_push\"\n    | \"local_polling\"\n    | \"local_push\";\n  single_config_entry?: boolean;\n  version?: string;\n}\nexport interface IntegrationSetup {\n  domain: string;\n  seconds?: number;\n}\n\nexport interface IntegrationLogInfo {\n  domain: string;\n  level?: number;\n}\n\nexport enum LogSeverity {\n  CRITICAL = 50,\n  ERROR = 40,\n  WARNING = 30,\n  INFO = 20,\n  DEBUG = 10,\n  NOTSET = 0,\n}\n\nexport type IntegrationLogPersistance = \"none\" | \"once\" | \"permanent\";\n\nexport const integrationIssuesUrl = (\n  domain: string,\n  manifest: IntegrationManifest\n) =>\n  manifest.issue_tracker ||\n  `https://github.com/home-assistant/core/issues?q=is%3Aissue+is%3Aopen+label%3A%22integration%3A+${domain}%22`;\n\nexport const domainToName = (\n  localize: LocalizeFunc,\n  domain: string,\n  manifest?: IntegrationManifest\n) => localize(`component.${domain}.title`) || manifest?.name || domain;\n\nexport const fetchIntegrationManifests = (\n  hass: HomeAssistant,\n  integrations?: string[]\n) => {\n  const params: any = {\n    type: \"manifest/list\",\n  };\n  if (integrations) {\n    params.integrations = integrations;\n  }\n  return hass.callWS<IntegrationManifest[]>(params);\n};\n\nexport const fetchIntegrationManifest = (\n  hass: HomeAssistant,\n  integration: string\n) => hass.callWS<IntegrationManifest>({ type: \"manifest/get\", integration });\n\nexport const fetchIntegrationSetups = (hass: HomeAssistant) =>\n  hass.callWS<IntegrationSetup[]>({ type: \"integration/setup_info\" });\n\nexport const fetchIntegrationLogInfo = (conn) =>\n  conn.sendMessagePromise({\n    type: \"logger/log_info\",\n  });\n\nexport const setIntegrationLogLevel = (\n  hass: HomeAssistant,\n  integration: string,\n  level: string,\n  persistence: IntegrationLogPersistance\n) =>\n  hass.callWS({\n    type: \"logger/integration_log_level\",\n    integration,\n    level,\n    persistence,\n  });\n\nconst subscribeLogInfoUpdates = (conn, store) =>\n  conn.subscribeEvents(\n    debounce(\n      () =>\n        fetchIntegrationLogInfo(conn).then((log_infos) =>\n          store.setState(log_infos, true)\n        ),\n      200,\n      true\n    ),\n    \"logging_changed\"\n  );\n\nexport const subscribeLogInfo = (\n  conn: Connection,\n  onChange: (devices: IntegrationLogInfo[]) => void\n) =>\n  createCollection<IntegrationLogInfo[]>(\n    \"_integration_log_info\",\n    fetchIntegrationLogInfo,\n    subscribeLogInfoUpdates,\n    conn,\n    onChange\n  );\n\nexport const waitForIntegrationSetup = (hass: HomeAssistant, domain: string) =>\n  hass.callWS<{ integration_loaded: boolean }>({\n    type: \"integration/wait\",\n    domain,\n  });\n","import { fireEvent } from \"../../../common/dom/fire_event\";\n\nexport const loadHelperDetailDialog = () => import(\"./dialog-helper-detail\");\n\nexport interface ShowDialogHelperDetailParams {\n  domain?: string;\n  dialogClosedCallback?: (params: {\n    flowFinished: boolean;\n    entryId?: string;\n    entityId?: string;\n  }) => void;\n}\n\nexport const showHelperDetailDialog = (\n  element: HTMLElement,\n  params: ShowDialogHelperDetailParams\n) => {\n  fireEvent(element, \"show-dialog\", {\n    dialogTag: \"dialog-helper-detail\",\n    dialogImport: loadHelperDetailDialog,\n    dialogParams: params,\n  });\n};\n"],"names":["computeDeviceName","device","_ref","name_by_user","name","trim","computeDeviceNameDisplay","hass","entities","fallbackDeviceName","localize","type","entry_type","entity","entityId","entity_id","stateObj","states","computeStateName","memoizeOne","devices","array","duplicates","Set","seen","item","has","add","getDuplicates","Object","values","map","filter","undefined","SUFFIXES","hasUpperCase","str","toLowerCase","computeEntityName","entry","computeEntityEntryName","original_name","device_id","deviceName","stripPrefixFromEntityName","entityName","prefix","lowerCasedEntityName","lowerCasedPrefix","suffix","lowerCasedPrefixWithSuffix","startsWith","newName","substring","length","substr","indexOf","toUpperCase","slice","getEntityContext","getEntityEntryContext","area","floor","deviceId","areaId","area_id","areas","floorId","floor_id","floors","validEntityId","isValidEntityId","test","CREATE_ID","HaEntityPicker","LitElement","firstUpdated","changedProperties","super","this","loadBackendTranslation","_showEntityId","_this$hass$userData","showEntityId","userData","showEntityIdPicker","render","_this$placeholder","placeholder","notFoundLabel","html","_t","_","disabled","autofocus","allowCustomEntity","label","helper","searchLabel","value","_rowRenderer","_getItems","_getAdditionalItems","hideClearIcon","_searchFn","_valueRenderer","_valueChanged","open","_this$_picker","updateComplete","_picker","ev","stopPropagation","detail","domain","showHelperDetailDialog","dialogClosedCallback","_setValue","fireEvent","args","required","_t2","mdiShape","areaName","computeAreaName","isRTL","computeRTL","primary","secondary","Boolean","join","_t3","index","_t4","icon_path","_t5","_t6","_t7","nothing","_t8","domain_name","_t9","_getCreateItems","createDomains","isHelperDomain","domainToName","id","mdiPlus","_getEntities","includeDomains","excludeDomains","entityFilter","includeDeviceClasses","includeUnitOfMeasurement","includeEntities","excludeEntities","items","entityIds","keys","includes","eid","computeDomain","friendlyName","domainName","a11yLabel","sorting_label","search_labels","a11y_label","_item$stateObj","attributes","device_class","_item$stateObj2","unit_of_measurement","search","filteredItems","findIndex","_item$stateObj3","exactMatch","splice","unshift","attribute","String","Array","autocompleteLoginFields","schema","field","assign","autocomplete","getSignedPath","path","callWS","UNAVAILABLE","UNKNOWN","ON","OFF","UNAVAILABLE_STATES","OFF_STATES","isUnavailableState","arrayLiteralIncludes","manifest","fetchIntegrationManifests","integrations","params","fetchIntegrationManifest","integration","loadHelperDetailDialog","e","element","dialogTag","dialogImport","dialogParams"],"mappings":"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"}