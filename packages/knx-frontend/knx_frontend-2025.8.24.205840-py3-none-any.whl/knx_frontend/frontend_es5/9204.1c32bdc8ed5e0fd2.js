"use strict";(self.webpackChunkknx_frontend=self.webpackChunkknx_frontend||[]).push([["9204"],{12951:function(e,t,i){i.d(t,{I:function(){return s},k:function(){return a}});i(26847),i(67886),i(65451),i(46015),i(38334),i(94880),i(75643),i(29761),i(27530);const a=new Set(["primary","accent","disabled","red","pink","purple","deep-purple","indigo","blue","light-blue","cyan","teal","green","light-green","lime","yellow","amber","orange","deep-orange","brown","light-grey","grey","dark-grey","blue-grey","black","white"]);function s(e){return a.has(e)?`var(--${e}-color)`:e}},90024:function(e,t,i){i.a(e,(async function(e,t){try{i(84730),i(39710),i(26847),i(81738),i(33480),i(94814),i(22960),i(6989),i(72489),i(1455),i(67886),i(65451),i(46015),i(38334),i(94880),i(75643),i(29761),i(56389),i(44261),i(27530);var a=i(73742),s=i(59048),o=i(7616),l=i(28105),r=i(29740),n=i(76151),c=i(57774),d=i(42846),h=i(81665),u=i(66299),p=i(76948),_=i(33321),b=(i(40830),e([_]));_=(b.then?(await b)():b)[0];let v,y,g,m,f,C=e=>e;const k="M17.63,5.84C17.27,5.33 16.67,5 16,5H5A2,2 0 0,0 3,7V17A2,2 0 0,0 5,19H16C16.67,19 17.27,18.66 17.63,18.15L22,12L17.63,5.84Z",$="M19,13H13V19H11V13H5V11H11V5H13V11H19V13Z",w="___ADD_NEW___",x="___NO_LABELS___";class A extends((0,u.f)(s.oi)){async open(){var e;await this.updateComplete,await(null===(e=this._picker)||void 0===e?void 0:e.open())}hassSubscribe(){return[(0,d.f4)(this.hass.connection,(e=>{this._labels=e}))]}render(){var e;const t=null!==(e=this.placeholder)&&void 0!==e?e:this.hass.localize("ui.components.label-picker.label"),i=this._computeValueRenderer(this._labels);return(0,s.dy)(v||(v=C`
      <ha-generic-picker
        .hass=${0}
        .autofocus=${0}
        .label=${0}
        .notFoundLabel=${0}
        .placeholder=${0}
        .value=${0}
        .getItems=${0}
        .getAdditionalItems=${0}
        .valueRenderer=${0}
        @value-changed=${0}
      >
      </ha-generic-picker>
    `),this.hass,this.autofocus,this.label,this.hass.localize("ui.components.label-picker.no_match"),t,this.value,this._getItems,this._getAdditionalItems,i,this._valueChanged)}_valueChanged(e){e.stopPropagation();const t=e.detail.value;if(t!==x)if(t)if(t.startsWith(w)){this.hass.loadFragmentTranslation("config");const e=t.substring(w.length);(0,p.T)(this,{suggestedName:e,createEntry:async e=>{try{const t=await(0,d.jo)(this.hass,e);this._setValue(t.label_id)}catch(t){(0,h.Ys)(this,{title:this.hass.localize("ui.components.label-picker.failed_create_label"),text:t.message})}}})}else this._setValue(t);else this._setValue(void 0)}_setValue(e){this.value=e,setTimeout((()=>{(0,r.B)(this,"value-changed",{value:e}),(0,r.B)(this,"change")}),0)}constructor(...e){super(...e),this.noAdd=!1,this.disabled=!1,this.required=!1,this._labelMap=(0,l.Z)((e=>e?new Map(e.map((e=>[e.label_id,e]))):new Map)),this._computeValueRenderer=(0,l.Z)((e=>t=>{const i=this._labelMap(e).get(t);return i?(0,s.dy)(g||(g=C`
          ${0}
          <span slot="headline">${0}</span>
        `),i.icon?(0,s.dy)(m||(m=C`<ha-icon slot="start" .icon=${0}></ha-icon>`),i.icon):(0,s.dy)(f||(f=C`<ha-svg-icon slot="start" .path=${0}></ha-svg-icon>`),k),i.name):(0,s.dy)(y||(y=C`
            <ha-svg-icon slot="start" .path=${0}></ha-svg-icon>
            <span slot="headline">${0}</span>
          `),k,t)})),this._getLabels=(0,l.Z)(((e,t,i,a,s,o,l,r,d,h)=>{if(!e||0===e.length)return[{id:x,primary:this.hass.localize("ui.components.label-picker.no_labels"),icon_path:k}];const u=Object.values(i),p=Object.values(a);let _,b,v={};(s||o||l||r||d)&&(v=(0,c.R6)(p),_=u,b=p.filter((e=>e.labels.length>0)),s&&(_=_.filter((e=>{const t=v[e.id];return!(!t||!t.length)&&v[e.id].some((e=>s.includes((0,n.M)(e.entity_id))))})),b=b.filter((e=>s.includes((0,n.M)(e.entity_id))))),o&&(_=_.filter((e=>{const t=v[e.id];return!t||!t.length||p.every((e=>!o.includes((0,n.M)(e.entity_id))))})),b=b.filter((e=>!o.includes((0,n.M)(e.entity_id))))),l&&(_=_.filter((e=>{const t=v[e.id];return!(!t||!t.length)&&v[e.id].some((e=>{const t=this.hass.states[e.entity_id];return!!t&&(t.attributes.device_class&&l.includes(t.attributes.device_class))}))})),b=b.filter((e=>{const t=this.hass.states[e.entity_id];return t.attributes.device_class&&l.includes(t.attributes.device_class)}))),r&&(_=_.filter((e=>r(e)))),d&&(_=_.filter((e=>{const t=v[e.id];return!(!t||!t.length)&&v[e.id].some((e=>{const t=this.hass.states[e.entity_id];return!!t&&d(t)}))})),b=b.filter((e=>{const t=this.hass.states[e.entity_id];return!!t&&d(t)}))));let y=e;const g=new Set;let m;_&&(m=_.filter((e=>e.area_id)).map((e=>e.area_id)),_.forEach((e=>{e.labels.forEach((e=>g.add(e)))}))),b&&(m=(null!=m?m:[]).concat(b.filter((e=>e.area_id)).map((e=>e.area_id))),b.forEach((e=>{e.labels.forEach((e=>g.add(e)))}))),m&&m.forEach((e=>{t[e].labels.forEach((e=>g.add(e)))})),h&&(y=y.filter((e=>!h.includes(e.label_id)))),(_||b)&&(y=y.filter((e=>g.has(e.label_id))));return y.map((e=>({id:e.label_id,primary:e.name,icon:e.icon||void 0,icon_path:e.icon?void 0:k,sorting_label:e.name,search_labels:[e.name,e.label_id,e.description].filter((e=>Boolean(e)))})))})),this._getItems=()=>this._getLabels(this._labels,this.hass.areas,this.hass.devices,this.hass.entities,this.includeDomains,this.excludeDomains,this.includeDeviceClasses,this.deviceFilter,this.entityFilter,this.excludeLabels),this._allLabelNames=(0,l.Z)((e=>e?[...new Set(e.map((e=>e.name.toLowerCase())).filter(Boolean))]:[])),this._getAdditionalItems=e=>{if(this.noAdd)return[];const t=this._allLabelNames(this._labels);return e&&!t.includes(e.toLowerCase())?[{id:w+e,primary:this.hass.localize("ui.components.label-picker.add_new_sugestion",{name:e}),icon_path:$}]:[{id:w,primary:this.hass.localize("ui.components.label-picker.add_new"),icon_path:$}]}}}(0,a.__decorate)([(0,o.Cb)({attribute:!1})],A.prototype,"hass",void 0),(0,a.__decorate)([(0,o.Cb)()],A.prototype,"label",void 0),(0,a.__decorate)([(0,o.Cb)()],A.prototype,"value",void 0),(0,a.__decorate)([(0,o.Cb)()],A.prototype,"helper",void 0),(0,a.__decorate)([(0,o.Cb)()],A.prototype,"placeholder",void 0),(0,a.__decorate)([(0,o.Cb)({type:Boolean,attribute:"no-add"})],A.prototype,"noAdd",void 0),(0,a.__decorate)([(0,o.Cb)({type:Array,attribute:"include-domains"})],A.prototype,"includeDomains",void 0),(0,a.__decorate)([(0,o.Cb)({type:Array,attribute:"exclude-domains"})],A.prototype,"excludeDomains",void 0),(0,a.__decorate)([(0,o.Cb)({type:Array,attribute:"include-device-classes"})],A.prototype,"includeDeviceClasses",void 0),(0,a.__decorate)([(0,o.Cb)({type:Array,attribute:"exclude-label"})],A.prototype,"excludeLabels",void 0),(0,a.__decorate)([(0,o.Cb)({attribute:!1})],A.prototype,"deviceFilter",void 0),(0,a.__decorate)([(0,o.Cb)({attribute:!1})],A.prototype,"entityFilter",void 0),(0,a.__decorate)([(0,o.Cb)({type:Boolean})],A.prototype,"disabled",void 0),(0,a.__decorate)([(0,o.Cb)({type:Boolean})],A.prototype,"required",void 0),(0,a.__decorate)([(0,o.SB)()],A.prototype,"_labels",void 0),(0,a.__decorate)([(0,o.IO)("ha-generic-picker")],A.prototype,"_picker",void 0),A=(0,a.__decorate)([(0,o.Mo)("ha-label-picker")],A),t()}catch(v){t(v)}}))},19442:function(e,t,i){i.a(e,(async function(e,t){try{i(39710),i(26847),i(18574),i(81738),i(94814),i(22960),i(6989),i(1455),i(56389),i(27530);var a=i(73742),s=i(59048),o=i(7616),l=i(88245),r=i(28105),n=i(12951),c=i(29740),d=i(92949),h=i(42846),u=i(66299),p=i(76948),_=(i(2414),i(91572),i(90024)),b=e([_]);_=(b.then?(await b)():b)[0];let v,y,g,m,f,C,k=e=>e;class $ extends((0,u.f)(s.oi)){async open(){var e;await this.updateComplete,await(null===(e=this.labelPicker)||void 0===e?void 0:e.open())}async focus(){var e;await this.updateComplete,await(null===(e=this.labelPicker)||void 0===e?void 0:e.focus())}hassSubscribe(){return[(0,h.f4)(this.hass.connection,(e=>{const t={};e.forEach((e=>{t[e.label_id]=e})),this._labels=t}))]}render(){const e=this._sortedLabels(this.value,this._labels,this.hass.locale.language);return(0,s.dy)(v||(v=k`
      ${0}
      ${0}
      <ha-label-picker
        .hass=${0}
        .helper=${0}
        .disabled=${0}
        .required=${0}
        .placeholder=${0}
        .excludeLabels=${0}
        @value-changed=${0}
      >
      </ha-label-picker>
    `),this.label?(0,s.dy)(y||(y=k`<label>${0}</label>`),this.label):s.Ld,null!=e&&e.length?(0,s.dy)(g||(g=k`<ha-chip-set>
            ${0}
          </ha-chip-set>`),(0,l.r)(e,(e=>null==e?void 0:e.label_id),(e=>{const t=null!=e&&e.color?(0,n.I)(e.color):void 0;return(0,s.dy)(m||(m=k`
                  <ha-input-chip
                    .item=${0}
                    @remove=${0}
                    @click=${0}
                    .label=${0}
                    selected
                    style=${0}
                  >
                    ${0}
                  </ha-input-chip>
                `),e,this._removeItem,this._openDetail,null==e?void 0:e.name,t?`--color: ${t}`:"",null!=e&&e.icon?(0,s.dy)(f||(f=k`<ha-icon
                          slot="icon"
                          .icon=${0}
                        ></ha-icon>`),e.icon):s.Ld)}))):s.Ld,this.hass,this.helper,this.disabled,this.required,this.placeholder,this.value,this._labelChanged)}get _value(){return this.value||[]}_removeItem(e){const t=e.currentTarget.item;this._setValue(this._value.filter((e=>e!==t.label_id)))}_openDetail(e){const t=e.currentTarget.item;(0,p.T)(this,{entry:t,updateEntry:async e=>{await(0,h.$0)(this.hass,t.label_id,e)}})}_labelChanged(e){e.stopPropagation();const t=e.detail.value;t&&!this._value.includes(t)&&(this._setValue([...this._value,t]),this.labelPicker.value="")}_setValue(e){this.value=e,setTimeout((()=>{(0,c.B)(this,"value-changed",{value:e}),(0,c.B)(this,"change")}),0)}constructor(...e){super(...e),this.noAdd=!1,this.disabled=!1,this.required=!1,this._sortedLabels=(0,r.Z)(((e,t,i)=>null==e?void 0:e.map((e=>null==t?void 0:t[e])).sort(((e,t)=>(0,d.$K)((null==e?void 0:e.name)||"",(null==t?void 0:t.name)||"",i)))))}}$.styles=(0,s.iv)(C||(C=k`
    ha-chip-set {
      margin-bottom: 8px;
    }
    ha-input-chip {
      --md-input-chip-selected-container-color: var(--color, var(--grey-color));
      --ha-input-chip-selected-container-opacity: 0.5;
      --md-input-chip-selected-outline-width: 1px;
    }
    label {
      display: block;
      margin: 0 0 8px;
    }
  `)),(0,a.__decorate)([(0,o.Cb)({attribute:!1})],$.prototype,"hass",void 0),(0,a.__decorate)([(0,o.Cb)()],$.prototype,"label",void 0),(0,a.__decorate)([(0,o.Cb)({attribute:!1})],$.prototype,"value",void 0),(0,a.__decorate)([(0,o.Cb)()],$.prototype,"helper",void 0),(0,a.__decorate)([(0,o.Cb)()],$.prototype,"placeholder",void 0),(0,a.__decorate)([(0,o.Cb)({type:Boolean,attribute:"no-add"})],$.prototype,"noAdd",void 0),(0,a.__decorate)([(0,o.Cb)({type:Array,attribute:"include-domains"})],$.prototype,"includeDomains",void 0),(0,a.__decorate)([(0,o.Cb)({type:Array,attribute:"exclude-domains"})],$.prototype,"excludeDomains",void 0),(0,a.__decorate)([(0,o.Cb)({type:Array,attribute:"include-device-classes"})],$.prototype,"includeDeviceClasses",void 0),(0,a.__decorate)([(0,o.Cb)({type:Array,attribute:"exclude-label"})],$.prototype,"excludeLabels",void 0),(0,a.__decorate)([(0,o.Cb)({attribute:!1})],$.prototype,"deviceFilter",void 0),(0,a.__decorate)([(0,o.Cb)({attribute:!1})],$.prototype,"entityFilter",void 0),(0,a.__decorate)([(0,o.Cb)({type:Boolean})],$.prototype,"disabled",void 0),(0,a.__decorate)([(0,o.Cb)({type:Boolean})],$.prototype,"required",void 0),(0,a.__decorate)([(0,o.SB)()],$.prototype,"_labels",void 0),(0,a.__decorate)([(0,o.IO)("ha-label-picker",!0)],$.prototype,"labelPicker",void 0),$=(0,a.__decorate)([(0,o.Mo)("ha-labels-picker")],$),t()}catch(v){t(v)}}))},42846:function(e,t,i){i.d(t,{$0:function(){return d},f4:function(){return n},jo:function(){return c}});i(18574),i(87799);var a=i(88865),s=i(92949),o=i(16811);const l=e=>e.sendMessagePromise({type:"config/label_registry/list"}).then((e=>e.sort(((e,t)=>(0,s.$K)(e.name,t.name))))),r=(e,t)=>e.subscribeEvents((0,o.D)((()=>l(e).then((e=>t.setState(e,!0)))),500,!0),"label_registry_updated"),n=(e,t)=>(0,a.B)("_labelRegistry",l,r,e,t),c=(e,t)=>e.callWS(Object.assign({type:"config/label_registry/create"},t)),d=(e,t,i)=>e.callWS(Object.assign({type:"config/label_registry/update",label_id:t},i))},66299:function(e,t,i){i.d(t,{f:function(){return o}});i(39710),i(26847),i(81738),i(72489),i(1455),i(56389),i(27530);var a=i(73742),s=i(7616);const o=e=>{class t extends e{connectedCallback(){super.connectedCallback(),this._checkSubscribed()}disconnectedCallback(){if(super.disconnectedCallback(),this.__unsubs){for(;this.__unsubs.length;){const e=this.__unsubs.pop();e instanceof Promise?e.then((e=>e())):e()}this.__unsubs=void 0}}updated(e){if(super.updated(e),e.has("hass"))this._checkSubscribed();else if(this.hassSubscribeRequiredHostProps)for(const t of e.keys())if(this.hassSubscribeRequiredHostProps.includes(t))return void this._checkSubscribed()}hassSubscribe(){return[]}_checkSubscribed(){var e;void 0!==this.__unsubs||!this.isConnected||void 0===this.hass||null!==(e=this.hassSubscribeRequiredHostProps)&&void 0!==e&&e.some((e=>void 0===this[e]))||(this.__unsubs=this.hassSubscribe())}}return(0,a.__decorate)([(0,s.Cb)({attribute:!1})],t.prototype,"hass",void 0),t}},76948:function(e,t,i){i.d(t,{T:function(){return o}});i(26847),i(1455),i(27530);var a=i(29740);const s=()=>i.e("1550").then(i.bind(i,40504)),o=(e,t)=>{(0,a.B)(e,"show-dialog",{dialogTag:"dialog-label-detail",dialogImport:s,dialogParams:t})}}}]);
//# sourceMappingURL=9204.1c32bdc8ed5e0fd2.js.map