Metadata-Version: 2.4
Name: mail-paicha-cloud
Version: 0.2.0
Summary: Simple Python client for PaichaCloud disposable email API
Home-page: https://github.com/yukisakuna/mail-paicha-cloud
Author: nyaa
Author-email: nyaa <nyaa@paicha.cloud>
License: MIT License
        
        Copyright (c) 2025 Your Name
        
        Permission is hereby granted, free of charge, to any person obtaining a copy
        of this software and associated documentation files (the "Software"), to deal
        in the Software without restriction, including without limitation the rights
        to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
        copies of the Software, and to permit persons to whom the Software is
        furnished to do so, subject to the following conditions:
        
        The above copyright notice and this permission notice shall be included in all
        copies or substantial portions of the Software.
        
        THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
        IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
        FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
        AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
        LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
        OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
        SOFTWARE.
        
Project-URL: Homepage, https://github.com/yukisakuna/mail-paicha-cloud
Project-URL: Source, https://github.com/yukisakuna/mail-paicha-cloud
Requires-Python: >=3.8
Description-Content-Type: text/markdown
License-File: LICENSE
Requires-Dist: requests>=2.25.0
Dynamic: license-file

# PaichaCloud Client ğŸ“¦

PaichaCloud ã®ãƒ¡ãƒ¼ãƒ«å—ä¿¡ API ã‚’æ‰±ã†è»½é‡ Python ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã€‚
**ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã¯ãƒ‰ãƒ¡ã‚¤ãƒ³ä¸€è¦§ã®å–å¾— â†’ ãƒ©ãƒ³ãƒ€ãƒ é¸æŠ â†’ æ–°è¦ãƒ¡ãƒ¼ãƒ«ç™ºè¡Œ**ã§ã™ã€‚å¿…è¦ã«å¿œã˜ã¦ãƒ‰ãƒ¡ã‚¤ãƒ³å›ºå®šã€æ—¢å­˜ã‚¢ãƒ‰ãƒ¬ã‚¹ã§ã®é–²è¦§ã«ã‚‚å¯¾å¿œã€‚

---

## âœ¨ ç‰¹å¾´

* ãƒ‰ãƒ¡ã‚¤ãƒ³ä¸€è¦§ã®å–å¾—ï¼ˆåˆå›ã® `change_mailbox` ã¯ä¸€è¦§å–å¾—å°‚ç”¨ã¨ã—ã¦å®Ÿè¡Œã€ç™ºè¡Œãƒ¡ãƒ¼ãƒ«ã¯ç ´æ£„ï¼‰
* ãƒ©ãƒ³ãƒ€ãƒ ï¼ä»»æ„ãƒ‰ãƒ¡ã‚¤ãƒ³ã§ã® **æ–°è¦ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹ç™ºè¡Œ**
* **æ—¢å­˜ã®ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹ã§ã®å—ä¿¡é–²è¦§**ï¼ˆç™ºè¡Œã‚¹ã‚­ãƒƒãƒ—ï¼‰
* å—ä¿¡ä¸€è¦§ï¼ˆã‚µãƒãƒªãƒ¼ï¼‰ãƒ»å€‹åˆ¥ãƒ¡ãƒ¼ãƒ«ï¼ˆæœ¬æ–‡å«ã‚€è©³ç´°ï¼‰ã®å–å¾—
* ä»¶å/é€ä¿¡è€…ãƒ•ã‚£ãƒ«ã‚¿ã€**æ–°ç€å¾…æ©Ÿ**ï¼ˆãƒãƒ¼ãƒªãƒ³ã‚°ï¼‰
* ãƒ‰ãƒ¡ã‚¤ãƒ³ä¸€è¦§ã®æ•´å½¢è¡¨ç¤ºã€CLI ä»˜å±
* ä¾‹å¤–ãƒ»ã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆãƒ»`requests.Session` å·®ã—æ›¿ãˆç­‰ã®åŸºæœ¬æ‹¡å¼µ

---

## âš¡ ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«

```bash
pip install mail-paicha-cloud
```

ä¾å­˜: `requests`

---

## ğŸš€ ã‚¯ã‚¤ãƒƒã‚¯ã‚¹ã‚¿ãƒ¼ãƒˆ

```python
from paichacloud import PaichaCloudClient

# 1) ãƒ‰ãƒ¡ã‚¤ãƒ³ã¯è‡ªå‹•å–å¾— â†’ ãƒ©ãƒ³ãƒ€ãƒ é¸æŠ â†’ new_email ã‚’ç™ºè¡Œ
client = PaichaCloudClient()

print("Email:", client.email)          # ä¾‹: 0918xxxx@paicharm.tokyo
print("Domains (cached):", client.list_domains())

# 2) å—ä¿¡ä¸€è¦§ï¼ˆã‚µãƒãƒªãƒ¼ï¼‰
inbox = client.inbox()
for m in inbox:
    print("ID:", m["id"], "Subject:", m.get("subject"))

# 3) å€‹åˆ¥ãƒ¡ãƒ¼ãƒ«ã®è©³ç´°ï¼ˆæœ¬æ–‡ãªã©ï¼‰
if inbox:
    detail = client.get_mail(inbox[0]["id"])
    # æœ¬æ–‡ã¯ API ä»•æ§˜ã«ã‚ˆã‚Š 'text' / 'body' / 'html' ãªã©ã®ã‚­ãƒ¼ã«å…¥ã‚‹ã“ã¨ãŒã‚ã‚Šã¾ã™
    print(detail)
```

---

## ğŸ“¬ ãƒ¡ãƒ¼ãƒ«ã‚’è¦‹ã‚‹ï¼ˆå…¨ãƒ‘ã‚¿ãƒ¼ãƒ³ï¼‰

### A. è‡ªå‹•ã§æ–°è¦ã‚¢ãƒ‰ãƒ¬ã‚¹ã‚’ç™ºè¡Œã—ã¦èª­ã‚€ï¼ˆãƒ‡ãƒ•ã‚©ãƒ«ãƒˆï¼‰

```python
client = PaichaCloudClient()
print(client.email)
print(client.inbox())
```

### B. **æ—¢å­˜ã®ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹ã§å—ä¿¡ã‚’è¦‹ã‚‹**ï¼ˆç™ºè¡Œã‚¹ã‚­ãƒƒãƒ—ï¼‰

> ã™ã§ã«æŠŠæ¡ã—ã¦ã„ã‚‹ä¸€æ™‚ã‚¢ãƒ‰ãƒ¬ã‚¹ã‚’ä½¿ã„ãŸã„å ´åˆ

```python
from paichacloud import PaichaCloudClient

client = PaichaCloudClient(email="already_known@some-domain.tld")
inbox = client.inbox()            # ãã®ã‚¢ãƒ‰ãƒ¬ã‚¹ã®å—ä¿¡ä¸€è¦§
if inbox:
    detail = client.get_mail(inbox[0]["id"])
    print(detail)
```

### C. ç‰¹å®šãƒ‰ãƒ¡ã‚¤ãƒ³ã§æ–°è¦ã‚¢ãƒ‰ãƒ¬ã‚¹ã‚’ç™ºè¡Œã—ã¦èª­ã‚€

```python
client = PaichaCloudClient(domain="niganiga.link")
print(client.email)
print(client.inbox())
```

### D. ãƒ‰ãƒ¡ã‚¤ãƒ³ä¸€è¦§ã‹ã‚‰å¥½ã¿ã§é¸ã‚“ã§ç™ºè¡Œã—ã¦èª­ã‚€

```python
client = PaichaCloudClient()         # ã¨ã‚Šã‚ãˆãšèµ·å‹•ï¼ˆã“ã®æ™‚ç‚¹ã§1ã¤ç™ºè¡Œã•ã‚Œã‚‹ï¼‰
domains = client.fetch_domains()     # ä¸€è¦§ã ã‘ã‚’å–ã‚Šç›´ã—ï¼ˆã“ã®æ™‚ã® new_email ã¯å†…éƒ¨ã§ç ´æ£„ï¼‰
# ä¾‹: .tokyo å„ªå…ˆã€ç„¡ã‘ã‚Œã°å…ˆé ­
choices = [d for d in domains if d.endswith(".tokyo")] or domains
client.change_mailbox(choices[0])    # æœ¬å‘½ã§ç™ºè¡Œã—ç›´ã—
print(client.email)
print(client.inbox())
```

---

## ğŸ§­ ãƒ‰ãƒ¡ã‚¤ãƒ³æ“ä½œ

```python
# æœ€æ–°ã®ãƒ‰ãƒ¡ã‚¤ãƒ³ä¸€è¦§ã‚’å–å¾—ï¼ˆâ€»ã“ã®å‘¼ã³å‡ºã—ã§è¿”ã‚‹ new_email ã¯ç ´æ£„ã•ã‚Œã¾ã™ï¼‰
domains = client.fetch_domains()
print(domains)

# æ•´å½¢è¡¨ç¤º
print(client.format_domains(columns=3))
```

---

## ğŸ” å—ä¿¡ã‚’æ‰±ã†

### å—ä¿¡ä¸€è¦§ï¼ˆã‚µãƒãƒªãƒ¼ï¼‰

```python
inbox = client.inbox()
for mail in inbox:
    print(mail["id"], mail.get("subject"), mail.get("from"))
```

### å€‹åˆ¥ãƒ¡ãƒ¼ãƒ«ï¼ˆæœ¬æ–‡ãƒ»ãƒ˜ãƒƒãƒ€ç­‰ï¼‰

```python
if inbox:
    mail_id = inbox[0]["id"]
    detail = client.get_mail(mail_id)

    # ã‚ˆãã‚ã‚‹æœ¬æ–‡ã®å–ã‚Šå‡ºã—ï¼ˆç’°å¢ƒã«ã‚ˆã‚Šã‚­ãƒ¼ãŒç•°ãªã‚Šã¾ã™ï¼‰
    body = detail.get("text") or detail.get("body") or detail.get("html") or ""
    print(body[:500])
```

### ä»¶å/é€ä¿¡è€…ãƒ•ã‚£ãƒ«ã‚¿

```python
filtered = client.filter_inbox(inbox, subject_contains="Verify", sender_contains="noreply@")
print(filtered)
```

### æ¡ä»¶ã«åˆã†æ–°ç€ã‚’å¾…æ©Ÿï¼ˆãƒãƒ¼ãƒªãƒ³ã‚°ï¼‰

```python
msg = client.wait_for(subject_contains="Verify", timeout=60, interval=2)
if msg:
    print("Found:", msg.get("subject"))
```

---

## ğŸ’» CLI

```bash
# ãƒ‰ãƒ¡ã‚¤ãƒ³ä¸€è¦§ï¼ˆæœ€æ–°ï¼‰ã‚’è¡¨ç¤º
python -m paichacloud --list-domains

# è‡ªå‹•ç™ºè¡Œ â†’ å—ä¿¡ä¸€è¦§ã‚’è¡¨ç¤º
python -m paichacloud --print-inbox

# æ¡ä»¶ã«åˆã†æ–°ç€ã‚’å¾…æ©Ÿï¼ˆä»¶åã« "Verify" ã‚’å«ã‚€ï¼‰
python -m paichacloud --wait --subject-contains Verify
```

**æ—¢å­˜ã‚¢ãƒ‰ãƒ¬ã‚¹ã§å—ä¿¡ã‚’è¦‹ã‚‹ï¼ˆç™ºè¡Œã‚¹ã‚­ãƒƒãƒ—ï¼‰**

```bash
python -m paichacloud --email already_known@some-domain.tld --print-inbox
```

ä¸»ãªã‚ªãƒ—ã‚·ãƒ§ãƒ³:

* `--list-domains` : ãƒ‰ãƒ¡ã‚¤ãƒ³ä¸€è¦§ã‚’æœ€æ–°å–å¾—ã—ã¦è¡¨ç¤º
* `--print-inbox`  : å—ä¿¡ä¸€è¦§ã‚’ JSON å‡ºåŠ›
* `--wait`         : æ¡ä»¶ã«åˆã†æ–°ç€ã‚’å¾…æ©Ÿ
* `--timeout <sec>` / `--interval <sec>` : å¾…æ©Ÿã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆ/é–“éš”
* `--domain <name>`: ç‰¹å®šãƒ‰ãƒ¡ã‚¤ãƒ³ã§ **ç›´ã¡ã«** æ–°è¦ãƒ¡ãƒ¼ãƒ«ã‚’ç™ºè¡Œ
* `--email <addr>` : æ—¢å­˜ãƒ¡ãƒ¼ãƒ«ã‚’ä½¿ç”¨ï¼ˆç™ºè¡Œã‚¹ã‚­ãƒƒãƒ—ï¼‰
* `--probe-domain <name>` : ãƒ‰ãƒ¡ã‚¤ãƒ³ä¸€è¦§ã®å–å¾—ã«ä½¿ã†ãƒ—ãƒ­ãƒ¼ãƒ–ç”¨ãƒ‰ãƒ¡ã‚¤ãƒ³ï¼ˆæ—¢å®š: `paicharm.tokyo`ï¼‰
* `--seed <int>`   : ãƒ‰ãƒ¡ã‚¤ãƒ³ã®ãƒ©ãƒ³ãƒ€ãƒ é¸æŠã«ã‚·ãƒ¼ãƒ‰ä»˜ä¸ï¼ˆå†ç¾æ€§ï¼‰

---

## âš™ï¸ æ‹¡å¼µãƒ»å®Ÿé‹ç”¨å‘ã‘ Tips

### ä¾‹å¤–ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°

```python
from paichacloud import PaichaCloudClient, PaichaCloudError

try:
    client = PaichaCloudClient(timeout=15.0)
    inbox = client.inbox()
except PaichaCloudError as e:
    print("mail error:", e)
```

### ã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆ / ãƒªãƒ€ã‚¤ãƒ¬ã‚¯ãƒˆ

```python
client = PaichaCloudClient(timeout=15.0, allow_redirects=True)
```

### `requests.Session` ã®å·®ã—æ›¿ãˆï¼ˆãƒ—ãƒ­ã‚­ã‚·ãƒ»ãƒªãƒˆãƒ©ã‚¤ç­‰ï¼‰

```python
import requests
s = requests.Session()
s.proxies = {"https": "http://proxy.local:8080"}
client = PaichaCloudClient(session=s)
```

### ãƒ©ãƒ³ãƒ€ãƒ é¸æŠã®å†ç¾æ€§ï¼ˆãƒ†ã‚¹ãƒˆï¼‰

```python
import random
client = PaichaCloudClient(rng=random.Random(42))
```

### with æ§‹æ–‡

```python
from paichacloud import PaichaCloudClient
with PaichaCloudClient() as client:
    print(client.email)
    print(client.inbox())
```

---

## ğŸ” API ãƒªãƒ•ã‚¡ãƒ¬ãƒ³ã‚¹ï¼ˆæŠœç²‹ï¼‰

```python
class PaichaCloudClient(
    domain: str | None = None, *,
    email: str | None = None,
    session: requests.Session | None = None,
    timeout: float = 30.0,
    allow_redirects: bool = True,
    rng: random.Random | None = None,
    probe_domain: str = "paicharm.tokyo",
)
```

* **æ—¢å®šæŒ™å‹•**ï¼ˆ`domain=None`, `email=None`ï¼‰

  1. ãƒ‰ãƒ¡ã‚¤ãƒ³ä¸€è¦§ã®ã¿å–å¾—ï¼ˆã“ã®æ™‚ã® new\_email ã¯ç ´æ£„ï¼‰
  2. ä¸€è¦§ã‹ã‚‰ãƒ©ãƒ³ãƒ€ãƒ é¸æŠã§ `change_mailbox` å®Ÿè¡Œ â†’ `email` ã‚’ç¢ºä¿
* `domain` ã‚’ä¸ãˆã‚‹ã¨ã€ãã®ãƒ‰ãƒ¡ã‚¤ãƒ³ã§ **ç›´ã¡ã«** æ–°è¦ãƒ¡ãƒ¼ãƒ«ã‚’ç™ºè¡Œ
* `email` ã‚’ä¸ãˆã‚‹ã¨ã€**ç™ºè¡Œã‚¹ã‚­ãƒƒãƒ—**ã§æ—¢å­˜ãƒ¡ãƒ¼ãƒ«ã‚’å³å‚ç…§

**å±æ€§**

* `email: str | None` â€¦ ç¾åœ¨ã®ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹
* `domains: list[str]` â€¦ ç›´è¿‘ã«å–å¾—ã—ãŸãƒ‰ãƒ¡ã‚¤ãƒ³ä¸€è¦§ï¼ˆã‚­ãƒ£ãƒƒã‚·ãƒ¥ï¼‰

**ä¸»è¦ãƒ¡ã‚½ãƒƒãƒ‰**

* `fetch_domains() -> list[str]` â€¦ ãƒ‰ãƒ¡ã‚¤ãƒ³ä¸€è¦§ã®**æœ€æ–°å–å¾—**ï¼ˆç™ºè¡Œã¯ç ´æ£„ï¼‰
* `list_domains() -> list[str]` â€¦ ã‚­ãƒ£ãƒƒã‚·ãƒ¥è¿”å´ï¼ˆæœ€æ–°ãŒå¿…è¦ãªã‚‰ `fetch_domains()`ï¼‰
* `format_domains(columns: int = 2, padding: int = 2) -> str` â€¦ ä¸€è¦§ã®æ•´å½¢è¡¨ç¤º
* `change_mailbox(domain: str) -> MailboxChange` â€¦ æŒ‡å®šãƒ‰ãƒ¡ã‚¤ãƒ³ã§æ–°è¦ç™ºè¡Œ
* `inbox() -> list[dict]` â€¦ å—ä¿¡ä¸€è¦§ï¼ˆé…åˆ—ï¼‰
* `get_mail(mail_id: str) -> dict` â€¦ å€‹åˆ¥ãƒ¡ãƒ¼ãƒ«ã®è©³ç´°
* `filter_inbox(..., subject_contains=None, sender_contains=None) -> list[dict]`
* `wait_for(..., timeout=60.0, interval=2.0, return_detail=True) -> dict | None`
* `close() -> None`ï¼ˆwith æ§‹æ–‡å¯¾å¿œï¼‰

**ä¾‹å¤–**

* `PaichaCloudError` â€¦ ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆå…±é€šã®ä¾‹å¤–

---

## ğŸ§© ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°

* **`inbox()` ãŒç©º**
  ã¾ã åˆ°ç€ã—ã¦ã„ãªã„å¯èƒ½æ€§ã€‚æ•°ç§’ã€œæ•°åç§’å¾…ã£ã¦å†å®Ÿè¡Œã€ã¾ãŸã¯ `wait_for()` ã‚’åˆ©ç”¨ã€‚
* **æœ¬æ–‡ãŒè¦‹ã¤ã‹ã‚‰ãªã„**
  ç’°å¢ƒã§ã‚­ãƒ¼åãŒç•°ãªã‚‹å¯èƒ½æ€§ï¼ˆ`text`/`body`/`html` ç­‰ï¼‰ã€‚`print(detail.keys())` ã§ç¢ºèªã€‚
* **`Email address is not set`**
  `email` æœªè¨­å®šã§ `inbox()` ç­‰ã‚’å‘¼ã‚“ã å¯èƒ½æ€§ã€‚`PaichaCloudClient()` åˆæœŸåŒ–ã‚„ `change_mailbox()` ã§ç™ºè¡Œ/è¨­å®šã‚’ã€‚
* **ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯/JSON ã‚¨ãƒ©ãƒ¼**
  `PaichaCloudError` ãŒé€å‡ºã€‚ãƒªãƒˆãƒ©ã‚¤ãƒ»ã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆèª¿æ•´ãƒ»`requests.Session` ã®åˆ©ç”¨ã‚’æ¤œè¨ã€‚

---

## AIã ã¨æ€ã„ã¾ã—ãŸã‹ï¼Ÿ

ã¯ã„ï¼æ­£è§£ã§ã™ï¼

ã™ã¹ã¦ã®ã‚³ãƒ¼ãƒ‰ã¯GPt5ã‚’ä½¿ç”¨ã—ã¦å‡ºåŠ›ã•ã‚Œã¾ã—ãŸ
