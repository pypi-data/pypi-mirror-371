{"version":3,"file":"sort-filter-worker.7ae5709d9ac891c4.js","sources":["webpack://lcn-frontend/webpack/runtime/on_chunk_loaded","webpack://lcn-frontend/webpack/runtime/startup_chunk_dependencies","webpack://lcn-frontend/./homeassistant-frontend/src/common/string/compare.ts","webpack://lcn-frontend/./homeassistant-frontend/src/common/string/strip-diacritics.ts","webpack://lcn-frontend/./homeassistant-frontend/src/components/data-table/sort-filter-worker.ts","webpack://lcn-frontend/webpack/runtime/compat_get_default_export","webpack://lcn-frontend/webpack/runtime/define_property_getters","webpack://lcn-frontend/webpack/runtime/ensure_chunk","webpack://lcn-frontend/webpack/runtime/get javascript chunk filename","webpack://lcn-frontend/webpack/runtime/has_own_property","webpack://lcn-frontend/webpack/runtime/public_path","webpack://lcn-frontend/webpack/runtime/rspack_version","webpack://lcn-frontend/webpack/runtime/import_scripts_chunk_loading","webpack://lcn-frontend/webpack/runtime/rspack_unique_id"],"sourcesContent":["var deferred = [];\n__webpack_require__.O = function(result, chunkIds, fn, priority) {\n\tif (chunkIds) {\n\t\tpriority = priority || 0;\n\t\tfor (var i = deferred.length; i > 0 && deferred[i - 1][2] > priority; i--)\n\t\t\tdeferred[i] = deferred[i - 1];\n\t\tdeferred[i] = [chunkIds, fn, priority];\n\t\treturn;\n\t}\n\tvar notFulfilled = Infinity;\n\tfor (var i = 0; i < deferred.length; i++) {\n\t\tvar chunkIds = deferred[i][0];\nvar fn = deferred[i][1];\nvar priority = deferred[i][2];\n\t\tvar fulfilled = true;\n\t\tfor (var j = 0; j < chunkIds.length; j++) {\n\t\t\tif (\n\t\t\t\t(priority & (1 === 0) || notFulfilled >= priority) &&\n\t\t\t\tObject.keys(__webpack_require__.O).every(function(key) { return __webpack_require__.O[key](chunkIds[j]); })\n\t\t\t) {\n\t\t\t\tchunkIds.splice(j--, 1);\n\t\t\t} else {\n\t\t\t\tfulfilled = false;\n\t\t\t\tif (priority < notFulfilled) notFulfilled = priority;\n\t\t\t}\n\t\t}\n\t\tif (fulfilled) {\n\t\t\tdeferred.splice(i--, 1);\n\t\t\tvar r = fn();\n\t\t\tif (r !== undefined) result = r;\n\t\t}\n\t}\n\treturn result;\n};\n","var next = __webpack_require__.x\n__webpack_require__.x = function() {\n  return __webpack_require__.e(\"304\").then(next);\n}","import memoizeOne from \"memoize-one\";\n\nconst collator = memoizeOne(\n  (language: string | undefined) => new Intl.Collator(language)\n);\n\nconst caseInsensitiveCollator = memoizeOne(\n  (language: string | undefined) =>\n    new Intl.Collator(language, { sensitivity: \"accent\" })\n);\n\nconst fallbackStringCompare = (a: string, b: string) => {\n  if (a < b) {\n    return -1;\n  }\n  if (a > b) {\n    return 1;\n  }\n\n  return 0;\n};\n\nexport const stringCompare = (\n  a: string,\n  b: string,\n  language: string | undefined = undefined\n) => {\n  // @ts-ignore\n  if (Intl?.Collator) {\n    return collator(language).compare(a, b);\n  }\n\n  return fallbackStringCompare(a, b);\n};\n\nexport const caseInsensitiveStringCompare = (\n  a: string,\n  b: string,\n  language: string | undefined = undefined\n) => {\n  // @ts-ignore\n  if (Intl?.Collator) {\n    return caseInsensitiveCollator(language).compare(a, b);\n  }\n\n  return fallbackStringCompare(a.toLowerCase(), b.toLowerCase());\n};\n\nexport const orderCompare = (order: string[]) => (a: string, b: string) => {\n  const idxA = order.indexOf(a);\n  const idxB = order.indexOf(b);\n\n  if (idxA === idxB) {\n    return 0;\n  }\n\n  if (idxA === -1) {\n    return 1;\n  }\n\n  if (idxB === -1) {\n    return -1;\n  }\n\n  return idxA - idxB;\n};\n","export const stripDiacritics = (str: string) =>\n  str.normalize(\"NFD\").replace(/[\\u0300-\\u036F]/g, \"\");\n","import { expose } from \"comlink\";\nimport { stringCompare } from \"../../common/string/compare\";\nimport { stripDiacritics } from \"../../common/string/strip-diacritics\";\nimport type {\n  ClonedDataTableColumnData,\n  DataTableRowData,\n  SortableColumnContainer,\n  SortingDirection,\n} from \"./ha-data-table\";\n\nconst filterData = (\n  data: DataTableRowData[],\n  columns: SortableColumnContainer,\n  filter: string\n) => {\n  filter = stripDiacritics(filter.toLowerCase());\n  return data.filter((row) =>\n    Object.entries(columns).some((columnEntry) => {\n      const [key, column] = columnEntry;\n      if (column.filterable) {\n        const value = String(\n          column.filterKey\n            ? row[column.valueColumn || key][column.filterKey]\n            : row[column.valueColumn || key]\n        );\n\n        if (stripDiacritics(value).toLowerCase().includes(filter)) {\n          return true;\n        }\n      }\n      return false;\n    })\n  );\n};\n\nconst sortData = (\n  data: DataTableRowData[],\n  column: ClonedDataTableColumnData,\n  direction: SortingDirection,\n  sortColumn: string,\n  language?: string\n) =>\n  data.sort((a, b) => {\n    let sort = 1;\n    if (direction === \"desc\") {\n      sort = -1;\n    }\n\n    let valA = column.filterKey\n      ? a[column.valueColumn || sortColumn][column.filterKey]\n      : a[column.valueColumn || sortColumn];\n\n    let valB = column.filterKey\n      ? b[column.valueColumn || sortColumn][column.filterKey]\n      : b[column.valueColumn || sortColumn];\n\n    if (column.type === \"numeric\") {\n      valA = isNaN(valA) ? undefined : Number(valA);\n      valB = isNaN(valB) ? undefined : Number(valB);\n    } else if (typeof valA === \"string\" && typeof valB === \"string\") {\n      return sort * stringCompare(valA, valB, language);\n    }\n\n    // Ensure \"undefined\" and \"null\" are always sorted to the bottom\n    if (valA == null && valB != null) {\n      return 1;\n    }\n    if (valB == null && valA != null) {\n      return -1;\n    }\n\n    if (valA < valB) {\n      return sort * -1;\n    }\n    if (valA > valB) {\n      return sort * 1;\n    }\n    return 0;\n  });\n\nconst api = {\n  filterData,\n  sortData,\n};\n\nexport type Api = typeof api;\n\nexpose(api);\n","// getDefaultExport function for compatibility with non-ESM modules\n__webpack_require__.n = function(module) {\n\tvar getter = module && module.__esModule ?\n\t\tfunction() { return module['default']; } :\n\t\tfunction() { return module; };\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};\n","__webpack_require__.d = function(exports, definition) {\n\tfor(var key in definition) {\n        if(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n            Object.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n        }\n    }\n};","__webpack_require__.f = {};\n// This file contains only the entry chunk.\n// The chunk loading function for additional chunks\n__webpack_require__.e = function(chunkId) {\n\treturn Promise.all(\n\t\tObject.keys(__webpack_require__.f).reduce(function(promises, key) {\n\t\t\t__webpack_require__.f[key](chunkId, promises);\n\t\t\treturn promises;\n\t\t}, [])\n\t);\n};","// This function allow to reference chunks\n__webpack_require__.u = function(chunkId) {\n  // return url for filenames not based on template\n  \n  // return url for filenames based on template\n  return \"\" + chunkId + \".\" + \"7aeaa8916a8a59a0\" + \".js\"\n}","__webpack_require__.o = function(obj, prop) { return Object.prototype.hasOwnProperty.call(obj, prop); }","__webpack_require__.p = \"/lcn_static/frontend_es5/\";","__webpack_require__.rv = function() { return \"1.3.11\"; }","var installedChunks = {\"358\": 1,};\n// importScripts chunk loading\nvar installChunk = function(data) {\n    var chunkIds = data[0];\nvar moreModules = data[1];\nvar runtime = data[2];\n    for (var moduleId in moreModules) {\n        if (__webpack_require__.o(moreModules, moduleId)) {\n            __webpack_require__.m[moduleId] = moreModules[moduleId];\n        }\n    }\n    if (runtime) runtime(__webpack_require__);\n    while (chunkIds.length) installedChunks[chunkIds.pop()] = 1;\n    parentChunkLoadingFunction(data);\n};\n__webpack_require__.f.i = function(chunkId, promises) {\n    \n          // \"1\" is the signal for \"already loaded\n          if (!installedChunks[chunkId]) {\n            if (true) {\n              importScripts(__webpack_require__.p + __webpack_require__.u(chunkId));\n            }\n          }\n          \n};\nvar chunkLoadingGlobal = self[\"webpackChunklcn_frontend\"] = self[\"webpackChunklcn_frontend\"] || [];\nvar parentChunkLoadingFunction = chunkLoadingGlobal.push.bind(chunkLoadingGlobal);\nchunkLoadingGlobal.push = installChunk;","__webpack_require__.ruid = \"bundler=rspack@1.3.11\";\n"],"names":["deferred","next","collator","memoizeOne","language","Intl","Collator","fallbackStringCompare","sensitivity","a","b","stripDiacritics","str","normalize","replace","api","filterData","data","columns","filter","toLowerCase","row","Object","entries","some","columnEntry","_columnEntry","_slicedToArray","key","column","filterable","value","String","filterKey","valueColumn","includes","sortData","direction","sortColumn","sort","valA","valB","type","isNaN","undefined","Number","arguments","length","compare","stringCompare","expose","__webpack_require__","n","module","getter","__esModule","d","exports","definition","o","defineProperty","enumerable","get","f","e","chunkId","Promise","all","keys","reduce","promises","u","obj","prop","prototype","hasOwnProperty","call","O","result","chunkIds","fn","priority","notFulfilled","Infinity","i","fulfilled","j","every","splice","r","p","rv","x","then","installedChunks","importScripts","chunkLoadingGlobal","self","parentChunkLoadingFunction","push","bind","moreModules","runtime","moduleId","m","pop","ruid"],"mappings":"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"}