"use strict";(self.webpackChunkhome_assistant_frontend=self.webpackChunkhome_assistant_frontend||[]).push([["84291"],{98879:function(t,e,n){n.d(e,{Z:function(){return M}});n(2394);var a=n(24658),d=n(2560);n(26847),n(27530);function s(t){return"_EC_"+t}var i=function(){function t(t){this.type="graph",this.nodes=[],this.edges=[],this._nodesMap={},this._edgesMap={},this._directed=t||!1}return t.prototype.isDirected=function(){return this._directed},t.prototype.addNode=function(t,e){t=null==t?""+e:""+t;var n=this._nodesMap;if(!n[s(t)]){var a=new r(t,e);return a.hostGraph=this,this.nodes.push(a),n[s(t)]=a,a}},t.prototype.getNodeByIndex=function(t){var e=this.data.getRawIndex(t);return this.nodes[e]},t.prototype.getNodeById=function(t){return this._nodesMap[s(t)]},t.prototype.addEdge=function(t,e,n){var d=this._nodesMap,i=this._edgesMap;if(a.isNumber(t)&&(t=this.nodes[t]),a.isNumber(e)&&(e=this.nodes[e]),t instanceof r||(t=d[s(t)]),e instanceof r||(e=d[s(e)]),t&&e){var h=t.id+"-"+e.id,u=new o(t,e,n);return u.hostGraph=this,this._directed&&(t.outEdges.push(u),e.inEdges.push(u)),t.edges.push(u),t!==e&&e.edges.push(u),this.edges.push(u),i[h]=u,u}},t.prototype.getEdgeByIndex=function(t){var e=this.edgeData.getRawIndex(t);return this.edges[e]},t.prototype.getEdge=function(t,e){t instanceof r&&(t=t.id),e instanceof r&&(e=e.id);var n=this._edgesMap;return this._directed?n[t+"-"+e]:n[t+"-"+e]||n[e+"-"+t]},t.prototype.eachNode=function(t,e){for(var n=this.nodes,a=n.length,d=0;d<a;d++)n[d].dataIndex>=0&&t.call(e,n[d],d)},t.prototype.eachEdge=function(t,e){for(var n=this.edges,a=n.length,d=0;d<a;d++)n[d].dataIndex>=0&&n[d].node1.dataIndex>=0&&n[d].node2.dataIndex>=0&&t.call(e,n[d],d)},t.prototype.breadthFirstTraverse=function(t,e,n,a){if(e instanceof r||(e=this._nodesMap[s(e)]),e){for(var d="out"===n?"outEdges":"in"===n?"inEdges":"edges",i=0;i<this.nodes.length;i++)this.nodes[i].__visited=!1;if(!t.call(a,e,null))for(var o=[e];o.length;){var h=o.shift(),u=h[d];for(i=0;i<u.length;i++){var g=u[i],c=g.node1===h?g.node2:g.node1;if(!c.__visited){if(t.call(a,c,h))return;o.push(c),c.__visited=!0}}}}},t.prototype.update=function(){for(var t=this.data,e=this.edgeData,n=this.nodes,a=this.edges,d=0,s=n.length;d<s;d++)n[d].dataIndex=-1;for(d=0,s=t.count();d<s;d++)n[t.getRawIndex(d)].dataIndex=d;e.filterSelf(function(t){var n=a[e.getRawIndex(t)];return n.node1.dataIndex>=0&&n.node2.dataIndex>=0});for(d=0,s=a.length;d<s;d++)a[d].dataIndex=-1;for(d=0,s=e.count();d<s;d++)a[e.getRawIndex(d)].dataIndex=d},t.prototype.clone=function(){for(var e=new t(this._directed),n=this.nodes,a=this.edges,d=0;d<n.length;d++)e.addNode(n[d].id,n[d].dataIndex);for(d=0;d<a.length;d++){var s=a[d];e.addEdge(s.node1.id,s.node2.id,s.dataIndex)}return e},t}(),r=function(){function t(t,e){this.inEdges=[],this.outEdges=[],this.edges=[],this.dataIndex=-1,this.id=null==t?"":t,this.dataIndex=null==e?-1:e}return t.prototype.degree=function(){return this.edges.length},t.prototype.inDegree=function(){return this.inEdges.length},t.prototype.outDegree=function(){return this.outEdges.length},t.prototype.getModel=function(t){if(!(this.dataIndex<0))return this.hostGraph.data.getItemModel(this.dataIndex).getModel(t)},t.prototype.getAdjacentDataIndices=function(){for(var t={edge:[],node:[]},e=0;e<this.edges.length;e++){var n=this.edges[e];n.dataIndex<0||(t.edge.push(n.dataIndex),t.node.push(n.node1.dataIndex,n.node2.dataIndex))}return t},t.prototype.getTrajectoryDataIndices=function(){for(var t=a.createHashMap(),e=a.createHashMap(),n=0;n<this.edges.length;n++){var d=this.edges[n];if(!(d.dataIndex<0)){t.set(d.dataIndex,!0);for(var s=[d.node1],i=[d.node2],r=0;r<s.length;){var o=s[r];r++,e.set(o.dataIndex,!0);for(var h=0;h<o.inEdges.length;h++)t.set(o.inEdges[h].dataIndex,!0),s.push(o.inEdges[h].node1)}for(r=0;r<i.length;){var u=i[r];r++,e.set(u.dataIndex,!0);for(h=0;h<u.outEdges.length;h++)t.set(u.outEdges[h].dataIndex,!0),i.push(u.outEdges[h].node2)}}}return{edge:t.keys(),node:e.keys()}},t}(),o=function(){function t(t,e,n){this.dataIndex=-1,this.node1=t,this.node2=e,this.dataIndex=null==n?-1:n}return t.prototype.getModel=function(t){if(!(this.dataIndex<0))return this.hostGraph.edgeData.getItemModel(this.dataIndex).getModel(t)},t.prototype.getAdjacentDataIndices=function(){return{edge:[this.dataIndex],node:[this.node1.dataIndex,this.node2.dataIndex]}},t.prototype.getTrajectoryDataIndices=function(){var t=a.createHashMap(),e=a.createHashMap();t.set(this.dataIndex,!0);for(var n=[this.node1],d=[this.node2],s=0;s<n.length;){var i=n[s];s++,e.set(i.dataIndex,!0);for(var r=0;r<i.inEdges.length;r++)t.set(i.inEdges[r].dataIndex,!0),n.push(i.inEdges[r].node1)}for(s=0;s<d.length;){var o=d[s];s++,e.set(o.dataIndex,!0);for(r=0;r<o.outEdges.length;r++)t.set(o.outEdges[r].dataIndex,!0),d.push(o.outEdges[r].node2)}return{edge:t.keys(),node:e.keys()}},t}();function h(t,e){return{getValue:function(n){var a=this[t][e];return a.getStore().get(a.getDimensionIndex(n||"value"),this.dataIndex)},setVisual:function(n,a){this.dataIndex>=0&&this[t][e].setItemVisual(this.dataIndex,n,a)},getVisual:function(n){return this[t][e].getItemVisual(this.dataIndex,n)},setLayout:function(n,a){this.dataIndex>=0&&this[t][e].setItemLayout(this.dataIndex,n,a)},getLayout:function(){return this[t][e].getItemLayout(this.dataIndex)},getGraphicEl:function(){return this[t][e].getItemGraphicEl(this.dataIndex)},getRawIndex:function(){return this[t][e].getRawIndex(this.dataIndex)}}}a.mixin(r,h("hostGraph","data")),a.mixin(o,h("hostGraph","edgeData"));var u=i,g=n(27157),c=(0,g.Yf)();function f(t,e){if(c(d=this).mainData===d){var n=(0,a.extend)({},c(this).datas);n[this.dataType]=e,v(e,n,t)}else y(e,this.dataType,c(this).mainData,t);var d;return e}function p(t,e){return t.struct&&t.struct.update(),e}function l(t,e){return(0,a.each)(c(e).datas,function(n,a){n!==e&&y(n.cloneShallow(),a,e,t)}),e}function I(t){var e=c(this).mainData;return null==t||null==e?e:c(e).datas[t]}function x(){var t=c(this).mainData;return null==t?[{data:t}]:(0,a.map)((0,a.keys)(c(t).datas),function(e){return{type:e,data:c(t).datas[e]}})}function v(t,e,n){c(t).datas={},(0,a.each)(e,function(e,a){y(e,a,t,n)})}function y(t,e,n,a){c(n).datas[e]=t,c(t).mainData=n,t.dataType=e,a.struct&&(t[a.structAttr]=a.struct,a.struct[a.datasAttr[e]]=t),t.getLinkedData=I,t.getLinkedDataAll=x}var E=function(t){var e=t.mainData,n=t.datas;n||(n={main:e},t.datasAttr={main:"data"}),t.datas=t.mainData=null,v(e,n,t),(0,a.each)(n,function(n){(0,a.each)(e.TRANSFERABLE_METHODS,function(e){n.wrapMethod(e,(0,a.curry)(f,t))})}),e.wrapMethod("cloneShallow",(0,a.curry)(l,t)),(0,a.each)(e.CHANGABLE_METHODS,function(n){e.wrapMethod(n,(0,a.curry)(p,t))}),(0,a.assert)(n[e.dataType]===e)},m=n(87903),D=n(93110),_=n(54212);function M(t,e,n,s,i){for(var r=new u(s),o=0;o<t.length;o++)r.addNode(a.retrieve(t[o].id,t[o].name,o),o);var h=[],c=[],f=0;for(o=0;o<e.length;o++){var p=e[o],l=p.source,I=p.target;r.addEdge(l,I,f)&&(c.push(p),h.push(a.retrieve((0,g.U5)(p.id,null),l+" > "+I)),f++)}var x,v=n.get("coordinateSystem");if("cartesian2d"===v||"polar"===v)x=(0,_.Z)(t,n);else{var y=D.Z.get(v),M=y&&y.dimensions||[];a.indexOf(M,"value")<0&&M.concat(["value"]);var w=(0,m.Z)(t,{coordDimensions:M,encodeDefine:n.getEncode()}).dimensions;(x=new d.Z(w,n)).initData(t)}var A=new d.Z(["value"],n);return A.initData(c,h),i&&i(x,A),E({mainData:x,struct:r,structAttr:"graph",datas:{node:x,edge:A},datasAttr:{node:"data",edge:"edgeData"}}),r.update(),r}}}]);
//# sourceMappingURL=84291.4f2354cde0f4cb11.js.map