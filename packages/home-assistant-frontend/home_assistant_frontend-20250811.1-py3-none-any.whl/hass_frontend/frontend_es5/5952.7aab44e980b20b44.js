"use strict";(self.webpackChunkhome_assistant_frontend=self.webpackChunkhome_assistant_frontend||[]).push([["5952"],{16037:function(t,e,n){n.d(e,{V:function(){return i}});var s=n(53049);const i=(t,e)=>(t=>{switch(t){case"de":case"lb":return!0;default:return!1}})(e)?(0,s.f)(t):t.toLocaleLowerCase(e)},78206:function(t,e,n){n.a(t,async function(t,e){try{n(26847),n(27530);var s=n(73742),i=n(59048),r=n(7616),o=n(31733),a=n(72953),c=n(6514),u=(n(993),t([a,c]));[a,c]=u.then?(await u)():u;let l,d,_,h,m,f,p=t=>t;const g="M2.2,16.06L3.88,12L2.2,7.94L6.26,6.26L7.94,2.2L12,3.88L16.06,2.2L17.74,6.26L21.8,7.94L20.12,12L21.8,16.06L17.74,17.74L16.06,21.8L12,20.12L7.94,21.8L6.26,17.74L2.2,16.06M13,17V15H11V17H13M13,13V7H11V13H13Z",b="M9,20.42L2.79,14.21L5.62,11.38L9,14.77L18.88,4.88L21.71,7.71L9,20.42Z";class v extends i.oi{render(){const t=this.progress||this._result?"accent":this.appearance;return(0,i.dy)(l||(l=p` <ha-button .appearance="${0}" .disabled="${0}" .loading="${0}" .variant="${0}" class="${0}"> ${0} <slot>${0}</slot> </ha-button> ${0} `),t,this.disabled,this.progress,"success"===this._result?"success":"error"===this._result?"danger":this.variant,(0,o.$)({result:!!this._result,success:"success"===this._result,error:"error"===this._result}),this.iconPath?(0,i.dy)(d||(d=p`<ha-svg-icon .path="${0}" slot="start"></ha-svg-icon>`),this.iconPath):i.Ld,this.label,this._result?(0,i.dy)(_||(_=p` <div class="progress"> ${0} </div> `),"success"===this._result?(0,i.dy)(h||(h=p`<ha-svg-icon .path="${0}"></ha-svg-icon>`),b):"error"===this._result?(0,i.dy)(m||(m=p`<ha-svg-icon .path="${0}"></ha-svg-icon>`),g):i.Ld):i.Ld)}actionSuccess(){this._setResult("success")}actionError(){this._setResult("error")}_setResult(t){this._result=t,setTimeout(()=>{this._result=void 0},2e3)}constructor(...t){super(...t),this.disabled=!1,this.progress=!1,this.appearance="accent",this.variant="brand"}}v.styles=(0,i.iv)(f||(f=p`:host{outline:0;display:inline-block;position:relative}:host([progress]){pointer-events:none}.progress{bottom:0;display:flex;justify-content:center;align-items:center;position:absolute;top:0;width:100%}ha-button{width:100%}ha-button.result::part(caret),ha-button.result::part(end),ha-button.result::part(label),ha-button.result::part(spinner),ha-button.result::part(start){visibility:hidden}ha-svg-icon{color:var(--white-color)}`)),(0,s.__decorate)([(0,r.Cb)()],v.prototype,"label",void 0),(0,s.__decorate)([(0,r.Cb)({type:Boolean})],v.prototype,"disabled",void 0),(0,s.__decorate)([(0,r.Cb)({type:Boolean,reflect:!0})],v.prototype,"progress",void 0),(0,s.__decorate)([(0,r.Cb)()],v.prototype,"appearance",void 0),(0,s.__decorate)([(0,r.Cb)({attribute:!1})],v.prototype,"iconPath",void 0),(0,s.__decorate)([(0,r.Cb)()],v.prototype,"variant",void 0),(0,s.__decorate)([(0,r.SB)()],v.prototype,"_result",void 0),v=(0,s.__decorate)([(0,r.Mo)("ha-progress-button")],v),e()}catch(l){e(l)}})},89166:function(t,e,n){n.a(t,async function(t,s){try{n.d(e,{Nu:function(){return j},V3:function(){return H},Vk:function(){return _},YA:function(){return k},xS:function(){return m},zP:function(){return O}});n(39710),n(26847),n(2394),n(18574),n(73042),n(81738),n(94814),n(29981),n(22960),n(6989),n(72489),n(87799),n(56303),n(67886),n(65451),n(46015),n(38334),n(94880),n(75643),n(29761),n(56389),n(27530);var i=n(44272),r=n(10388),o=n(15459),a=t([r]);r=(a.then?(await a)():a)[0];const c=["climate","humidifier","water_heater"],u=["climate","humidifier","input_datetime","water_heater","person","device_tracker"],l=["temperature","current_temperature","target_temp_low","target_temp_high","hvac_action","humidity","mode","action","current_humidity"],d=(t,e)=>!t.states[e]||u.includes((0,i.M)(e)),_=(t,e,n,s,i)=>{const r={type:"history/stream",entity_ids:i,start_time:n.toISOString(),end_time:s.toISOString(),minimal_response:!0,no_attributes:!i.some(e=>d(t,e))},o=new h(t);return t.connection.subscribeMessage(t=>e(o.processMessage(t)),r)};class h{processMessage(t){if(!this.combinedHistory||!Object.keys(this.combinedHistory).length)return this.combinedHistory=t.states,this.combinedHistory;if(!Object.keys(t.states).length)return this.combinedHistory;const e=this.hoursToShow?((new Date).getTime()-3600*this.hoursToShow*1e3)/1e3:void 0,n={};for(const s of Object.keys(this.combinedHistory))n[s]=[];for(const s of Object.keys(t.states))n[s]=[];for(const s of Object.keys(n)){if(s in this.combinedHistory&&s in t.states){const e=this.combinedHistory[s],i=e[e.length-1];n[s]=e.concat(t.states[s]),t.states[s][0].lu<i.lu&&(n[s]=n[s].sort((t,e)=>t.lu-e.lu))}else s in this.combinedHistory?n[s]=this.combinedHistory[s]:n[s]=t.states[s];if(e&&s in this.combinedHistory){const t=n[s].filter(t=>t.lu<e);if(!t.length)continue;if(n[s]=n[s].filter(t=>t.lu>=e),n[s].length&&n[s][0].lu===e)continue;const i=t[t.length-1];i.lu=e,n[s].unshift(i)}}return this.combinedHistory=n,this.combinedHistory}constructor(t,e){this.hass=t,this.hoursToShow=e,this.combinedHistory={}}}const m=(t,e,n,s,i,r=!0,o=!0)=>{const a={type:"history/stream",entity_ids:s,start_time:new Date((new Date).getTime()-3600*n*1e3).toISOString(),minimal_response:r,significant_changes_only:o,no_attributes:null!=i?i:!s.some(e=>d(t,e))},c=new h(t,n);return t.connection.subscribeMessage(t=>e(c.processMessage(t)),a)},f=(t,e)=>t.state===e.state&&(!t.attributes||!e.attributes||l.every(n=>t.attributes[n]===e.attributes[n])),p=(t,e,n,s,i,a,c)=>{const u=[],l=a[0];for(const o of a){if(u.length>0&&o.s===u[u.length-1].state)continue;const a={};null!=c&&c.attributes.device_class&&(a.device_class=null==c?void 0:c.attributes.device_class),u.push({state_localize:(0,r.c)(t,e,[],n,s[i],i,Object.assign(Object.assign({},o.a||l.a),a),o.s),state:o.s,last_changed:1e3*(o.lc?o.lc:o.lu)})}return{name:(0,o.a)(i,(null==c?void 0:c.attributes)||l.a),entity_id:i,data:u}},g=(t,e,n,s)=>{const r=[];return Object.keys(n).forEach(t=>{const e=n[t],a=e[0],u=(0,i.M)(t),d=[];for(const n of e){let t;if(c.includes(u)){t={state:n.s,last_changed:1e3*n.lu,attributes:{}};for(const e of l)e in n.a&&(t.attributes[e]=n.a[e])}else t={state:n.s,last_changed:1e3*(n.lc?n.lc:n.lu),attributes:{}};d.length>1&&f(t,d[d.length-1])&&f(t,d[d.length-2])||d.push(t)}const _=t in s?s[t].attributes:"friendly_name"in a.a?a.a:void 0;r.push({domain:u,name:(0,o.a)(t,_||{}),entity_id:t,states:d})}),{unit:t,device_class:e,identifier:Object.keys(n).join(""),data:r}},b=["counter","input_number","number"],v=t=>b.includes(t),y=t=>"unit_of_measurement"in t||"state_class"in t,w=(t,e)=>null!=t.attributes.device_class&&e.includes(t.attributes.device_class),$=" ",k=(t,e,n,s,i=!1)=>{const r={};n.forEach(t=>{t in e&&(r[t]=e[t])});const o={};Object.entries(r).forEach(([t,e])=>{const n=e.map(t=>({s:null!=t.mean?t.mean.toString():t.state.toString(),lc:t.start/1e3,a:{},lu:t.start/1e3}));o[t]=n});const a=j(t,o,[],t.localize,s,i,!0);return((null==a?void 0:a.line)||[]).forEach(t=>{t.data.forEach(t=>{t.statistics=t.states,t.states=[]})}),a},j=(t,e,n,s,r,o=!1,a=!1)=>{const c={},u=[],l={};if(new Set([...n,...Object.keys(e)]).forEach(n=>{n in e?l[n]=e[n]:t.states[n]&&(l[n]=[{s:t.states[n].state,a:t.states[n].attributes,lu:new Date(t.states[n].last_updated).getTime()/1e3}])}),!l)return{line:[],timeline:[]};Object.keys(l).forEach(e=>{var n;const d=l[e];if(0===d.length)return;const _=(0,i.M)(e),h=e in t.states?t.states[e]:void 0,m=h||v(_)?void 0:d.find(t=>t.a&&y(t.a));let f;f=O(_,h,m,r,a)?(null==h?void 0:h.attributes.unit_of_measurement)||(null==m?void 0:m.a.unit_of_measurement)||$:{zone:s("ui.dialogs.more_info_control.zone.graph_unit"),climate:t.config.unit_system.temperature,humidifier:"%",water_heater:t.config.unit_system.temperature}[_];const g={climate:"temperature",humidifier:"humidity",water_heater:"temperature"}[_]||(null===(n=(null==h?void 0:h.attributes)||(null==m?void 0:m.a))||void 0===n?void 0:n.device_class),b=L(f,g,o);f?b&&b in c&&e in c[b]?c[b][e].push(...d):b&&(b in c||(c[b]={}),c[b][e]=d):u.push(p(s,t.locale,t.config,t.entities,e,d,h))});return{line:Object.keys(c).map(e=>{const n=e.split("_"),s=n[0],i=n.slice(1).join("_")||void 0;return g(s,i,c[e],t.states)}),timeline:u}},L=(t,e,n)=>n?`${t}_${e||""}`:t,O=(t,e,n,s,i=!1)=>i||v(t)||null!=e&&y(e.attributes)||null!=e&&"sensor"===t&&w(e,s)||null!=n,H=(t,e,n=!0)=>{if(!e)return t;const s=Object.assign(Object.assign({},t),{},{line:[]}),i={};for(const c of t.line){const t=L(c.unit,c.device_class,n);t&&(i[t]={historyItem:c})}for(const c of e.line){var r,o;if(c.unit===$)c.unit=null!==(r=null===(o=t.line.find(t=>t.identifier===c.identifier))||void 0===o?void 0:o.unit)&&void 0!==r?r:$;const e=L(c.unit,c.device_class,n);e&&(e in i?i[e].ltsItem=c:i[e]={ltsItem:c})}for(const{historyItem:c,ltsItem:u}of Object.values(i)){if(!c||!u){s.line.push(c||u);continue}const t=Object.assign(Object.assign({},c),{},{data:[]}),e=new Set([...c.data.map(t=>t.entity_id),...u.data.map(t=>t.entity_id)]);for(const n of e){var a;const e=c.data.find(t=>t.entity_id===n),s=u.data.find(t=>t.entity_id===n);if(!e||!s){t.data.push(e||s);continue}const i=(null===(a=e.states[0])||void 0===a?void 0:a.last_changed)||s.statistics[s.statistics.length-1].last_changed+1,r=[];for(const t of s.statistics){if(t.last_changed>=i)break;r.push(t)}t.data.push(0===r.length?e:Object.assign(Object.assign({},e),{},{statistics:r}))}s.line.push(t)}return s};s()}catch(c){s(c)}})},43563:function(t,e,n){n.d(e,{MY:function(){return g},Yc:function(){return h},hb:function(){return f},jV:function(){return u},o1:function(){return m},ri:function(){return p},sS:function(){return d}});n(26847),n(1455),n(64455),n(56303),n(6202),n(44261),n(27530);var s=n(40141),i=n(44272),r=n(6219),o=n(16037),a=n(16230);const c="ui.components.logbook.messages",u=["counter","proximity","sensor","zone"],l={triggered_by_numeric_state_of:"numeric state of",triggered_by_state_of:"state of",triggered_by_event:"event",triggered_by_time_pattern:"time pattern",triggered_by_time:"time",triggered_by_homeassistant_stopping:"Home Assistant stopping",triggered_by_homeassistant_starting:"Home Assistant starting"},d=async(t,e,n)=>_(t,e,void 0,void 0,n),_=(t,e,n,s,i,r)=>{if((s||r)&&(!s||0===s.length)&&(!r||0===r.length))return Promise.resolve([]);const o={type:"logbook/get_events",start_time:e};return n&&(o.end_time=n),null!=s&&s.length&&(o.entity_ids=s),null!=r&&r.length&&(o.device_ids=r),i&&(o.context_id=i),t.callWS(o)},h=(t,e,n,s,i,r,o)=>{if((r||o)&&(!r||0===r.length)&&(!o||0===o.length))return Promise.reject("No entities or devices");const a={type:"logbook/event_stream",start_time:n,end_time:s};return null!=r&&r.length&&(a.entity_ids=r),null!=o&&o.length&&(a.device_ids=o),t.connection.subscribeMessage(t=>e(t,i),a)},m=(t,e)=>({entity_id:t.entity_id,state:e,attributes:{device_class:null==t?void 0:t.attributes.device_class,source_type:null==t?void 0:t.attributes.source_type,has_date:null==t?void 0:t.attributes.has_date,has_time:null==t?void 0:t.attributes.has_time,entity_picture_local:s.iY.has((0,i.M)(t.entity_id))||null==t?void 0:t.attributes.entity_picture_local,entity_picture:s.iY.has((0,i.M)(t.entity_id))||null==t?void 0:t.attributes.entity_picture}}),f=(t,e)=>{for(const n of Object.keys(l)){const s=l[n];if(e.startsWith(s))return e.replace(s,`${t(`ui.components.logbook.${n}`)}`)}return e},p=(t,e,n,i,r)=>{switch(r){case"device_tracker":case"person":return"not_home"===n?e(`${c}.was_away`):"home"===n?e(`${c}.was_at_home`):e(`${c}.was_at_state`,{state:n});case"sun":return e("above_horizon"===n?`${c}.rose`:`${c}.set`);case"binary_sensor":{const r=n===s.uo,a=n===s.lC,u=i.attributes.device_class;if(u&&(r||a))return e(`${c}.${r?"detected_device_classes":"cleared_device_classes"}.${u}`,{device_class:(0,o.V)(e(`component.binary_sensor.entity_component.${u}.name`)||u,t.language)})||e(`${c}.${r?"detected_device_class":"cleared_device_class"}`,{device_class:(0,o.V)(e(`component.binary_sensor.entity_component.${u}.name`)||u,t.language)});break}case"cover":switch(n){case"open":return e(`${c}.was_opened`);case"opening":return e(`${c}.is_opening`);case"closing":return e(`${c}.is_closing`);case"closed":return e(`${c}.was_closed`)}break;case"event":return e(`${c}.detected_event_no_type`);case"lock":switch(n){case"unlocked":return e(`${c}.was_unlocked`);case"locking":return e(`${c}.is_locking`);case"unlocking":return e(`${c}.is_unlocking`);case"opening":return e(`${c}.is_opening`);case"open":return e(`${c}.is_opened`);case"locked":return e(`${c}.was_locked`);case"jammed":return e(`${c}.is_jammed`)}}return n===s.uo?e(`${c}.turned_on`):n===s.lC?e(`${c}.turned_off`):n===a.lz?e(`${c}.became_unknown`):n===a.nZ?e(`${c}.became_unavailable`):t.localize(`${c}.changed_to_state`,{state:i?t.formatEntityState(i,n):n})},g=t=>"sensor"!==(0,r.N)(t)||void 0===t.attributes.unit_of_measurement&&void 0===t.attributes.state_class},70233:function(t,e,n){n.a(t,async function(t,s){try{n.d(e,{Fb:function(){return v},Gt:function(){return y},Og:function(){return _},PG:function(){return b},kh:function(){return l},l:function(){return f},oA:function(){return d},tm:function(){return p},uq:function(){return m}});n(39710),n(56389);var i=n(37528),r=n(44272),o=n(45064),a=n(43563),c=n(89166),u=t([c]);c=(u.then?(await u)():u)[0];const l=["camera","configurator"],d=["scene","automation"],_=["script"],h=["alarm_control_panel","cover","climate","conversation","fan","humidifier","input_boolean","light","lock","siren","script","switch","valve","water_heater","weather"],m=["update"],f=["alarm_control_panel","automation","camera","climate","configurator","conversation","counter","cover","date","datetime","fan","group","humidifier","image","input_boolean","input_datetime","lawn_mower","light","lock","media_player","person","remote","script","scene","siren","sun","switch","time","timer","update","vacuum","valve","water_heater","weather"],p=["input_number","input_select","input_text","number","scene","select","text","update","event"],g=["camera","configurator"],b=(t,e)=>(0,i.p)(t,"history")&&!g.includes((0,r.M)(e)),v=(t,e,n=[])=>{if(!(0,i.p)(t,"logbook"))return!1;const s=t.states[e];if(!s)return!1;const o=(0,r.M)(e);return!(a.jV.includes(o)&&(0,c.zP)(o,s,void 0,n)||g.includes(o))},y=t=>{const e=(0,r.M)(t.entity_id);if("group"===e){const e=(0,o.W)(t);return null!=e&&"group"!==e&&h.includes(e)}return h.includes(e)};s()}catch(l){s(l)}})},60164:function(t,e,n){n.a(t,async function(t,s){try{n.r(e),n.d(e,{createBadgeElement:function(){return a.JE},createCardElement:function(){return c.Z6},createHeaderFooterElement:function(){return u.t},createHuiElement:function(){return l.w},createRowElement:function(){return d.m},importMoreInfoControl:function(){return o.ST},showAlertDialog:function(){return r.showAlertDialog},showConfirmationDialog:function(){return r.showConfirmationDialog},showEnterCodeDialog:function(){return i.t},showPromptDialog:function(){return r.showPromptDialog}});var i=n(35025),r=n(72242),o=n(48346),a=n(69962),c=n(24349),u=n(35942),l=n(39179),d=n(9874),_=t([o,a,c,l,d]);[o,a,c,l,d]=_.then?(await _)():_,s()}catch(h){s(h)}})}}]);
//# sourceMappingURL=5952.7aab44e980b20b44.js.map