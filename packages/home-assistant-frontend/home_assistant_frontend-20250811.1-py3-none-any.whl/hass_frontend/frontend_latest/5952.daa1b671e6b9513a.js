export const __webpack_ids__=["5952"];export const __webpack_modules__={16037:function(t,e,s){s.d(e,{V:()=>n});var i=s(53049);const n=(t,e)=>(t=>{switch(t){case"de":case"lb":return!0;default:return!1}})(e)?(0,i.f)(t):t.toLocaleLowerCase(e)},78206:function(t,e,s){s.a(t,async function(t,e){try{var i=s(73742),n=s(59048),a=s(26292),o=s(31733),r=s(72953),c=s(6514),u=(s(993),t([r,c]));[r,c]=u.then?(await u)():u;const l="M2.2,16.06L3.88,12L2.2,7.94L6.26,6.26L7.94,2.2L12,3.88L16.06,2.2L17.74,6.26L21.8,7.94L20.12,12L21.8,16.06L17.74,17.74L16.06,21.8L12,20.12L7.94,21.8L6.26,17.74L2.2,16.06M13,17V15H11V17H13M13,13V7H11V13H13Z",_="M9,20.42L2.79,14.21L5.62,11.38L9,14.77L18.88,4.88L21.71,7.71L9,20.42Z";class d extends n.oi{render(){const t=this.progress||this._result?"accent":this.appearance;return n.dy` <ha-button .appearance="${t}" .disabled="${this.disabled}" .loading="${this.progress}" .variant="${"success"===this._result?"success":"error"===this._result?"danger":this.variant}" class="${(0,o.$)({result:!!this._result,success:"success"===this._result,error:"error"===this._result})}"> ${this.iconPath?n.dy`<ha-svg-icon .path="${this.iconPath}" slot="start"></ha-svg-icon>`:n.Ld} <slot>${this.label}</slot> </ha-button> ${this._result?n.dy` <div class="progress"> ${"success"===this._result?n.dy`<ha-svg-icon .path="${_}"></ha-svg-icon>`:"error"===this._result?n.dy`<ha-svg-icon .path="${l}"></ha-svg-icon>`:n.Ld} </div> `:n.Ld} `}actionSuccess(){this._setResult("success")}actionError(){this._setResult("error")}_setResult(t){this._result=t,setTimeout(()=>{this._result=void 0},2e3)}constructor(...t){super(...t),this.disabled=!1,this.progress=!1,this.appearance="accent",this.variant="brand"}}d.styles=n.iv`:host{outline:0;display:inline-block;position:relative}:host([progress]){pointer-events:none}.progress{bottom:0;display:flex;justify-content:center;align-items:center;position:absolute;top:0;width:100%}ha-button{width:100%}ha-button.result::part(caret),ha-button.result::part(end),ha-button.result::part(label),ha-button.result::part(spinner),ha-button.result::part(start){visibility:hidden}ha-svg-icon{color:var(--white-color)}`,(0,i.__decorate)([(0,a.Cb)()],d.prototype,"label",void 0),(0,i.__decorate)([(0,a.Cb)({type:Boolean})],d.prototype,"disabled",void 0),(0,i.__decorate)([(0,a.Cb)({type:Boolean,reflect:!0})],d.prototype,"progress",void 0),(0,i.__decorate)([(0,a.Cb)()],d.prototype,"appearance",void 0),(0,i.__decorate)([(0,a.Cb)({attribute:!1})],d.prototype,"iconPath",void 0),(0,i.__decorate)([(0,a.Cb)()],d.prototype,"variant",void 0),(0,i.__decorate)([(0,a.SB)()],d.prototype,"_result",void 0),d=(0,i.__decorate)([(0,a.Mo)("ha-progress-button")],d),e()}catch(t){e(t)}})},89166:function(t,e,s){s.a(t,async function(t,i){try{s.d(e,{Nu:()=>L,V3:()=>M,Vk:()=>d,YA:()=>k,xS:()=>m,zP:()=>H});s(2394),s(81738),s(94814),s(29981),s(22960),s(6989),s(72489),s(67886),s(65451),s(46015),s(38334),s(94880),s(75643),s(29761);var n=s(44272),a=s(10388),o=s(15459),r=t([a]);a=(r.then?(await r)():r)[0];const c=["climate","humidifier","water_heater"],u=["climate","humidifier","input_datetime","water_heater","person","device_tracker"],l=["temperature","current_temperature","target_temp_low","target_temp_high","hvac_action","humidity","mode","action","current_humidity"],_=(t,e)=>!t.states[e]||u.includes((0,n.M)(e)),d=(t,e,s,i,n)=>{const a={type:"history/stream",entity_ids:n,start_time:s.toISOString(),end_time:i.toISOString(),minimal_response:!0,no_attributes:!n.some(e=>_(t,e))},o=new h(t);return t.connection.subscribeMessage(t=>e(o.processMessage(t)),a)};class h{processMessage(t){if(!this.combinedHistory||!Object.keys(this.combinedHistory).length)return this.combinedHistory=t.states,this.combinedHistory;if(!Object.keys(t.states).length)return this.combinedHistory;const e=this.hoursToShow?((new Date).getTime()-3600*this.hoursToShow*1e3)/1e3:void 0,s={};for(const t of Object.keys(this.combinedHistory))s[t]=[];for(const e of Object.keys(t.states))s[e]=[];for(const i of Object.keys(s)){if(i in this.combinedHistory&&i in t.states){const e=this.combinedHistory[i],n=e[e.length-1];s[i]=e.concat(t.states[i]),t.states[i][0].lu<n.lu&&(s[i]=s[i].sort((t,e)=>t.lu-e.lu))}else i in this.combinedHistory?s[i]=this.combinedHistory[i]:s[i]=t.states[i];if(e&&i in this.combinedHistory){const t=s[i].filter(t=>t.lu<e);if(!t.length)continue;if(s[i]=s[i].filter(t=>t.lu>=e),s[i].length&&s[i][0].lu===e)continue;const n=t[t.length-1];n.lu=e,s[i].unshift(n)}}return this.combinedHistory=s,this.combinedHistory}constructor(t,e){this.hass=t,this.hoursToShow=e,this.combinedHistory={}}}const m=(t,e,s,i,n,a=!0,o=!0)=>{const r={type:"history/stream",entity_ids:i,start_time:new Date((new Date).getTime()-3600*s*1e3).toISOString(),minimal_response:a,significant_changes_only:o,no_attributes:n??!i.some(e=>_(t,e))},c=new h(t,s);return t.connection.subscribeMessage(t=>e(c.processMessage(t)),r)},p=(t,e)=>t.state===e.state&&(!t.attributes||!e.attributes||l.every(s=>t.attributes[s]===e.attributes[s])),g=(t,e,s,i,n,r,c)=>{const u=[],l=r[0];for(const o of r){if(u.length>0&&o.s===u[u.length-1].state)continue;const r={};c?.attributes.device_class&&(r.device_class=c?.attributes.device_class),u.push({state_localize:(0,a.c)(t,e,[],s,i[n],n,{...o.a||l.a,...r},o.s),state:o.s,last_changed:1e3*(o.lc?o.lc:o.lu)})}return{name:(0,o.a)(n,c?.attributes||l.a),entity_id:n,data:u}},b=(t,e,s,i)=>{const a=[];return Object.keys(s).forEach(t=>{const e=s[t],r=e[0],u=(0,n.M)(t),_=[];for(const t of e){let e;if(c.includes(u)){e={state:t.s,last_changed:1e3*t.lu,attributes:{}};for(const s of l)s in t.a&&(e.attributes[s]=t.a[s])}else e={state:t.s,last_changed:1e3*(t.lc?t.lc:t.lu),attributes:{}};_.length>1&&p(e,_[_.length-1])&&p(e,_[_.length-2])||_.push(e)}const d=t in i?i[t].attributes:"friendly_name"in r.a?r.a:void 0;a.push({domain:u,name:(0,o.a)(t,d||{}),entity_id:t,states:_})}),{unit:t,device_class:e,identifier:Object.keys(s).join(""),data:a}},f=["counter","input_number","number"],y=t=>f.includes(t),v=t=>"unit_of_measurement"in t||"state_class"in t,w=(t,e)=>null!=t.attributes.device_class&&e.includes(t.attributes.device_class),$=" ",k=(t,e,s,i,n=!1)=>{const a={};s.forEach(t=>{t in e&&(a[t]=e[t])});const o={};Object.entries(a).forEach(([t,e])=>{const s=e.map(t=>({s:null!=t.mean?t.mean.toString():t.state.toString(),lc:t.start/1e3,a:{},lu:t.start/1e3}));o[t]=s});const r=L(t,o,[],t.localize,i,n,!0);return(r?.line||[]).forEach(t=>{t.data.forEach(t=>{t.statistics=t.states,t.states=[]})}),r},L=(t,e,s,i,a,o=!1,r=!1)=>{const c={},u=[],l={};if(new Set([...s,...Object.keys(e)]).forEach(s=>{s in e?l[s]=e[s]:t.states[s]&&(l[s]=[{s:t.states[s].state,a:t.states[s].attributes,lu:new Date(t.states[s].last_updated).getTime()/1e3}])}),!l)return{line:[],timeline:[]};Object.keys(l).forEach(e=>{const s=l[e];if(0===s.length)return;const _=(0,n.M)(e),d=e in t.states?t.states[e]:void 0,h=d||y(_)?void 0:s.find(t=>t.a&&v(t.a));let m;m=H(_,d,h,a,r)?d?.attributes.unit_of_measurement||h?.a.unit_of_measurement||$:{zone:i("ui.dialogs.more_info_control.zone.graph_unit"),climate:t.config.unit_system.temperature,humidifier:"%",water_heater:t.config.unit_system.temperature}[_];const p=j(m,{climate:"temperature",humidifier:"humidity",water_heater:"temperature"}[_]||(d?.attributes||h?.a)?.device_class,o);m?p&&p in c&&e in c[p]?c[p][e].push(...s):p&&(p in c||(c[p]={}),c[p][e]=s):u.push(g(i,t.locale,t.config,t.entities,e,s,d))});return{line:Object.keys(c).map(e=>{const s=e.split("_"),i=s[0],n=s.slice(1).join("_")||void 0;return b(i,n,c[e],t.states)}),timeline:u}},j=(t,e,s)=>s?`${t}_${e||""}`:t,H=(t,e,s,i,n=!1)=>n||y(t)||null!=e&&v(e.attributes)||null!=e&&"sensor"===t&&w(e,i)||null!=s,M=(t,e,s=!0)=>{if(!e)return t;const i={...t,line:[]},n={};for(const e of t.line){const t=j(e.unit,e.device_class,s);t&&(n[t]={historyItem:e})}for(const i of e.line){i.unit===$&&(i.unit=t.line.find(t=>t.identifier===i.identifier)?.unit??$);const e=j(i.unit,i.device_class,s);e&&(e in n?n[e].ltsItem=i:n[e]={ltsItem:i})}for(const{historyItem:t,ltsItem:e}of Object.values(n)){if(!t||!e){i.line.push(t||e);continue}const s={...t,data:[]},n=new Set([...t.data.map(t=>t.entity_id),...e.data.map(t=>t.entity_id)]);for(const i of n){const n=t.data.find(t=>t.entity_id===i),a=e.data.find(t=>t.entity_id===i);if(!n||!a){s.data.push(n||a);continue}const o=n.states[0]?.last_changed||a.statistics[a.statistics.length-1].last_changed+1,r=[];for(const t of a.statistics){if(t.last_changed>=o)break;r.push(t)}s.data.push(0===r.length?n:{...n,statistics:r})}i.line.push(s)}return i};i()}catch(t){i(t)}})},43563:function(t,e,s){s.d(e,{MY:()=>b,Yc:()=>h,hb:()=>p,jV:()=>u,o1:()=>m,ri:()=>g,sS:()=>_});var i=s(40141),n=s(44272),a=s(6219),o=s(16037),r=s(16230);const c="ui.components.logbook.messages",u=["counter","proximity","sensor","zone"],l={triggered_by_numeric_state_of:"numeric state of",triggered_by_state_of:"state of",triggered_by_event:"event",triggered_by_time_pattern:"time pattern",triggered_by_time:"time",triggered_by_homeassistant_stopping:"Home Assistant stopping",triggered_by_homeassistant_starting:"Home Assistant starting"},_=async(t,e,s)=>d(t,e,void 0,void 0,s),d=(t,e,s,i,n,a)=>{if((i||a)&&(!i||0===i.length)&&(!a||0===a.length))return Promise.resolve([]);const o={type:"logbook/get_events",start_time:e};return s&&(o.end_time=s),i?.length&&(o.entity_ids=i),a?.length&&(o.device_ids=a),n&&(o.context_id=n),t.callWS(o)},h=(t,e,s,i,n,a,o)=>{if((a||o)&&(!a||0===a.length)&&(!o||0===o.length))return Promise.reject("No entities or devices");const r={type:"logbook/event_stream",start_time:s,end_time:i};return a?.length&&(r.entity_ids=a),o?.length&&(r.device_ids=o),t.connection.subscribeMessage(t=>e(t,n),r)},m=(t,e)=>({entity_id:t.entity_id,state:e,attributes:{device_class:t?.attributes.device_class,source_type:t?.attributes.source_type,has_date:t?.attributes.has_date,has_time:t?.attributes.has_time,entity_picture_local:i.iY.has((0,n.M)(t.entity_id))?void 0:t?.attributes.entity_picture_local,entity_picture:i.iY.has((0,n.M)(t.entity_id))?void 0:t?.attributes.entity_picture}}),p=(t,e)=>{for(const s of Object.keys(l)){const i=l[s];if(e.startsWith(i))return e.replace(i,`${t(`ui.components.logbook.${s}`)}`)}return e},g=(t,e,s,n,a)=>{switch(a){case"device_tracker":case"person":return"not_home"===s?e(`${c}.was_away`):"home"===s?e(`${c}.was_at_home`):e(`${c}.was_at_state`,{state:s});case"sun":return e("above_horizon"===s?`${c}.rose`:`${c}.set`);case"binary_sensor":{const a=s===i.uo,r=s===i.lC,u=n.attributes.device_class;if(u&&(a||r))return e(`${c}.${a?"detected_device_classes":"cleared_device_classes"}.${u}`,{device_class:(0,o.V)(e(`component.binary_sensor.entity_component.${u}.name`)||u,t.language)})||e(`${c}.${a?"detected_device_class":"cleared_device_class"}`,{device_class:(0,o.V)(e(`component.binary_sensor.entity_component.${u}.name`)||u,t.language)});break}case"cover":switch(s){case"open":return e(`${c}.was_opened`);case"opening":return e(`${c}.is_opening`);case"closing":return e(`${c}.is_closing`);case"closed":return e(`${c}.was_closed`)}break;case"event":return e(`${c}.detected_event_no_type`);case"lock":switch(s){case"unlocked":return e(`${c}.was_unlocked`);case"locking":return e(`${c}.is_locking`);case"unlocking":return e(`${c}.is_unlocking`);case"opening":return e(`${c}.is_opening`);case"open":return e(`${c}.is_opened`);case"locked":return e(`${c}.was_locked`);case"jammed":return e(`${c}.is_jammed`)}}return s===i.uo?e(`${c}.turned_on`):s===i.lC?e(`${c}.turned_off`):s===r.lz?e(`${c}.became_unknown`):s===r.nZ?e(`${c}.became_unavailable`):t.localize(`${c}.changed_to_state`,{state:n?t.formatEntityState(n,s):s})},b=t=>"sensor"!==(0,a.N)(t)||void 0===t.attributes.unit_of_measurement&&void 0===t.attributes.state_class},70233:function(t,e,s){s.a(t,async function(t,i){try{s.d(e,{Fb:()=>y,Gt:()=>v,Og:()=>d,PG:()=>f,kh:()=>l,l:()=>p,oA:()=>_,tm:()=>g,uq:()=>m});var n=s(37528),a=s(44272),o=s(45064),r=s(43563),c=s(89166),u=t([c]);c=(u.then?(await u)():u)[0];const l=["camera","configurator"],_=["scene","automation"],d=["script"],h=["alarm_control_panel","cover","climate","conversation","fan","humidifier","input_boolean","light","lock","siren","script","switch","valve","water_heater","weather"],m=["update"],p=["alarm_control_panel","automation","camera","climate","configurator","conversation","counter","cover","date","datetime","fan","group","humidifier","image","input_boolean","input_datetime","lawn_mower","light","lock","media_player","person","remote","script","scene","siren","sun","switch","time","timer","update","vacuum","valve","water_heater","weather"],g=["input_number","input_select","input_text","number","scene","select","text","update","event"],b=["camera","configurator"],f=(t,e)=>(0,n.p)(t,"history")&&!b.includes((0,a.M)(e)),y=(t,e,s=[])=>{if(!(0,n.p)(t,"logbook"))return!1;const i=t.states[e];if(!i)return!1;const o=(0,a.M)(e);return!(r.jV.includes(o)&&(0,c.zP)(o,i,void 0,s)||b.includes(o))},v=t=>{const e=(0,a.M)(t.entity_id);if("group"===e){const e=(0,o.W)(t);return null!=e&&"group"!==e&&h.includes(e)}return h.includes(e)};i()}catch(t){i(t)}})},60164:function(t,e,s){s.a(t,async function(t,i){try{if(s.r(e),s.d(e,{createBadgeElement:()=>r.JE,createCardElement:()=>c.Z6,createHeaderFooterElement:()=>u.t,createHuiElement:()=>l.w,createRowElement:()=>_.m,importMoreInfoControl:()=>o.ST,showAlertDialog:()=>a.showAlertDialog,showConfirmationDialog:()=>a.showConfirmationDialog,showEnterCodeDialog:()=>n.t,showPromptDialog:()=>a.showPromptDialog}),99387==s.j)var n=s(35025);var a=s(72242),o=s(48346),r=s(69962),c=s(24349),u=s(35942),l=s(39179),_=s(9874),d=t([o,r,c,l,_]);[o,r,c,l,_]=d.then?(await d)():d,i()}catch(t){i(t)}})}};
//# sourceMappingURL=5952.daa1b671e6b9513a.js.map