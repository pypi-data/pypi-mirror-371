export const __webpack_ids__=["90955"];export const __webpack_modules__={45332:function(e,t,i){function n(e){return null==e||Array.isArray(e)?e:[e]}i.d(t,{r:()=>n})},54731:function(e,t,i){i.d(t,{z:()=>n});const n=e=>(t,i)=>e.includes(t,i)},2080:function(e,t,i){i.d(t,{J:()=>r,_:()=>s});i(81738),i(72489);const n=/{%|{{/,r=e=>n.test(e),s=e=>{if(!e)return!1;if("string"==typeof e)return r(e);if("object"==typeof e){return(Array.isArray(e)?e:Object.values(e)).some(e=>e&&s(e))}return!1}},10142:function(e,t,i){i.d(t,{B$:()=>a,EQ:()=>y,Es:()=>d,Gd:()=>l,HF:()=>j,Ip:()=>b,J8:()=>q,Jd:()=>A,Kc:()=>h,Pl:()=>w,SC:()=>u,SQ:()=>p,T5:()=>E,W9:()=>v,Xm:()=>Z,Yc:()=>c,r4:()=>g,sq:()=>_});i(2394),i(81738),i(22960),i(6989);var n=i(67050),r=i(45332),s=i(66095),o=i(64637);const a="single",c=10,l=e=>{if("condition"in e&&Array.isArray(e.condition))return{condition:"and",conditions:e.condition};for(const t of["and","or","not"])if(t in e)return{condition:t,conditions:e[t]};return e},d=(e,t)=>{e.callService("automation","trigger",{entity_id:t,skip_condition:!0})},u=(e,t)=>e.callApi("DELETE",`config/automation/config/${t}`);let f;const g=(e,t)=>e.callApi("GET",`config/automation/config/${t}`),p=(e,t)=>e.callWS({type:"automation/config",entity_id:t}),_=(e,t,i)=>e.callApi("POST",`config/automation/config/${t}`,i),y=e=>{e=m(e);for(const t of["triggers","conditions","actions"]){const i=e[t];i&&!Array.isArray(i)&&(e[t]=[i])}return e},m=e=>("trigger"in e&&("triggers"in e||(e.triggers=e.trigger),delete e.trigger),"condition"in e&&("conditions"in e||(e.conditions=e.condition),delete e.condition),"action"in e&&("actions"in e||(e.actions=e.action),delete e.action),e.triggers&&(e.triggers=v(e.triggers)),e.actions&&(e.actions=(0,s.eR)(e.actions)),e),v=e=>e?Array.isArray(e)?e.map(v):("triggers"in e&&e.triggers&&(e.triggers=v(e.triggers)),"platform"in e&&("trigger"in e||(e.trigger=e.platform),delete e.platform),e):e,h=e=>{if(!e)return[];const t=[];return(0,r.r)(e).forEach(e=>{"triggers"in e?e.triggers&&t.push(...h(e.triggers)):t.push(e)}),t},b=(e,t)=>{f=e;const i=t?`?${(0,o.ou)({expanded:"1"})}`:"";(0,n.c)(`/config/automation/edit/new${i}`)},j=e=>{b({...e,id:void 0,alias:void 0})},w=()=>{const e=f;return f=void 0,e},A=e=>{if(!e||"object"!=typeof e)return!1;const t=e;return"trigger"in t&&"string"==typeof t.trigger||"platform"in t&&"string"==typeof t.platform},E=e=>{if(!e||"object"!=typeof e)return!1;return"condition"in e&&"string"==typeof e.condition},Z=(e,t,i,n)=>e.connection.subscribeMessage(t,{type:"subscribe_trigger",trigger:i,variables:n}),q=(e,t,i)=>e.callWS({type:"test_condition",condition:t,variables:i})},66095:function(e,t,i){i.d(t,{EH:()=>d,FI:()=>A,Kx:()=>g,Pw:()=>E,TL:()=>p,ZN:()=>M,eM:()=>j,eR:()=>q,kC:()=>y,oE:()=>b,oR:()=>v,rg:()=>w,rq:()=>m,sf:()=>Z,vA:()=>u});i(81738),i(6989);var n=i(95632),r=i(54731),s=i(67050),o=i(10142),a=i(17433),c=i(64637),l=i(2080);const d=["single","restart","queued","parallel"],u=(0,r.z)(["queued","parallel"]),f=(0,n.Ry)({alias:(0,n.jt)((0,n.Z_)()),continue_on_error:(0,n.jt)((0,n.O7)()),enabled:(0,n.jt)((0,n.O7)())}),g=(0,n.Ry)({entity_id:(0,n.jt)((0,n.G0)([(0,n.Z_)(),(0,n.IX)((0,n.Z_)())])),device_id:(0,n.jt)((0,n.G0)([(0,n.Z_)(),(0,n.IX)((0,n.Z_)())])),area_id:(0,n.jt)((0,n.G0)([(0,n.Z_)(),(0,n.IX)((0,n.Z_)())])),floor_id:(0,n.jt)((0,n.G0)([(0,n.Z_)(),(0,n.IX)((0,n.Z_)())])),label_id:(0,n.jt)((0,n.G0)([(0,n.Z_)(),(0,n.IX)((0,n.Z_)())]))}),p=(0,n.f0)(f,(0,n.Ry)({action:(0,n.jt)((0,n.Z_)()),service_template:(0,n.jt)((0,n.Z_)()),entity_id:(0,n.jt)((0,n.Z_)()),target:(0,n.jt)((0,n.G0)([g,(0,n.lF)((0,n.Z_)(),"has_template",e=>(0,l._)(e))])),data:(0,n.jt)((0,n.Ry)()),response_variable:(0,n.jt)((0,n.Z_)()),metadata:(0,n.jt)((0,n.Ry)())})),_=(0,n.f0)(f,(0,n.Ry)({action:(0,n.i0)("media_player.play_media"),target:(0,n.jt)((0,n.Ry)({entity_id:(0,n.jt)((0,n.Z_)())})),entity_id:(0,n.jt)((0,n.Z_)()),data:(0,n.Ry)({media_content_id:(0,n.Z_)(),media_content_type:(0,n.Z_)()}),metadata:(0,n.Ry)()})),y=(e,t,i)=>e.callService("script",t,i),m=e=>"off"===e.state||!!("on"===e.state&&u(e.attributes.mode)&&e.attributes.current<e.attributes.max),v=(e,t)=>e.callApi("DELETE",`config/script/config/${t}`);let h;const b=(e,t)=>e.callApi("GET",`config/script/config/${t}`),j=(e,t)=>e.callWS({type:"script/config",entity_id:t}),w=(e,t)=>{h=e;const i=t?`?${(0,c.ou)({expanded:"1"})}`:"";(0,s.c)(`/config/script/edit/new${i}`)},A=()=>{const e=h;return h=void 0,e},E=e=>"string"==typeof e&&(0,l._)(e)?"check_condition":"delay"in e?"delay":"wait_template"in e?"wait_template":["condition","and","or","not"].some(t=>t in e)?"check_condition":"event"in e?"fire_event":"device_id"in e?"device_action":"repeat"in e?"repeat":"choose"in e?"choose":"if"in e?"if":"wait_for_trigger"in e?"wait_for_trigger":"variables"in e?"variables":"stop"in e?"stop":"sequence"in e?"sequence":"parallel"in e?"parallel":"set_conversation_response"in e?"set_conversation_response":"action"in e||"service"in e?"metadata"in e&&(0,n.is)(e,_)?"play_media":"service":"unknown",Z=(e,t)=>{const i=e.services.script[(0,a.p)(t)]?.fields;return void 0!==i&&Object.keys(i).length>0},q=e=>{if(!e)return e;if(Array.isArray(e))return e.map(q);if("object"==typeof e&&null!==e&&"service"in e&&("action"in e||(e.action=e.service),delete e.service),"object"==typeof e&&null!==e&&"scene"in e&&(e.action="scene.turn_on",e.target={entity_id:e.scene},delete e.scene),"object"==typeof e&&null!==e&&"sequence"in e)for(const t of e.sequence)q(t);const t=E(e);if("parallel"===t){q(e.parallel)}if("choose"===t){const t=e;if(Array.isArray(t.choose))for(const e of t.choose)q(e.sequence);else t.choose&&q(t.choose.sequence);t.default&&q(t.default)}if("repeat"===t){q(e.repeat.sequence)}if("if"===t){const t=e;q(t.then),t.else&&q(t.else)}if("wait_for_trigger"===t){const t=e;(0,o.W9)(t.wait_for_trigger)}return e},M=e=>{const t=e.sequence;return t&&!Array.isArray(t)&&(e.sequence=[t]),e.sequence&&(e.sequence=q(e.sequence)),e}},18019:function(e,t,i){i.r(t),i.d(t,{addExternalBarCodeListener:()=>l,attachExternalToApp:()=>c,handleExternalMessage:()=>d});i(81738),i(22960),i(67886),i(65451),i(46015),i(38334),i(94880),i(75643),i(29761);var n=i(39884),r=i(83054),s=i(67050),o=i(10142);const a=new Set,c=e=>{window.addEventListener("haptic",t=>e.hass.auth.external.fireMessage({type:"haptic",payload:{hapticType:t.detail}})),e.hass.auth.external.addCommandHandler(t=>d(e,t))},l=e=>(a.add(e),()=>{a.delete(e)}),d=(e,t)=>{const i=e.hass.auth.external;if("restart"===t.command)e.hass.connection.reconnect(!0),i.fireMessage({id:t.id,type:"result",success:!0,result:null});else if("navigate"===t.command)(0,s.c)(t.payload.path,t.payload.options),i.fireMessage({id:t.id,type:"result",success:!0,result:null});else if("notifications/show"===t.command)(0,n.B)(e,"hass-show-notifications"),i.fireMessage({id:t.id,type:"result",success:!0,result:null});else if("sidebar/toggle"===t.command){if(r.E.history.state?.open)return i.fireMessage({id:t.id,type:"result",success:!1,error:{code:"not_allowed",message:"dialog open"}}),!0;(0,n.B)(e,"hass-toggle-menu"),i.fireMessage({id:t.id,type:"result",success:!0,result:null})}else if("sidebar/show"===t.command){if(r.E.history.state?.open)return i.fireMessage({id:t.id,type:"result",success:!1,error:{code:"not_allowed",message:"dialog open"}}),!0;(0,n.B)(e,"hass-toggle-menu",{open:!0}),i.fireMessage({id:t.id,type:"result",success:!0,result:null})}else if("automation/editor/show"===t.command)(0,o.Ip)(t.payload?.config),i.fireMessage({id:t.id,type:"result",success:!0,result:null});else if("improv/discovered_device"===t.command)(0,n.B)(window,"improv-discovered-device",t.payload),i.fireMessage({id:t.id,type:"result",success:!0,result:null});else if("improv/device_setup_done"===t.command)(0,n.B)(window,"improv-device-setup-done"),i.fireMessage({id:t.id,type:"result",success:!0,result:null});else if("bar_code/scan_result"===t.command)a.forEach(e=>e(t)),i.fireMessage({id:t.id,type:"result",success:!0,result:null});else{if("bar_code/aborted"!==t.command)return!1;a.forEach(e=>e(t)),i.fireMessage({id:t.id,type:"result",success:!0,result:null})}return!0}}};
//# sourceMappingURL=90955.43a1af2a08311524.js.map