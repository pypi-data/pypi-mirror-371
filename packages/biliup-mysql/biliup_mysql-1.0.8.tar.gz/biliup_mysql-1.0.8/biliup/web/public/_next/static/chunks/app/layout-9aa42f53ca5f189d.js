(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[185],{72766:function(e,t,r){Promise.resolve().then(r.bind(r,44374))},44374:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return y}});var i=r(57437);r(47960);var a=r(2265),o=r(27648),s=r(99376),n=r(64711),d=r(9247),l=r(67050),c=r(20604),u=r(94731),m=r(67489),h=r(70787),g=r(42337),x=r(36699),b=r(50196),f=r(35901);function y(e){let{children:t}=e,{Sider:r}=n.Layout,y=(0,s.usePathname)(),v=[];("streamers"===y.slice(1)||"history"===y.slice(1))&&(v=["manager"]);let[p,j]=(0,a.useState)(v),[w,k]=(0,a.useState)([y.slice(1)]),{width:K}=(0,b.Z)(),[C,E]=(0,a.useState)(K<=640),[S,z]=(0,a.useState)(localStorage.getItem("mode")||"auto"),L=(0,x.K4)();return(0,x.Fg)(S,L),(0,a.useEffect)(()=>{K<=640&&E(!0)},[K]),(0,a.useMemo)(()=>[{itemKey:"home",text:"主页",icon:(0,i.jsx)("div",{style:{backgroundColor:"#ffaa00ff",borderRadius:"var(--semi-border-radius-medium)",color:"var(--semi-color-bg-0)",display:"flex",padding:"4px"},children:(0,i.jsx)(d.Z,{size:"small"})})},{itemKey:"manager",text:"录播管理",items:[{itemKey:"streamers",text:"直播管理"},{itemKey:"history",text:"历史记录"}],icon:(0,i.jsx)("div",{style:{backgroundColor:"#5ac262ff",borderRadius:"var(--semi-border-radius-medium)",color:"var(--semi-color-bg-0)",display:"flex",padding:"4px"},children:(0,i.jsx)(l.Z,{size:"small"})})},{itemKey:"upload-manager",text:"投稿管理",icon:(0,i.jsx)("div",{style:{backgroundColor:"#885bd2ff",borderRadius:"var(--semi-border-radius-medium)",color:"var(--semi-color-bg-0)",display:"flex",padding:"4px"},children:(0,i.jsx)(c.Z,{size:"small"})})},{itemKey:"dashboard",text:"空间配置",icon:(0,i.jsx)("div",{style:{backgroundColor:"#6b6c75ff",borderRadius:"var(--semi-border-radius-medium)",color:"var(--semi-color-bg-0)",display:"flex",padding:"4px"},children:(0,i.jsx)(u.Z,{size:"small"})})},{itemKey:"job",text:"直播历史",icon:(0,i.jsx)("div",{style:{backgroundColor:"rgb(250 102 76)",borderRadius:"var(--semi-border-radius-medium)",color:"var(--semi-color-bg-0)",display:"flex",padding:"4px"},children:(0,i.jsx)(m.Z,{size:"small"})})},{text:"实时日志",icon:(0,i.jsx)("div",{style:{backgroundColor:"rgba(var(--semi-blue-4), 1)",borderRadius:"var(--semi-border-radius-medium)",color:"var(--semi-color-bg-0)",display:"flex",padding:"4px"},children:(0,i.jsx)(h.Z,{size:"small"})}),itemKey:"logViewer"},{text:"任务平台",icon:(0,i.jsx)("div",{style:{backgroundColor:"rgba(var(--semi-lime-2), 1)",borderRadius:"var(--semi-border-radius-medium)",color:"var(--semi-color-bg-0)",display:"flex",padding:"4px"},children:(0,i.jsx)(g.Z,{size:"small"})}),itemKey:"status"}].map(e=>(e.text=(0,i.jsx)("div",{style:{color:w.some(t=>e.itemKey===t)||w.some(e=>p.some(t=>{var r;return null===(r=({manager:["streamers","history"]})[t])||void 0===r?void 0:r.includes(e)}))&&p.some(t=>e.itemKey===t)?"var(--semi-color-text-0)":"var(--semi-color-text-2)",fontWeight:600},children:e.text}),e)),[p,w]),(0,a.useCallback)(e=>{let{itemElement:t,isSubNav:r,isInSubNav:a,props:s}=e,n={home:"/",history:"/history",dashboard:"/dashboard",streamers:"/streamers","upload-manager":"/upload-manager",job:"/job",status:"/status",logViewer:"/logviewer"};return n[s.itemKey]?(0,i.jsx)(o.default,{style:{textDecoration:"none",fontWeight:"600 !important"},href:n[s.itemKey],children:t}):t},[]),(0,a.useCallback)(()=>{E(!C)},[C]),(0,i.jsx)("html",{lang:"zh-Hans",children:(0,i.jsx)("body",{style:{width:"100%"},children:(0,i.jsx)(f.H,{children:(0,i.jsx)(n.Layout,{className:"components-layout-demo semi-light-scrollbar",children:(0,i.jsx)(n.Layout,{style:{height:"100vh"},children:t})})})})})}},35901:function(e,t,r){"use strict";r.d(t,{H:function(){return n},a:function(){return d}});var i=r(57437),a=r(2265),o=r(99376);let s=(0,a.createContext)(void 0);function n(e){let{children:t}=e,[r,n]=(0,a.useState)(!1),d=(0,o.useRouter)();(0,a.useEffect)(()=>{let e=localStorage.getItem("auth");e?c(e).then(e=>{n(e),e||localStorage.removeItem("auth")}):l().then(e=>{e||n(!0)})},[]);let l=async()=>{try{let e=localStorage.getItem("auth"),t=await fetch("/api/basic",{headers:{Authorization:"Basic ".concat(e)}});return 401===t.status}catch(e){return!0}},c=async e=>{try{return(await fetch("/api/basic",{headers:{Authorization:"Basic ".concat(e)}})).ok}catch(e){return!1}},u=async(e,t)=>{try{let r=btoa("".concat(e,":").concat(t));if(await c(r))return localStorage.setItem("auth",r),n(!0),!0;return!1}catch(e){return!1}};return(0,i.jsx)(s.Provider,{value:{isAuthenticated:r,login:u,logout:()=>{localStorage.removeItem("auth"),n(!1),l().then(e=>{e?d.push("/login"):d.push("/")})}},children:t})}function d(){let e=(0,a.useContext)(s);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}},36699:function(e,t,r){"use strict";r.d(t,{Fg:function(){return d},K4:function(){return n},cE:function(){return s},f:function(){return a},ql:function(){return o}});var i=r(2265);let a={xs:"(max-width: 575px)",sm:"(min-width: 576px)",md:"(min-width: 768px)",lg:"(min-width: 992px)",xl:"(min-width: 1200px)",xxl:"(min-width: 1600px)"},o=(e,t)=>{let{match:r,unmatch:i,callInInit:a=!0}=t;{let t=window.matchMedia(e),o=function(e){e.matches?r&&r(e):i&&i(e)};return(a&&o(t),Object.prototype.hasOwnProperty.call(t,"addEventListener"))?(t.addEventListener("change",o),()=>t.removeEventListener("change",o)):(t.addListener(o),()=>t.removeListener(o))}},s=e=>new Date(1e3*e).toLocaleString("zh-CN",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!1}).replaceAll("/","-"),n=()=>{let[e,t]=(0,i.useState)("light");return(0,i.useEffect)(()=>{let e=()=>window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light";t(e);let r=window.matchMedia("(prefers-color-scheme: dark)"),i=()=>t(e);return r.addEventListener("change",i),()=>r.removeEventListener("change",i)},[]),e},d=(e,t)=>{(0,i.useEffect)(()=>{switch(localStorage.setItem("mode",e),e){case"light":document.body.setAttribute("theme-mode","light");break;case"dark":document.body.setAttribute("theme-mode","dark");break;default:document.body.setAttribute("theme-mode",t)}},[e,t])}},47960:function(){}},function(e){e.O(0,[587,290,737,326,987,971,117,744],function(){return e(e.s=72766)}),_N_E=e.O()}]);